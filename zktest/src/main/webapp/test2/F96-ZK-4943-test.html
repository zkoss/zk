<!--
F96-ZK-4943-test.html

	Purpose:

	Description:

	History:
		Tue Jul 6 18:30:23 CST 2021, Created by jameschu

	Copyright (C) 2021 Potix Corporation. All Rights Reserved.
-->
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Title</title>
	</head> 
	<body>
		<div id="aaa">
			Enabled Embedded ZK in zk.xml (ZK-4390)
		</div>
		<br />
		<div id="status"></div>
		<button id="loadBtn">Click it to load embedded ZK</button>
		<button id="destroyBtn">Click it to destory, and see 'destroy!'</button>
		<script src="/zktest/zkEmbedded"></script>
		<script>
			var loadBtn = document.getElementById('loadBtn');
			loadBtn.addEventListener('click', embedZK, false);
			function embedZK() {
				var p = zEmbedded.load('aaa', 'http://localhost:8080/zktest/test2/F96-ZK-4943.zul')
					.then(function(result) {
						var dt = result.widget.desktop;
						dt.listen({onBeforeDestroy: function() {
							document.getElementById('status').innerHTML = 'destroy!';
						}});
					});;
			}
			var destroyBtn = document.getElementById('destroyBtn');
			destroyBtn.addEventListener('click', destroyEmbeddedZK, false);
			function destroyEmbeddedZK() {
			   zEmbedded.destroy('aaa');
			}
		</script>
	</body>
</html>