zk={procDelay:900,tipDelay:800,resendDelay:-1,lastPointer:[0,0],currentPointer:[0,0],$package:function(e){for(var d=0,f=window;;){var c=e.indexOf(".",d),a=c>=0?e.substring(d,c):e.substring(d);var b=f[a];if(!b){b=f[a]={}}if(c<0){return b}f=b;d=c+1}},$import:function(e){for(var d=0,f=window;;){var c=e.indexOf(".",d),a=c>=0?e.substring(d,c):e.substring(d);var b=f[a];if(c<0||!b){return b}f=b;d=c+1}},$extends:function(e,b,c){if(!e){throw"unknown superclass"}var a=function(){this.$init.apply(this,arguments)};if(typeof e=="string"){var d=zk.$import(e);if(!d){d=e.lastIndexOf(".");if(d>0){d=e.substring(0,d);if(!zPkg.load(d)){zk.afterLoad(function(){var f=zk.$import(e);if(!f){throw"unknown superclass "+e}zk._$extends(a,f,b,c)});return a}}throw"superclass not found, "+e}e=d}this._$extends(a,e,b,c);return a},_$extends:function(b,g,a,e){var c=b.prototype,f=g.prototype;zk.copy(c,f);zk.copy(c,a);for(var d in g){if(d!="prototype"){b[d]=g[d]}}zk.copy(b,e);c.$class=b;c._$super=f;b.$class=zk.Class;b.superclass=g},$default:function(a,c){a=a||{};for(var b in c){if(a[b]==null){a[b]=c[b]}}return a},copy:function(c,b){if(!c){c={}}for(var a in b){c[a]=b[a]}return c},$void:function(){return""},parseInt:function(c,a){c=c?parseInt(c,a||10):0;return isNaN(c)?0:c},isDigit:function(a){return a>="0"&&a<="9"},isWhitespace:function(a){return a==" "||a=="\t"||a=="\n"||a=="\r"},set:function(e,b,c,a){if(arguments.length==2){for(var d in b){zk._set(e,d,b[d])}return}zk._set(e,b,c,a)},_set:function(e,c,d,b){var a=e["set"+c.charAt(0).toUpperCase()+c.substring(1)];if(a){a.call(e,d,b)}else{e[c]=d}},get:function(c,b){var a=b.charAt(0).toUpperCase()+b.substring(1);m=c["get"+a];if(m){return m.call(c)}m=c["is"+a];if(m){return m.call(c)}return c[b]},startProcessing:function(a){zk.processing=true;setTimeout(zk.sysInited?zk._showproc:zk._showprocmk,a>0?a:0)},endProcessing:function(){zk.processing=false;zUtl.destroyProgressbox("zk_proc")},_showprocmk:function(){if(document.readyState&&!/loaded|complete/.test(document.readyState)){var a=setInterval(function(){if(/loaded|complete/.test(document.readyState)){clearInterval(a);zk._showprocmk()}},0);return}zk._showproc0(true)},_showproc:function(){zk._showproc0()},_showproc0:function(a){if(zk.processing){if(zDom.$("zk_proc")||zDom.$("zk_showBusy")){return}var c;try{c=mesg.PLEASE_WAIT}catch(b){c="Processing..."}zUtl.progressbox("zk_proc",c,a)}},error:function(f){if(!zk.sysInited){setTimeout(function(){zk.error(f)},100);return}if(!zk._errcnt){zk._errcnt=1}var h="zk_err"+zk._errcnt++,a=(zk._errcnt*5)%50,g=(zk._errcnt*5)%50,c=document.createElement("DIV");document.body.appendChild(c);var b='<div class="z-error" style="left:'+(zDom.innerX()+a)+"px;top:"+(zDom.innerY()+g)+'px;" id="'+h+'"><table cellpadding="2" cellspacing="2" width="100%"><tr><td align="right"><div id="'+h+'$p"><a href="javascript:zk._sendRedraw()">redraw</a>&nbsp;<a href="javascript:zDom.remove(\''+h+'\')">close</a></div></td></tr><tr valign="top"><td class="z-error-msg">'+zUtl.encodeXML(f,{multiline:true})+"</td></tr></table></div>";c=zDom.setOuterHTML(c,b);try{new zk.Draggable(null,c,{handle:zDom.$(h+"$p"),zIndex:c.style.zIndex,starteffect:zk.$void,starteffect:zk.$void,endeffect:zk.$void})}catch(d){}},errorDismiss:function(){for(var a=zk._errcnt;a;--a){zDom.remove("zk_err"+a)}},_sendRedraw:function(){zk.errorDismiss();zAu.send(new zk.Event(null,"redraw"))},log:function(c){var e=arguments,d="";for(var b=0,a=e.length;b<a;b++){if(d){d+=", "}d+=e[b]}zk._msg=(zk._msg?zk._msg+d:d)+"\n";setTimeout(zk._log0,600)},_log0:function(){if(zk._msg){var a=zDom.$("zk_log");if(!a){a=document.createElement("DIV");document.body.appendChild(a);var b='<div id="zk_logbox" class="z-log"><button onclick="zDom.remove(\'zk_logbox\');">X</button><br/><textarea id="zk_log" rows="10"></textarea></div>';zDom.setOuterHTML(a,b);a=zDom.$("zk_log")}a.value+=zk._msg;a.scrollTop=a.scrollHeight;zk._msg=null}}};zk.copy(String.prototype,{startsWith:function(a){return this.substring(0,a.length)==a},endsWith:function(a){return this.substring(this.length-a.length)==a},trim:function(){var c=0,b=this.length,a=b-1;while(c<b&&this.charAt(c)<=" "){++c}while(a>=c&&this.charAt(a)<=" "){--a}return c>a?"":this.substring(c,a+1)},$camel:function(){var d=this.split("-"),a=d.length;if(a==1){return d[0]}var c=this.charAt(0)=="-"?d[0].charAt(0).toUpperCase()+d[0].substring(1):d[0];for(var b=1;b<a;b++){c+=d[b].charAt(0).toUpperCase()+d[b].substring(1)}return c},$inc:function(a){return String.fromCharCode(this.charCodeAt(0)+a)},$sub:function(a){return this.charCodeAt(0)-a.charCodeAt(0)}});zk.copy(Array.prototype,{$array:true,$contains:function(c){for(var b=0,a=this.length;b<a;++b){if(c==this[b]){return true}}return false},$add:function(d,c){if(c){for(var a=this.length,b=0;b<a;++b){if(d==this[b]){this[b]=d;return false}}}this.push(d);return true},$addAt:function(b,c){var a=this.length;if(b>=a){this.push(c)}else{this.splice(b,0,c)}},$remove:function(c){for(var b=0,a=this.length;b<a;++b){if(c==this[b]){this.splice(b,1);return true}}return false},$removeAt:function(a){if(a<this.length){this.splice(a,1)}},$clone:function(){return[].concat(this)}});if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c){for(var b=0,a=this.length;b<a;b++){if(this[b]==c){return b}}return -1}}zk.agent=navigator.userAgent.toLowerCase();zk.safari=zk.agent.indexOf("safari")>=0;zk.opera=zk.agent.indexOf("opera")>=0;zk.gecko=zk.agent.indexOf("gecko/")>=0&&!zk.safari&&!zk.opera;if(zk.gecko){var j=zk.agent.indexOf("firefox/");j=zk.parseInt(zk.agent.substring(j+8));zk.gecko3=j>=3;zk.gecko2Only=!zk.gecko3;zk.xbodyClass="gecko gecko"+j}else{if(zk.opera){zk.xbodyClass="opera"}else{var j=zk.agent.indexOf("msie ");zk.ie=j>=0;if(zk.ie){j=zk.parseInt(zk.agent.substring(j+5));zk.ie7=j>=7;zk.ie8=j>=8;zk.ie6Only=!zk.ie7;zk.xbodyClass="ie ie"+j}else{if(zk.safari){zk.xbodyClass="safari"}}}}if(zk.air=zk.agent.indexOf("adobeair")>=0){zk.xbodyClass="air"}zk.Object=function(){};zk.Object.prototype={$init:zk.$void,$class:zk.Object,$instanceof:function(a){if(a){var b=this.$class;if(b==zk.Class){return this==zk.Object||this==zk.Class}for(;b;b=b.superclass){if(b==a){return true}}}return false},$super:function(d,c){var b=[];for(var a=arguments.length;--a>0;){b.unshift(arguments[a])}return this.$supers(d,b)},$supers:function(f,d){var e=this._$supers;if(!e){e=this._$supers={}}var c=e[f],b,g,a;if(c){a=c[f];g=c}else{a=this[f];g=this}for(;;){if(!(g=g._$super)){throw f+" not in superclass"}if(a!=g[f]){b=g[f];if(b){e[f]=g}break}}try{return b.apply(this,d)}finally{e[f]=c}},proxy:function(c,a){if(a){var b=this[a];if(b){return b}}var d=this,b=function(){return c.apply(d,arguments)};if(a){this[a]=b}return b}};zk.Class=function(){};zk.Class.superclass=zk.Object;_zkf={$class:zk.Class,isInstance:function(a){return a&&a.$instanceof&&a.$instanceof(this)},isAssignableFrom:function(a){for(;a;a=a.superclass){if(this==a){return true}}return false},$instanceof:zk.Object.prototype.$instanceof};zk.copy(zk.Class,_zkf);zk.copy(zk.Object,_zkf);
zk.BigDecimal=zk.$extends(zk.Object,{_prec:0,$init:function(b){b=b?""+b:"0";var a=b.lastIndexOf(".");if(a>=0){b=b.substring(0,a)+b.substring(a+1);this._prec=b.length-a}this._value=b}});
zUtl={encodeXML:function(i,a){var g="";if(!i){return g}var e=0,l=i.length,d=a&&a.pre,b=d||(a&&a.multiline);for(var h=0;h<l;++h){var c=i.charAt(h);if(c=="\n"){if(b){g+=i.substring(e,h)+"<br/>\n";e=h+1}}else{if(c==" "||c=="\t"){if(d){g+=i.substring(e,h)+"&nbsp;";if(c=="\t"){g+="&nbsp;&nbsp;&nbsp;"}e=h+1}}else{var f=zUtl._encs[c];if(f){g+=i.substring(e,h)+"&"+f+";";e=h+1}}}}return !e?i:e<l?g+i.substring(e):g},decodeXML:function(a){var f="";if(!a){return f}var d=0,c=a.length;for(var e=0;e<c;++e){var h=a.charAt(e);if(h=="&"){var b=a.indexOf(";",e+1);if(b>=0){var g=zUtl._decs[a.substring(e+1,b)];if(g){f+=a.substring(d,e)+g;d=(e=b)+1}}}}return !d?a:d<c?f+a.substring(d):f},_decs:{lt:"<",gt:">",amp:"&",quot:'"'},_encs:{},renType:function(e,g){var d=e.lastIndexOf(";");var h;if(d>=0){h=e.substring(d);e=e.substring(0,d)}else{h=""}d=e.lastIndexOf(".");if(d<0){d=e.length}var c=e.lastIndexOf("-"),b=e.lastIndexOf("/"),f=d<=b?"":e.substring(d),a=c<=b?d<=b?e:e.substring(0,d):e.substring(0,c);if(g){g="-"+g}else{g=""}return a+g+f+h},getElementValue:function(b){var a="";for(b=b.firstChild;b;b=b.nextSibling){if(b.data){a+=b.data}}return a},cellps0:' cellpadding="0" cellspacing="0" border="0"',img0:'<img style="height:0;width:0"/>',now:function(){return new Date().getTime()},today:function(){var a=new Date();return new Date(a.getFullYear(),a.getMonth(),a.getDate())},isAncestor:function(a,b){if(!a){return true}for(;b;b=b.getParent?b.getParent():b.parent){if(a==b){return true}}return false},isDescendant:function(b,a){return zUtl.isAncestor(a,b)},progressbox:function(b,g,p){if(p&&zk.Page.contained.length){for(var k=zk.Page.contained.length,j=zk.Page.contained[--k];j;j=zk.Page.contained[--k]){if(!j._applyMask){j._applyMask=new zk.eff.Mask({id:j.uuid+"$mask",anchor:j.getNode()})}}return}var m=zDom.innerX(),l=zDom.innerY(),a=' style="left:'+m+"px;top:"+l+'px"',f=b+"$t",o=b+"$m",i='<div id="'+b+'"';if(p){i+='><div id="'+o+'" class="z-modal-mask"'+a+"></div"}i+='><div id="'+f+'" class="z-loading"'+a+'><div class="z-loading-indicator"><span class="z-loading-icon"></span> '+g+"</div></div></div>";var d=document.createElement("DIV");document.body.appendChild(d);d=zDom.setOuterHTML(d,i);var h=zDom.$(f);if(p){d.z_mask=new zk.eff.FullMask({mask:zDom.$(o),zIndex:zDom.getStyle(h,"z-index")-1})}if(p&&h){h.style.left=(zDom.innerWidth()-h.offsetWidth)/2+m+"px";h.style.top=(zDom.innerHeight()-h.offsetHeight)/2+l+"px"}zDom.cleanVisibility(d)},destroyProgressbox:function(f){var d=zDom.$(f);if(d){if(d.z_mask){d.z_mask.destroy()}zDom.remove(d)}for(var b=zk.Page.contained.length,a=zk.Page.contained[--b];a;a=zk.Page.contained[--b]){if(a._applyMask){a._applyMask.destroy();a._applyMask=null}}},go:function(d,c,h){if(!d){location.reload()}else{if(c){location.replace(d)}else{if(h){try{var f=document.createElement("FORM");document.body.appendChild(f);var b=d.indexOf("?");if(b>0){var a=d.substring(b+1);d=d.substring(0,b);zk.queryToHiddens(f,a)}f.name="go";f.action=d;f.method="GET";f.target=h;f.submit()}catch(g){}}else{location.href=d}}}},newAjax:function(){if(window.XMLHttpRequest){return new XMLHttpRequest()}else{try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){return new ActiveXObject("Microsoft.XMLHTTP")}}},intsToString:function(c){if(!c){return""}var d=[];for(var b=0,a=c.length;b<a;++b){d.push(c[b])}return d.join()},stringToInts:function(b,a){if(b==null){return null}var f=[];for(var d=0;;){var c=b.indexOf(",",d),e=(c>=0?b.substring(d,c):b.substring(d)).trim();if(e.length==0){if(c<0){break}f.push(a)}else{f.push(zk.parseInt(e))}if(c<0){break}d=c+1}return f},_init:function(){delete zUtl._init;var c=zUtl._encs,b=zUtl._decs;for(var a in b){c[b[a]]=a}}};zUtl._init();
zDom={$:function(b,a){return typeof b=="string"?b?document.getElementById(b+(a?"$"+a:"")):null:b},$$:function(b,a){return typeof b=="string"?b?document.getElementsByName(b+(a?"$"+a:"")):null:b},tag:function(a){return a&&a.tagName?a.tagName.toUpperCase():""},hide:function(a){a.style.display="none"},show:function(a){a.style.display=""},cleanVisibility:zk.opera?function(a){a.style.visibility="visible"}:function(a){a.style.visibility="inherit"},isVisible:function(b,a){return b&&(!b.style||(b.style.display!="none"&&(!a||b.style.visibility!="hidden")))},isRealVisible:function(b,a){for(;b;b=zDom.parentNode(b)){if(!zDom.isVisible(b,a)){return false}}return true},isAncestor:function(a,b){if(!a){return true}for(;b;b=zDom.parentNode(b)){if(a==b){return true}}return false},innerX:function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0},innerY:function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},innerWidth:function(){return typeof window.innerWidth=="number"?window.innerWidth:document.compatMode=="CSS1Compat"?document.documentElement.clientWidth:document.body.clientWidth},innerHeight:function(){return typeof window.innerHeight=="number"?window.innerHeight:document.compatMode=="CSS1Compat"?document.documentElement.clientHeight:document.body.clientHeight},pageWidth:function(){var d=document.body.scrollWidth,c=document.body.offsetWidth;return d>c?d:c},pageHeight:function(){var d=document.body.scrollHeight,c=document.body.offsetHeight;return d>c?d:c},scrollTo:function(b){b=zDom.$(b);var a=zDom.cmOffset(b);scrollTo(a[0],a[1]);return b},margins:{l:"margin-left",r:"margin-right",t:"margin-top",b:"margin-bottom"},borders:{l:"border-left-width",r:"border-right-width",t:"border-top-width",b:"border-bottom-width"},paddings:{l:"padding-left",r:"padding-right",t:"padding-top",b:"padding-bottom"},sumStyles:function(e,c,f){var g=0;for(var d=0,a=c.length;d<a;d++){var b=zk.parseInt(zDom.getStyle(e,f[c.charAt(d)]));if(!isNaN(b)){g+=b}}return g},revisedOffset:function(d,e){if(!e){if(d.getBoundingClientRect){var a=d.getBoundingClientRect();return[a.left+zDom.innerX()-d.ownerDocument.documentElement.clientLeft,a.top+zDom.innerY()-d.ownerDocument.documentElement.clientTop]}e=zDom.cmOffset(d)}var c=zDom.scrollOffset(d);c[0]-=zDom.innerX();c[1]-=zDom.innerY();return[e[0]-c[0],e[1]-c[1]]},revisedWidth:function(c,a,b){a-=zDom.frameWidth(c);if(a>0&&b){a-=zDom.sumStyles(c,"lr",zDom.margins)}return a<0?0:a},revisedHeight:function(c,a,b){a-=zDom.frameHeight(c);if(a>0&&b){a-=zDom.sumStyles(c,"tb",zDom.margins)}return a<0?0:a},frameWidth:function(a){return zDom.sumStyles(a,"lr",zDom.borders)+zDom.sumStyles(a,"lr",zDom.paddings)},frameHeight:function(a){return zDom.sumStyles(a,"tb",zDom.borders)+zDom.sumStyles(a,"tb",zDom.paddings)},scrollbarWidth:function(a){return(a.offsetWidth-a.clientWidth)+zDom.sumStyles(a,"lr",zDom.borders)},vflexHeight:function(c){var a=c.parentNode.clientHeight;if(zk.ie6Only){var d=c.parentNode;var b=d.style.height;if(b&&b.endsWith("px")){b=zDom.revisedHeight(d,zk.parseInt(b));if(b&&b<a){a=b}}}for(var e=c;e=e.previousSibling;){if(e.offsetHeight&&zDom.isVisible(e)){a-=e.offsetHeight}}for(var e=c;e=e.nextSibling;){if(e.offsetHeight&&zDom.isVisible(e)){a-=e.offsetHeight}}return a},cellIndex:function(a){var e=0;if(zk.ie){var d=a.parentNode.cells;for(var c=0,b=d.length;c<b;c++){if(d[c]==a){e=c;break}}}else{e=a.cellIndex}return e},ncols:function(c){var d=0;if(c){for(var b=0,a=c.length;b<a;++b){var e=c[b].colSpan;if(e>=1){d+=e}else{++d}}}return d},toStyleOffset:function(c,i,h){var e=c.style.left,d=c.style.top,f=zk.opera||zk.air;if(f||c.style.left==""||c.style.left=="auto"){c.style.left="0"}if(f||c.style.top==""||c.style.top=="auto"){c.style.top="0"}var b=zDom.cmOffset(c);var a=zk.parseInt(c.style.left),g=zk.parseInt(c.style.top);b=[i-b[0]+a,h-b[1]+g];c.style.left=e;c.style.top=d;return b},center:function(a,b){var d=zDom.offsetWidth(a),e=zDom.offsetHeight(a);if((!d||!e)&&!zDom.isVisible(a)){a.style.top="-10000px";a.style.display="block";d=zDom.offsetWidth(a);e=zDom.offsetHeight(a),a.style.display="none"}var c=zDom.innerX(),j=zDom.innerY();var k,i,h,g;d=zDom.innerWidth()-d;if(!b){k=c+d/2}else{if(b.indexOf("left")>=0){k=c}else{if(b.indexOf("right")>=0){k=c+d-1}else{if(b.indexOf("center")>=0){k=c+d/2}else{k=0;h=true}}}}e=zDom.innerHeight()-e;if(!b){i=j+e/2}else{if(b.indexOf("top")>=0){i=j}else{if(b.indexOf("bottom")>=0){i=j+e-1}else{if(b.indexOf("center")>=0){i=j+e/2}else{i=0;g=true}}}}if(k<c){k=c}if(i<j){i=j}var f=zDom.toStyleOffset(a,k,i);if(!h){a.style.left=f[0]+"px"}if(!g){a.style.top=f[1]+"px"}},position:function(d,i,h,b){h=h||"overlap";var j=zDom.getDimension(d),e=j.width,f=j.height,n=i.top,m=i.left;switch(h){case"before_start":m-=f;break;case"before_end":m-=f;n+=i.width-e;break;case"after_start":m+=i.height;break;case"after_end":m+=i.height;n+=i.width-e;break;case"start_before":n-=e;break;case"start_after":n-=e;m+=i.height-f;break;case"end_before":n+=i.width;break;case"end_after":n+=i.width;m+=i.height-f;break;case"at_pointer":var g=zk.lastPointer;n=g[0];m=g[1];break;case"after_pointer":var g=zk.lastPointer;n=g[0];m=g[1]+20;break;default:}if(!b||!b.overflow){var l=zDom.innerX(),k=zDom.innerY(),c=l+zDom.innerWidth(),a=k+zDom.innerHeight();if(n+e>c){n=c-e}if(n<l){n=l}if(m+f>a){m=a-f}if(m<k){m=k}}j=zDom.toStyleOffset(d,n,m);d.style.left=j[0]+"px";d.style.top=j[1]+"px"},scrollOffset:function(e){var c=0,b=0,a=zDom.tag(e);do{var d=zDom.tag(e);if(!zk.opera||d=="BODY"||(a!="TR"&&a!="IMG"&&d=="DIV")){c+=e.scrollTop||0;b+=e.scrollLeft||0}e=e.parentNode}while(e);return[b,c]},cmOffset:function(a){if(zk.safari&&zDom.tag(a)==="TR"&&a.cells.length){a=a.cells[0]}if(!(zk.gecko||zk.safari)||zDom.isVisible(a)||zDom.offsetWidth(a)){return zDom._cmOffset(a)}a.style.display="";var b=zDom._cmOffset(a);a.style.display="none";return b},_cmOffset:function(e){var b=0,a=0,d;if(zk.gecko){var f=e.parentNode;while(f&&f!=document.body){var c=zDom.getStyle(f,"position");if(c=="relative"||c=="absolute"){b+=zk.parseInt(zDom.getStyle(f,"border-top-width"));a+=zk.parseInt(zDom.getStyle(f,"border-left-width"))}f=f.offsetParent}}do{if(zDom.getStyle(e,"position")=="fixed"){b+=zk.innerY()+e.offsetTop;a+=zk.innerX()+e.offsetLeft;break}else{if(zk.opera){if(d&&e.nodeName=="DIV"&&e.scrollTop!=0){b+=e.scrollTop||0}d=e.nodeName=="SPAN"||e.nodeName=="INPUT"}b+=e.offsetTop||0;a+=e.offsetLeft||0;e=zk.gecko&&e!=document.body?zDom.offsetParent(e):e.offsetParent}}while(e);return[a,b]},isOverlapped:function(c,i,b,g){var k=c[0],j=i[0]+k,e=c[1],d=i[1]+e;var a=b[0],l=g[0]+a,h=b[1],f=g[1]+h;return a<=j&&l>=k&&h<=d&&f>=e},absolutize:function(b){if(b.style.position=="absolute"){return}var c=zDom._posOffset(b),e=c[0],d=c[1],a=b.style;b._$orgLeft=e-parseFloat(a.left||0);b._$orgTop=d-parseFloat(a.top||0);a.position="absolute";a.top=d+"px";a.left=e+"px"},_posOffset:function(c){if(zk.safari&&zDom.tag(c)==="TR"&&c.cells.length){c=c.cells[0]}var b=0,a=0;do{b+=c.offsetTop||0;a+=c.offsetLeft||0;c=zk.gecko&&c!=document.body?zDom.offsetParent(c):c.offsetParent;if(c){if(c.tagName=="BODY"){break}var d=zDom.getStyle(c,"position");if(d=="relative"||d=="absolute"){break}}}while(c);return[a,b]},relativize:function(b){if(b.style.position=="relative"){return}var a=b.style;a.position="relative";var d=parseFloat(a.top||0)-(b._$orgTop||0),c=parseFloat(a.left||0)-(b._$orgLeft||0);a.top=d+"px";a.left=c+"px"},offsetParent:function(a){if(a.offsetParent){return a.offsetParent}if(a==document.body){return a}while((a=a.parentNode)&&a!=document.body){if(a.style&&zDom.getStyle(a,"position")!="static"){return a}}return document.body},offsetWidth:function(d){if(!d){return 0}if(!zk.safari||zDom.tag(d)!="TR"){return d.offsetWidth}var c=0;for(var b=d.cells,a=b.length;--a>=0;){c+=b[a].offsetWidth}return c},offsetHeight:function(e){if(!e){return 0}if(!zk.safari||zDom.tag(e)!="TR"){return e.offsetHeight}var c=0;for(var b=e.cells,a=b.length;--a>=0;){var d=b[a].offsetHeight;if(d>c){c=d}}return c},offsetTop:function(a){if(!a){return 0}if(zk.safari&&zDom.tag(a)==="TR"&&a.cells.length){a=a.cells[0]}return a.offsetTop},offsetLeft:function(a){if(!a){return 0}if(zk.safari&&zDom.tag(a)==="TR"&&a.cells.length){a=a.cells[0]}return a.offsetLeft},viewportOffset:function(c){var b=0,a=0,d=c;do{b+=d.offsetTop||0;a+=d.offsetLeft||0;if(d.offsetParent==document.body){if(zDom.getStyle(d,"position")=="absolute"){break}}}while(d=d.offsetParent);do{if(!zk.opera||c.tagName=="BODY"){b-=c.scrollTop||0;a-=c.scrollLeft||0}}while(c=c.parentNode);return[a,b]},getTextUtil:function(){if(!this._textUtil){this._textUtil={styles:["fontSize","fontStyle","fontWeight","fontFamily","lineHeight","letterSpacing","textTransform"],getNode:function(){var a=this._node||zDom.$("zk_textUtil");if(!a){a=document.createElement("div");document.body.appendChild(a);a.id="zk_textUtil";this._node=a}a.style.position="absolute";a.style.top=a.style.left="-1000px";a.style.width="auto";a.style.visibility="hidden";return a},measure:function(a,b){if(!this._node){this._node=this.getNode()}this.apply(a,b);return{width:this._node.offsetWidth,height:this._node.offsetHeight}},apply:function(b,c){for(var a=this.styles.length;--a>=0;){this._node.style[this.styles[a]]=zDom.getStyle(b,this.styles[a])}this._node.innerHTML=typeof c=="string"?c:b.innerHTML},destroy:function(){if(this._node){zDom.remove(this._node)}this._node=null}}}return this._textUtil},getDimension:function(c){var g=zDom.getStyle(c,"display");if(g!="none"&&g!=null){return{width:zDom.offsetWidth(c),height:zDom.offsetHeight(c),top:zDom.offsetTop(c),left:zDom.offsetLeft(c)}}var j=c.style,i=j.visibility,e=j.position,b=j.display;j.visibility="hidden";j.position="absolute";j.display="block";var a=c.clientWidth,d=c.clientHeight,f=c.offsetTop,h=c.offsetLeft;j.display=b;j.position=e;j.visibility=i;return{width:a,height:d,top:f,left:h}},hasClass:function(a,b){var c=a?a.className:"";return c&&(" "+c+" ").indexOf(" "+b+" ")!=-1},addClass:function(a,b){if(a&&!zDom.hasClass(a,b)){var c=a.className;if(c.length){c+=" "}a.className=c+b}},rmClass:function(b,c){if(b&&zDom.hasClass(b,c)){var a=new RegExp("(?:^|\\s+)"+c+"(?:\\s+|$)","g");b.className=b.className.replace(a," ").trim()}},_txtstyles:["color","background-color","background","white-space"],getTextStyle:function(a,g,b){var f="";for(var e=0,d=0;d>=0;e=d+1){d=a.indexOf(";",e);var i=d>=0?a.substring(e,d):a.substring(e);var c=i.indexOf(":");var h=c<0?i.trim():i.substring(0,c).trim();if(h.startsWith("font")||h.startsWith("text")||zDom._txtstyles.$contains(h)||(g&&h=="width")||(b&&h=="height")){f+=i+";"}}return f},getStyle:function(d,c){var a=d.style;if(["float","cssFloat"].$contains(c)){c=(typeof a.styleFloat!="undefined"?"styleFloat":"cssFloat")}c=c.$camel();var e=a[c];if(!e){if(document.defaultView&&document.defaultView.getComputedStyle){var b=document.defaultView.getComputedStyle(d,null);e=b?b[c]:null}else{if(d.currentStyle){e=d.currentStyle[c]}}}if(e=="auto"&&["width","height"].$contains(c)&&zDom.getStyle(d,"display")!="none"){e=d["offset"+c.capitalize()]+"px"}if(zk.opera&&["left","top","right","bottom"].$contains(c)&&zDom.getStyle(d,"position")=="static"){e="auto"}if(c=="opacity"){if(e){return parseFloat(e)}if(e=(zDom.getStyle(d,"filter")||"").match(/alpha\(opacity=(.*)\)/)&&e[1]){return parseFloat(e[1])/100}return 1}return e=="auto"?null:e},setStyle:function(d,c){var b=d.style;for(var a in c){var e=c[a];if(a=="opacity"){if(e==1){e=(/gecko/.test(zk.userAgent)&&!/konqueror|safari|khtml/.test(zk.userAgent))?0.999999:1;if(zk.ie){b.filter=zDom.getStyle(d,"filter").replace(/alpha\([^\)]*\)/gi,"")}}else{if(e===""){if(zk.ie){b.filter=zDom.getStyle(d,"filter").replace(/alpha\([^\)]*\)/gi,"")}}else{if(e<0.00001){e=0}if(zk.ie){b.filter=zDom.getStyle(d,"filter").replace(/alpha\([^\)]*\)/gi,"")+"alpha(opacity="+e*100+")"}}}}else{if(["float","cssFloat"].$contains(a)){a=(typeof b.styleFloat!="undefined")?"styleFloat":"cssFloat"}}b[a.$camel()]=e}},parseStyle:function(e){var g={};if(e){var f=e.split(";");for(var d=0,b=f.length;d<b;){var c=f[d++].split(":"),a=c.length>0?c[0].trim():"";if(a){g[a]=c.length>1?c[1].trim():""}}}return g},getOpacity:function(a){return zDom.getStyle(a,"opacity")},setOpacity:function(a,b){zDom.setStyle(a,{opacity:b})},rerender:function(a){a=zDom.$(a);try{var c=document.createTextNode(" ");a.appendChild(c);a.removeChild(c)}catch(b){}},cleanWhitespace:function(b){for(var c=b.firstChild;c;){var a=c.nextSibling;if(c.nodeType==3&&!/\S/.test(c.nodeValue)){b.removeChild(c)}c=a}},makePositioned:function(a){var b=zDom.getStyle(a,"position");if(b=="static"||!b){a._$positioned=true;a.style.position="relative";if(zk.opera){a.style.top=a.style.left=0}}},undoPositioned:function(b){if(b._$positioned){b._$positioned=undefined;var a=b.style;a.position=a.top=a.left=a.bottom=a.right=""}},makeClipping:function(b){if(!b._$clipping){var a=b.style;b._$clipping=true;b._$overflow=a.overflow;b._$overflowX=a.overflowX;b._$overflowY=a.overflowY;if(zDom.getStyle(b,"overflow")!="hidden"){a.overflow="hidden"}}},undoClipping:function(b){if(b._$clipping){var a=b.style;a.overflow=b._$overflow;a.overflowX=b._$overflowX;a.overflowY=b._$overflowY;b._$clipping=b._$overflow=b._$overflowX=b._$overflowY=undefined}},setOuterHTML:function(a,e){a=zDom.$(a);var i=a.parentNode,b=a.previousSibling;zDom.unfixDom(a);if(zk.ie){var k=zDom.tag(a);if(k=="TD"||k=="TH"||k=="TABLE"||k=="TR"||k=="CAPTION"||k=="TBODY"||k=="THEAD"||k=="TFOOT"||k=="COLGROUP"||k=="COL"){var h=zDom._tblNewElems(e);var f=a.nextSibling;i.removeChild(a);for(var c=0,g=h.length;c<g;++c){if(f){i.insertBefore(h[c],f)}else{i.appendChild(h[c])}}}else{a.outerHTML=e}}if(a.outerHTML){a.outerHTML=e}else{if(zk.gecko2Only&&zDom.tag(a)=="LEGEND"){a.innerHTML=zDom._removeOuter(e)}else{var d=a.ownerDocument.createRange();d.selectNodeContents(a);i.replaceChild(d.createContextualFragment(e),a)}}if(!e){a=null}else{if(b){a=b.nextSibling}else{a=i.firstChild}}zDom.fixDom(a);return a},_removeOuter:function(c){var b=c.indexOf(">")+1,a=c.lastIndexOf("<");return a>=b?c.substring(b,a):c},insertHTMLBefore:function(e,c){if(zk.ie){switch(zDom.tag(e)){case"TD":case"TH":case"TR":case"CAPTION":case"COLGROUP":case"TBODY":case"THEAD":case"TFOOT":var d=zDom._tblNewElems(c);var f=e.parentNode;for(var b=0,a=d.length;b<a;++b){f.insertBefore(d[b],e)}return}}e.insertAdjacentHTML("beforeBegin",c)},insertHTMLBeforeEnd:function(f,d){if(zk.ie){var a=zDom.tag(f);switch(a){case"TABLE":case"TR":case"TBODY":case"THEAD":case"TFOOT":case"COLGROUP":var e=zDom._tblNewElems(d);if(a=="TABLE"&&e.length&&zDom.tag(e[0])=="TR"){var g=f.tBodies;if(!g||!g.length){g=document.createElement("TBODY");f.appendChild(g);f=g}else{f=g[g.length-1]}}for(var c=0,b=e.length;c<b;++c){f.appendChild(e[c])}return}}f.insertAdjacentHTML("beforeEnd",d)},insertHTMLAfter:function(f,d){if(zk.ie){switch(zDom.tag(f)){case"TD":case"TH":case"TR":case"CAPTION":case"TBODY":case"THEAD":case"TFOOT":case"COLGROUP":case"COL":var e=zDom._tblNewElems(d);var c=f.nextSibling;var g=f.parentNode;for(var b=0,a=e.length;b<a;++b){if(c!=null){g.insertBefore(e[b],c)}else{g.appendChild(e[b])}}return}}f.insertAdjacentHTML("afterEnd",d)},insertAfter:function(b,c){var a=c.nextSibling;if(a){c.parentNode.insertBefore(b,a)}else{c.parentNode.appendChild(b)}},insertBefore:function(a,b){b.parentNode.insertBefore(a,b)},remove:function(a){a=zDom.$(a);if(a&&a.parentNode){a.parentNode.removeChild(a)}},appendScript:function(b,c){var a=document.createElement("SCRIPT");a.type="text/javascript";a.charset=c?c:"UTF-8";a.src=b;document.getElementsByTagName("HEAD")[0].appendChild(a)},nextSibling:function(b,a){while(b&&(b=b.nextSibling)!=null&&zDom.tag(b)!=a){}return b},previousSibling:function(b,a){while(b&&(b=b.previousSibling)!=null&&zDom.tag(b)!=a){}return b},firstChild:function(c,a,b){for(var e=c.firstChild;e;e=e.nextSibling){if(zDom.tag(e)==a){return e}}if(b){for(var e=c.firstChild;e;e=e.nextSibling){var d=zDom.firstChild(e,a,b);if(d){return d}}}return null},lastChild:function(c,a,b){for(var e=c.lastChild;e;e=e.previousSibling){if(zDom.tag(e)==a){return e}}if(b){for(var e=c.lastChild;e;e=e.previousSibling){var d=zDom.lastChild(e,a,b);if(d){return d}}}return null},parentNode:function(a){return a.z_vp||a.parentNode},parentByTag:function(b,a){for(;b;b=zDom.parentNode(b)){if(zDom.tag(b)==a){return b}}return null},vparent:function(a){return a.z_vp},makeVParent:function(c){if(c.z_vp){return}var b=c.nextSibling,d=c.parentNode,a=c.z_vpagtx=document.createElement("SPAN");a.style.display="none";if(b){d.insertBefore(a,b)}else{d.appendChild(a)}c.z_vp=d;document.body.appendChild(c)},undoVParent:function(b){var c=b.z_vp;if(c){var a=b.z_vpagtx;b.z_vp=b.z_vpagtx=null;if(a){c.insertBefore(b,a);zDom.remove(a)}else{c.appendChild(b)}}},makeStackup:function(b,d,a){var c=document.createElement("iframe");c.id=d||(b?b.id+"$ifrstk":"z_ifrstk");c.frameBorder="no";c.src="";c.tabIndex=-1;c.style.cssText="position:absolute;visibility:visible;overflow:hidden;filter:alpha(opacity=0);border:0;display:block";if(b){c.style.width=b.offsetWidth+"px";c.style.height=b.offsetHeight+"px";c.style.top=b.style.top;c.style.left=b.style.left;b.parentNode.insertBefore(c,a||b)}return c},confirm:function(b){zk.alerting=true;try{return confirm(b)}finally{try{zk.alerting=false}catch(a){}}},alert:function(b){zk.alerting=true;try{alert(b)}finally{try{zk.alerting=false}catch(a){}}},focus:function(c,b){c=zDom.$(c);if(!c||!c.focus){return false}var a=zDom.tag(c);if(a!="BUTTON"&&a!="INPUT"&&a!="SELECT"&&a!="IFRAME"){return false}if(b>=0){setTimeout(function(){zDom._focus(c)},b)}else{zDom._focus(c)}return true},_focus:function(b){try{b.focus()}catch(a){setTimeout(function(){try{b.focus()}catch(c){setTimeout(function(){try{b.focus()}catch(d){}},100)}},0)}},select:function(b,a){b=zDom.$(b);if(!b||typeof b.select!="function"){return false}if(a>=0){setTimeout(function(){zDom._select(b)},a)}else{zDom._select(b)}return true},_select:function(b){try{b.select()}catch(a){setTimeout(function(){try{b.select()}catch(c){}},0)}},selectionRange:function(d){try{if(document.selection!=null&&d.selectionStart==null){var b=document.selection.createRange();var a=d.createTextRange();var c="";if(d.type.toLowerCase()=="text"){c=a.duplicate()}else{c=b.duplicate();c.moveToElementText(d)}c.setEndPoint("EndToEnd",b);var g=c.text.length-b.text.length;return[g,g+b.text.length]}else{return[d.selectionStart,d.selectionEnd]}}catch(f){return[0,0]}},clearSelection:function(){try{if(window.getSelection){if(zk.safari){window.getSelection().collapse()}else{window.getSelection().removeAllRanges()}}else{if(document.selection){if(document.selection.empty){document.selection.empty()}else{if(document.selection.clear){document.selection.clear()}}}}return true}catch(a){return false}},disableSelection:function(a){a=zDom.$(a);if(a){if(zk.gecko){a.style.MozUserSelect="none"}else{if(zk.safari){a.style.KhtmlUserSelect="none"}else{if(zk.ie){a.onselectstart=function(c){var d=zEvt.target(c),b=zDom.tag(d);return b=="TEXTAREA"||b=="INPUT"&&(d.type=="text"||d.type=="password")}}}}}},enableSelection:function(a){a=zDom.$(a);if(a){if(zk.gecko){a.style.MozUserSelect=""}else{if(zk.safari){a.style.KhtmlUserSelect=""}else{if(zk.ie){a.onselectstart=null}}}}}};if(zk.ie){zk.copy(zDom,{_tagOfHtml:function(d){if(!d){return""}var c=d.indexOf("<")+1,b=c,a=c?d.length:0;for(;b<a;++b){var e=d.charAt(b);if(e==">"||zk.isWhitespace(e)){return d.substring(c,b).toUpperCase()}}throw"Unknown tag in "+d},_tblNewElems:function(c){var g,a=zDom._tagOfHtml(c);switch(a){case"TABLE":g=0;break;case"TR":g=2;c="<table>"+c+"</table>";break;case"TH":case"TD":g=3;c="<table><tr>"+c+"</tr></table>";break;case"COL":g=2;c="<table><colgroup>"+c+"</colgroup></table>";break;default:g=1;c="<table>"+c+"</table>";break}var e=document.createElement("DIV");e.innerHTML=c;while(--g>=0){e=e.firstChild}var d=[];for(var f;f=e.firstChild;){var b=zDom.tag(f);if(b==a||b!="TBODY"){d.push(f)}e.removeChild(f)}return d}})}else{if(!HTMLElement.prototype.insertAdjacentHTML){HTMLElement.prototype.insertAdjacentHTML=function(c,b){var a=this.ownerDocument.createRange(),d;switch(String(c).toLowerCase()){case"beforebegin":a.setStartBefore(this);d=a.createContextualFragment(b);this.parentNode.insertBefore(d,this);break;case"afterbegin":a.selectNodeContents(this);a.collapse(true);d=a.createContextualFragment(b);this.insertBefore(d,this.firstChild);break;case"beforeend":a.selectNodeContents(this);a.collapse(false);d=a.createContextualFragment(b);this.appendChild(d);break;case"afterend":a.setStartAfter(this);d=a.createContextualFragment(b);zDom.insertAfter(d,this);break}}}}zk.copy(zDom,zk.ie?{fixDom:function(a){if(a){zDom._fxns.push(a);setTimeout(zDom._fixDom,100)}},unfixDom:function(a){if(a&&!zDom._fxns.$remove(a)){setTimeout(function(){zDom._unfixDom(a)},1000)}},_fxns:[],_fixDom:function(){var a=zDom._fxns.shift();if(a){zDom._fixBU(a.getElementsByTagName("A"));zDom._fixBU(a.getElementsByTagName("AREA"));if(zDom._fxns.length){setTimeout(zDom._fixDom,300)}}},_unfixDom:function(a){if(a){zDom._unfixBU(a.getElementsByTagName("A"));zDom._unfixBU(a.getElementsByTagName("AREA"))}},_fixBU:function(b){for(var a=b.length;--a>=0;){var c=b[a];if(!c.z_fixed&&c.href.indexOf("javascript:")>=0){c.z_fixed=true;zEvt.listen(c,"click",zDom._doSkipBfUnload)}}},_unfixBU:function(b){for(var a=b.length;--a>=0;){var c=b[a];if(c.z_fixed){c.z_fixed=false;zEvt.unlisten(c,"click",zDom._doSkipBfUnload)}}},_doSkipBfUnload:function(){zk.skipBfUnload=true;setTimeout(zDom._unSkipBfUnload,0)},_unSkipBfUnload:function(){zk.skipBfUnload=false}}:{fixDom:zk.$void,unfixDom:zk.$void});zk.Color=zk.$extends(zk.Object,{$init:function(b){var d=this.rgb=[0,0,0];if(b.slice(0,4)=="rgb("){var f=b.slice(4,b.length-1).split(",");for(var c=0,a=f.length;c<a;c++){d[c]=parseInt(f[c])}}else{if(b.slice(0,1)=="#"){if(b.length==4){for(var c=0;c<3;c++){var g=b.charAt(c+1);d[c]=parseInt(g+g,16)}}else{if(b.length==7){for(var c=0,e=1;c<3;c++,e+=2){d[c]=parseInt(b.substring(e,e+2),16)}}}}}},toString:function(){var c="#";for(var b=0;b<3;){var a=this.rgb[b++];if(a<16){c+="0"}c+=new Number(a).toString(16)}return c}});
zEvt={target:function(a){a=a||window.event;return a.target||a.srcElement},stop:function(a){a=a||window.event;if(a.preventDefault){a.preventDefault();a.stopPropagation()}else{a.returnValue=false;a.cancelBubble=true;if(!a.shiftKey&&!a.ctrlKey){a.keyCode=0}}},leftClick:function(a){a=a||window.event;return a.which==1||a.button==0||a.button==1},rightClick:function(a){a=a||window.event;return a.which==3||a.button==2},mouseData:function(a,e){a=a||window.event;var d=zDom.cmOffset(e?e:zEvt.target(a)),c=zEvt.x(a),b=zEvt.y(a);return{x:c-d[0],y:b-d[1],pageX:c,pageY:b,keys:zEvt.keyMetaData(a),marshal:zEvt._mouseDataMarshal}},keyData:function(a){a=a||window.event;return{keyCode:zEvt.keyCode(a),charCode:zEvt.charCode(a),keys:zEvt.keyMetaData(a),marshal:zEvt._keyDataMarshal}},keyMetaData:function(a){a=a||window.event;return{altKey:a.altKey,ctrlKey:a.ctrlKey,shiftKey:a.shiftKey,leftClick:zEvt.leftClick(a),rightClick:zEvt.rightClick(a),marshal:zEvt._keyMetaDataMarshal}},_mouseDataMarshal:function(){return[this.x,this.y,this.pageX,this.pageY,this.keys.marshal()]},_keyDataMarshal:function(){return[this.keyCode,this.charCode,this.keys.marshal()]},_keyMetaDataMarshal:function(){var a="";if(this.altKey){a+="a"}if(this.ctrlKey){a+="c"}if(this.shiftKey){a+="s"}if(this.leftClick){a+="l"}if(this.rightClick){a+="r"}return a},x:function(a){a=a||window.event;return a.pageX||(a.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft))},y:function(a){a=a||window.event;return a.pageY||(a.clientY+(document.documentElement.scrollTop||document.body.scrollTop))},pointer:function(a){return[zEvt.x(a),zEvt.y(a)]},charCode:function(a){a=a||window.event;return a.charCode||a.keyCode},keyCode:function(a){a=a||window.event;var b=a.keyCode||a.charCode;return zk.safari?(this.safariKeys[b]||b):b},listen:function(b,c,a){if(b.addEventListener){b.addEventListener(c,a,false)}else{b.attachEvent("on"+c,a)}},unlisten:function(b,d,a){if(b.removeEventListener){b.removeEventListener(d,a,false)}else{if(b.detachEvent){try{b.detachEvent("on"+d,a)}catch(c){}}}},enableESC:function(){if(zDom._noESC){zEvt.unlisten(document,"keydown",zDom._noESC);delete zDom._noESC}if(zDom._onErrChange){window.onerror=zDom._oldOnErr;if(zDom._oldOnErr){delete zDom._oldOnErr}delete zDom._onErrChange}},disableESC:function(){if(!zDom._noESC){zDom._noESC=function(a){a=a||window.event;if(a.keyCode==27){zEvt.stop(a);return false}return true};zEvt.listen(document,"keydown",zDom._noESC);zDom._oldOnErr=window.onerror;zDom._onErrChange=true;window.onerror=function(d,b,c){var e=zAu.comURI();if(e&&b.indexOf(location.host)>=0){var a=e.lastIndexOf(";");a=a>=0?e.substring(0,a):e;if(b.indexOf(a+"/web/")>=0){d=mesg.FAILED_TO_LOAD+b+"\n"+mesg.FAILED_TO_LOAD_DETAIL+"\n"+mesg.CAUSE+d+" (line "+c+")";if(zk.error){zk.error(d)}else{alert(d)}return true}}}}}};zk.Event=zk.$extends(zk.Object,{$init:function(e,b,d,c,a){this.currentTarget=this.target=e;this.name=b;this.data=d;this.opts=c;var f=this.nativeEvent=a||window.event;if(f){this.nativeTarget=zEvt.target(f)}},stop:function(a){this.stopped=!a}},{BS:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,PGUP:33,PGDN:34,END:35,HOME:36,LFT:37,UP:38,RGH:39,DN:40,INS:45,DEL:46,F1:112});zWatch={listen:function(d,e){var c=zWatch._wts[d];if(c){var a=e.bindLevel;if(a!=null){for(var b=c.length;;){if(--b<0){c.unshift(e);break}if(a>=c[b].bindLevel){c.$addAt(b+1,e);break}}}else{c.push(e)}}else{c=zWatch._wts[d]=[e]}},unlisten:function(b,c){var a=zWatch._wts[b];return a&&a.$remove(c)},unlistenAll:function(a){delete zWatch._wts[a]},fire:function(f,g,e){var d=zWatch._wts[f];if(d&&d.length){var c=[];for(var b=2,a=arguments.length;b<a;){c.push(arguments[b++])}d=d.$clone();if(g){if(g.visible){for(var b=d.length;--b>=0;){if(!zWatch._visible(d[b])){d.splice(b,1)}}}if(g.timeout>=0){setTimeout(function(){var i;while(i=d.shift()){i[f].apply(i,c)}},g.timeout);return}}var h;while(h=d.shift()){h[f].apply(h,c)}}},fireDown:function(b,a,n,p){var g=zWatch._wts[b];if(g&&g.length){zWatch._sync();var h=[n];for(var f=3,e=arguments.length;f<e;){h.push(arguments[f++])}var q,k=n.bindLevel,d=a&&a.visible;if(k!=null){q=[];for(var f=g.length,c;--f>=0;){c=g[f];var m=k>c.bindLevel;if(m>0){break}if(!m&&n==c){q.unshift(c);break}var i=d?zWatch._visibleChild:zUtl.isAncestor;if(i(n,c)){q.unshift(c)}}}else{q=g.$clone()}if(a&&a.timeout>=0){setTimeout(function(){var j;while(j=q.shift()){j[b].apply(j,h)}},a.timeout);return}var c;while(c=q.shift()){c[b].apply(c,h)}}},_visibleChild:function(a,b){for(;b;b=b.parent){if(a==b){return true}if(b.isVisible&&!b.isVisible(true)){break}}return false},_visible:function(a){for(;a;a=a.parent){if(a.isVisible&&!a.isVisible(true)){return false}}return true},onBindLevelMove:function(){zWatch._dirty=true},_sync:function(){if(!zWatch._dirty){return}zWatch._dirty=false;for(var a in zWatch._wts){var b=zWatch._wts[a];if(b.length&&b[0].bindLevel!=null){b.sort(zWatch._cmp)}}},_cmp:function(d,c){return d.bindLevel-c.bindLevel},_wts:{}};zWatch.listen("onBindLevelMove",zWatch);
zk.Draggable=zk.$extends(zk.Object,{$init:function(d,c,b){var a=zk.Draggable;if(!a._stackup){var e=a._stackup=zDom.makeStackup(null,"z_ddstkup");zDom.hide(e);document.body.appendChild(e)}this.control=d;this.node=c=c?zDom.$(c):d.node||d.getNode();b=zk.$default(b,{zIndex:1000,scrollSensitivity:20,scrollSpeed:15,delay:0});if(b.reverteffect==null){b.reverteffect=a._defRevertEffect}if(b.endeffect==null){b.endeffect=a._defEndEffect;if(b.starteffect==null){b.starteffect=a._defStartEffect}}if(b.handle){this.handle=zDom.$(b.handle)}if(!this.handle){this.handle=c}if(b.scroll&&!b.scroll.scrollTo&&!b.scroll.outerHTML){b.scroll=zDom.$(b.scroll);this._isScrollChild=zUtl.isAncestor(b.scroll,c)}this.delta=this._currentDelta();this.opts=b;this.dragging=false;zEvt.listen(this.handle,"mousedown",this.proxy(this._mouseDown,"_pxMouseDown"));a._register(this)},destroy:function(){zEvt.unlisten(this.handle,"mousedown",this._pxMouseDown);zk.Draggable._unregister(this);this.node=this.control=this.handle=null},_currentDelta:function(){return[zk.parseInt(zDom.getStyle(this.node,"left")),zk.parseInt(zDom.getStyle(this.node,"top"))]},_startDrag:function(a){zDom.disableSelection(document.body);if(this.opts.overlay){this._overlay=document.createElement("DIV");document.body.appendChild(this._overlay);this._overlay=zDom.setOuterHTML(this._overlay,'<div class="z-dd-overlay" id="zk_dd_overlay"></div>');zDom.disableSelection(this._overlay);var c=this._overlay.style;c.width=zDom.pageWidth()+"px";c.height=zDom.pageHeight()+"px"}zk.dragging=this.dragging=true;var e=this.node,d=zk.Draggable;if(this.opts.ghosting){if(typeof this.opts.ghosting=="function"){this.delta=this._currentDelta();this.z_elorg=this.node;var g=zDom.cmOffset(this.node);this.z_scrl=zDom.scrollOffset(this.node);this.z_scrl[0]-=zDom.innerX();this.z_scrl[1]-=zDom.innerY();g[0]-=this.z_scrl[0];g[1]-=this.z_scrl[1];e=this.node=this.opts.ghosting(this,g,a)}else{this._clone=e.cloneNode(true);this.z_orgpos=e.style.position;if(this.z_orgpos!="absolute"){zDom.absolutize(e)}e.parentNode.insertBefore(this._clone,e)}}if(this.opts.stackup){var f=d._stackup;if(zDom.isVisible(f)){this._stackup=zDom.makeStackup(e,e.id+"$ddstk")}else{this._stackup=f;this._syncStackup();e.parentNode.insertBefore(this._stackup,e)}}if(this.opts.zIndex){this.originalZ=zk.parseInt(zDom.getStyle(e,"z-index"));e.style.zIndex=this.opts.zIndex}if(this.opts.scroll){if(this.opts.scroll==window){var b=this._getWindowScroll(this.opts.scroll);this.originalScrollLeft=b.left;this.originalScrollTop=b.top}else{this.originalScrollLeft=this.opts.scroll.scrollLeft;this.originalScrollTop=this.opts.scroll.scrollTop}}if(this.opts.starteffect){this.opts.starteffect(this)}},_syncStackup:function(){if(this._stackup){var b=this.node,a=this._stackup.style;a.display="block";a.left=b.offsetLeft+"px";a.top=b.offsetTop+"px";a.width=b.offsetWidth+"px";a.height=b.offsetHeight+"px"}},_updateDrag:function(pointer,evt){if(!this.dragging){this._startDrag(evt)}this._updateInnerOfs();this._draw(pointer,evt);if(this.opts.change){this.opts.change(this,pointer)}this._syncStackup();if(this.opts.scroll){this._stopScrolling();var p;if(this.opts.scroll==window){with(this._getWindowScroll(this.opts.scroll)){p=[left,top,left+width,top+height]}}else{p=zDom.viewportOffset(this.opts.scroll);p[0]+=this.opts.scroll.scrollLeft+this._innerOfs[0];p[1]+=this.opts.scroll.scrollTop+this._innerOfs[1];p.push(p[0]+this.opts.scroll.offsetWidth);p.push(p[1]+this.opts.scroll.offsetHeight)}var speed=[0,0];if(pointer[0]<(p[0]+this.opts.scrollSensitivity)){speed[0]=pointer[0]-(p[0]+this.opts.scrollSensitivity)}if(pointer[1]<(p[1]+this.opts.scrollSensitivity)){speed[1]=pointer[1]-(p[1]+this.opts.scrollSensitivity)}if(pointer[0]>(p[2]-this.opts.scrollSensitivity)){speed[0]=pointer[0]-(p[2]-this.opts.scrollSensitivity)}if(pointer[1]>(p[3]-this.opts.scrollSensitivity)){speed[1]=pointer[1]-(p[3]-this.opts.scrollSensitivity)}this._startScrolling(speed)}if(navigator.appVersion.indexOf("AppleWebKit")>0){window.scrollBy(0,0)}zEvt.stop(evt)},_finishDrag:function(b,h){this.dragging=false;if(this._overlay){zDom.remove(this._overlay);delete this._overlay}zDom.enableSelection(document.body);setTimeout(zDom.clearSelection,0);var c=this._stackup;if(c){if(c==zk.Draggable._stackup){zDom.hide(c)}else{zDom.remove(c)}delete this._stackup}var e=this.node;if(this.opts.ghosting){if(typeof this.opts.ghosting=="function"){if(this.opts.endghosting){this.opts.endghosting(this,this.z_elorg)}if(this.node!=this.z_elorg){zDom.remove(this.node);this.node=this.z_elorg}delete this.z_elorg}else{if(this.z_orgpos!="absolute"){zDom.relativize(e);e.style.position=this.z_orgpos}zDom.remove(this._clone);this._clone=null}}var g=zEvt.pointer(b);var a=this.opts.revert;if(a&&typeof a=="function"){a=a(this,g,b)}var f=this._currentDelta();if(a&&this.opts.reverteffect){this.opts.reverteffect(this,f[1]-this.delta[1],f[0]-this.delta[0])}else{this.delta=f}if(this.opts.zIndex){e.style.zIndex=this.originalZ}if(this.opts.endeffect){this.opts.endeffect(this,b)}zk.Draggable._deactivate(this);setTimeout("zk.dragging=false",0)},_mouseDown:function(k){var d=this.node,e=zk.Draggable;if(e._dragging[d]||!zEvt.leftClick(k)){return}var h=zEvt.target(k);tag=zDom.tag(h);if(tag=="INPUT"||tag=="SELECT"||tag=="OPTION"||tag=="BUTTON"||tag=="TEXTAREA"){return}for(var b=h;b&&b!=d;b=b.parentNode){if(zDom.getStyle(b,"position")=="absolute"){return}}var a=zEvt.pointer(k);if(this.opts.ignoredrag&&this.opts.ignoredrag(this,a,k)){return}var j=zDom.cmOffset(d);this.offset=[a[0]-j[0],a[1]-j[1]];e._activate(this);if(zk.currentFocus){var g=zk.currentFocus.getNode();if(g&&h!=g&&typeof g.blur=="function"){g.blur()}}zEvt.stop(k);var i=this.control;if(i&&!i.$instanceof(zk.Widget)){i=null}zk.Widget.domMouseDown(i)},_keyPress:function(a){if(zEvt.keyCode(a)==zEvt.ESC){this._finishDrag(a,false);zEvt.stop(a)}},_endDrag:function(a){if(this.dragging){this._stopScrolling();this._finishDrag(a,true);zEvt.stop(a)}},_draw:function(h,j){var e=this.node,g=zDom.cmOffset(e);if(this.opts.ghosting){var a=zDom.scrollOffset(e);g[0]+=a[0]-this._innerOfs[0];g[1]+=a[1]-this._innerOfs[1]}var f=this._currentDelta();g[0]-=f[0];g[1]-=f[1];if(this.opts.scroll&&(this.opts.scroll!=window&&this._isScrollChild)){g[0]-=this.opts.scroll.scrollLeft-this.originalScrollLeft;g[1]-=this.opts.scroll.scrollTop-this.originalScrollTop}var c=[h[0]-g[0]-this.offset[0],h[1]-g[1]-this.offset[1]];if(this.opts.snap){if(typeof this.opts.snap=="function"){c=this.opts.snap(this,c)}else{if(this.opts.snap instanceof Array){c=[Math.round(c[0]/this.opts.snap[0])*this.opts.snap[0],Math.round(c[1]/this.opts.snap[1])*this.opts.snap[1]]}else{c=[Math.round(c[0]/this.opts.snap)*this.opts.snap,Math.round(c[1]/this.opts.snap)*this.opts.snap]}}}if(this.z_scrl){c[0]-=this.z_scrl[0];c[1]-=this.z_scrl[1]}var b=e.style;if(typeof this.opts.draw=="function"){this.opts.draw(this,c,j)}else{if(typeof this.opts.constraint=="function"){var i=this.opts.constraint(this,c,j);if(i){c=i}b.left=c[0]+"px";b.top=c[1]+"px"}else{if((!this.opts.constraint)||(this.opts.constraint=="horizontal")){b.left=c[0]+"px"}if((!this.opts.constraint)||(this.opts.constraint=="vertical")){b.top=c[1]+"px"}}}if(b.visibility=="hidden"){b.visibility=""}},_stopScrolling:function(){if(this.scrollInterval){clearInterval(this.scrollInterval);this.scrollInterval=null;zk.Draggable._lastScrollPointer=null}},_startScrolling:function(a){if(a[0]||a[1]){this.scrollSpeed=[a[0]*this.opts.scrollSpeed,a[1]*this.opts.scrollSpeed];this.lastScrolled=new Date();this.scrollInterval=setInterval(this.proxy(this._scroll),10)}},_scroll:function(){var zdg=zk.Draggable,current=new Date(),delta=current-this.lastScrolled;this.lastScrolled=current;if(this.opts.scroll==window){with(this._getWindowScroll(this.opts.scroll)){if(this.scrollSpeed[0]||this.scrollSpeed[1]){var d=delta/1000;this.opts.scroll.scrollTo(left+d*this.scrollSpeed[0],top+d*this.scrollSpeed[1])}}}else{this.opts.scroll.scrollLeft+=this.scrollSpeed[0]*delta/1000;this.opts.scroll.scrollTop+=this.scrollSpeed[1]*delta/1000}this._updateInnerOfs();if(this._isScrollChild){zdg._lastScrollPointer=zdg._lastScrollPointer||zdg._lastPointer;zdg._lastScrollPointer[0]+=this.scrollSpeed[0]*delta/1000;zdg._lastScrollPointer[1]+=this.scrollSpeed[1]*delta/1000;if(zdg._lastScrollPointer[0]<0){zdg._lastScrollPointer[0]=0}if(zdg._lastScrollPointer[1]<0){zdg._lastScrollPointer[1]=0}this._draw(zdg._lastScrollPointer)}if(this.opts.change){var evt=window.event;this.opts.change(this,evt?zEvt.pointer(evt):zdg._lastPointer)}},_updateInnerOfs:function(){this._innerOfs=[zDom.innerX(),zDom.innerY()]},_getWindowScroll:function(w){var T,L,W,H;with(w.document){if(w.document.documentElement&&documentElement.scrollTop){T=documentElement.scrollTop;L=documentElement.scrollLeft}else{if(w.document.body){T=body.scrollTop;L=body.scrollLeft}}if(w.innerWidth){W=w.innerWidth;H=w.innerHeight}else{if(w.document.documentElement&&documentElement.clientWidth){W=documentElement.clientWidth;H=documentElement.clientHeight}else{W=body.offsetWidth;H=body.offsetHeight}}}return{top:T,left:L,width:W,height:H}}},{_drags:[],_dragging:[],_register:function(a){var b=zk.Draggable;if(b._drags.length==0){zEvt.listen(document,"mouseup",b._docmouseup);zEvt.listen(document,"mousemove",b._docmousemove);zEvt.listen(document,"keypress",b._dockeypress)}b._drags.push(a)},_unregister:function(a){var b=zk.Draggable;b._drags.$remove(a);if(b._drags.length==0){zEvt.unlisten(document,"mouseup",b._docmouseup);zEvt.unlisten(document,"mousemove",b._docmousemove);zEvt.unlisten(document,"keypress",b._dockeypress)}},_activate:function(a){var b=zk.Draggable;if(zk.opera||a.opts.delay){b._timeout=setTimeout(function(){zk.Draggable._timeout=null;window.focus();zk.Draggable.activeDraggable=a},a.opts.delay)}else{window.focus();b.activeDraggable=a}},_deactivate:function(){zk.Draggable.activeDraggable=null},_docmousemove:function(a){var b=zk.Draggable;if(!b.activeDraggable){return}if(!a){a=window.event}var c=zEvt.pointer(a);if(b._lastPointer&&b._lastPointer[0]==c[0]&&b._lastPointer[1]==c[1]){return}b._lastPointer=c;b.activeDraggable._updateDrag(c,a)},_docmouseup:function(a){if(!a){a=window.event}var b=zk.Draggable;if(b._timeout){clearTimeout(b._timeout);b._timeout=null}if(!b.activeDraggable){return}b._lastPointer=null;b.activeDraggable._endDrag(a);b.activeDraggable=null},_dockeypress:function(a){if(!a){a=window.event}var b=zk.Draggable;if(b.activeDraggable){b.activeDraggable._keyPress(a)}},_restorePos:zk.ie?function(a,d){if(d!="absolute"&&d!="relative"){var b=a.parentNode;var c=a.nextSibling;zDom.remove(a);a.style.position=d;if(c){b.insertBefore(a,c)}else{b.appendChild(a)}}else{a.style.position=d}}:function(a,b){a.style.position=b},_defStartEffect:function(a){var b=a.node;b._$opacity=zDom.getOpacity(b);zk.Draggable._dragging[b]=true;new zk.eff.Opacity(b,{duration:0.2,from:b._$opacity,to:0.7})},_defEndEffect:function(b){var c=b.node,a=typeof c._$opacity=="number"?c._$opacity:1;new zk.eff.Opacity(c,{duration:0.2,from:0.7,to:a,queue:{scope:"_draggable",position:"end"},afterFinish:function(){zk.Draggable._dragging[c]=false}})},_defRevertEffect:function(a,d,c){var f=a.node,b=f.style.position,e=Math.sqrt(Math.abs(d^2)+Math.abs(c^2))*0.02;new zk.eff.Move(f,{x:-c,y:-d,duration:e,queue:{scope:"_draggable",position:"end"}});setTimeout(function(){zk.Draggable._restorePos(f,b)},e*1000+10)}});
zEffect={fade:function(b,c){b=zDom.$(b);var a=b.style.opacity||"";c=zk.$default(c,{to:0});if(!c.from){c.from=zDom.getOpacity(b)||1}if(!c.afterFinishInternal){c.afterFinishInternal=function(d){if(d.opts.to==0){var f=d.node;zDom.hide(f);zDom.setStyle(f,{opacity:a})}}}return new zk.eff.Opacity(b,c)},appear:function(a,b){a=zDom.$(a);b=zk.$default(b,{to:1});if(!b.from){b.from=zDom.getStyle(a,"display")=="none"?0:zDom.getOpacity(a)||0}if(!b.afterFinishInternal){b.afterFinishInternal=function(c){zDom.rerender(c.node)}}if(!b.beforeSetup){b.beforeSetup=function(c){var d=c.node;zDom.setOpacity(d,c.opts.from);zDom.show(d)}}return new zk.eff.Opacity(a,b)},puff:function(b,c){b=zDom.$(b);var a={opacity:b.style.opacity||"",position:zDom.getStyle(b,"position"),top:b.style.top,left:b.style.left,width:b.style.width,height:b.style.height};c=zk.$default(c,{duration:1});if(!c.beforeSetupInternal){c.beforeSetupInternal=function(d){zDom.absolutize(d._effects[0].node)}}if(!c.afterFinishInternal){c.afterFinishInternal=function(d){var f=d._effects[0].node;zDom.hide(f);zDom.setStyle(f,a)}}return new zk.eff.Parallel([new zk.eff.Scale(b,200,{sync:true,scaleFromCenter:true,scaleContent:true,restoreAfterFinish:true}),new zk.eff.Opacity(b,{sync:true,to:0})],c)},blindUp:function(a,b){a=zDom.$(a);zDom.makeClipping(a);b=zk.$default(b,{scaleContent:false,scaleX:false,restoreAfterFinish:true});if(!b.afterFinishInternal){b.afterFinishInternal=function(c){var d=c.node;zDom.hide(d);zDom.undoClipping(d)}}return new zk.eff.Scale(a,0,b)},blindDown:function(b,c){b=zDom.$(b);var a=zDom.getDimension(b);c=zk.$default(c,{scaleContent:false,scaleX:false,scaleFrom:0,scaleMode:{originalHeight:a.height,originalWidth:a.width},restoreAfterFinish:true});if(!c.afterSetup){c.afterSetup=function(d){var f=d.node;zDom.makeClipping(f);zDom.setStyle(f,{height:"0px"});zDom.show(f)}}if(!c.afterFinishInternal){afterFinishInternal=function(d){zDom.undoClipping(d.node)}}return new zk.eff.Scale(b,100,c)},switchOff:function(b,c){b=zDom.$(b);var a=b.style.opacity||"";c=zk.$default(c,{duration:0.4,from:0,transition:zEffect._Tranx.flicker});if(!c.afterFinishInternal){c.afterFinishInternal=function(d){new zk.eff.Scale(d.node,1,{duration:0.3,scaleFromCenter:true,scaleX:false,scaleContent:false,restoreAfterFinish:true,beforeSetup:function(f){var g=f.node;zDom.makePositioned(g);zDom.makeClipping(g)},afterFinishInternal:function(f){var g=f.node;zDom.hide(g);zDom.undoClipping(g);zDom.undoPositioned(g);zDom.setStyle(g,{opacity:a})}})}}return appear(b,c)},dropOut:function(b,c){b=zDom.$(b);var a={top:zDom.getStyle(b,"top"),left:zDom.getStyle(b,"left"),opacity:b.style.opacity||""};c=zk.$default(c,{duration:0.5});if(!c.beforeSetup){c.beforeSetup=function(d){zDom.makePositioned(d._effects[0].node)}}if(!c.afterFinishInternal){c.afterFinishInternal=function(d){var f=d._effects[0].node;zDom.hide(f);zDom.undoPositioned(f);zDom.setStyle(f,a)}}return new zk.eff.Parallel([new zk.eff.Move(b,{x:0,y:100,sync:true}),new zk.eff.Opacity(b,{sync:true,to:0})],c)},slideOut:function(f,g){var d=g?g.anchor||"t":"t";f=zDom.$(f);var b,c=f.style;switch(d){case"t":b={x:0,y:-zk.parseInt(c.height),sync:true};break;case"b":b={x:0,y:zk.parseInt(c.height),sync:true};break;case"l":b={x:-zk.parseInt(c.width),y:0,sync:true};break;case"r":b={x:zk.parseInt(c.width),y:0,sync:true};break}var a={top:zDom.getStyle(f,"top"),left:zDom.getStyle(f,"left"),opacity:f.style.opacity||""};g=zk.$default(g,{duration:0.5});if(!g.beforeSetup){g.beforeSetup=function(h){zDom.makePositioned(h._effects[0].node)}}if(!g.beforeFinishInternal){g.beforeFinishInternal=function(h){zDom.hide(h._effects[0].node)}}if(!g.afterFinishInternal){g.afterFinishInternal=function(h){var i=h._effects[0].node;zDom.undoPositioned(i);zDom.setStyle(i,a)}}return new zk.eff.Parallel([new zk.eff.Move(f,b)],g)},slideIn:function(f,a){var g=a?a.anchor||"t":"t";f=zDom.$(f);var d={top:zDom.getStyle(f,"top"),left:zDom.getStyle(f,"left"),opacity:f.style.opacity||""};var b,m=f.style;switch(g){case"t":var k=zk.parseInt(m.top),i=zk.parseInt(m.height);m.top=k-i+"px";b={x:0,y:i,sync:true};break;case"b":var k=zk.parseInt(m.top),i=zk.parseInt(m.height);m.top=k+i+"px";b={x:0,y:-i,sync:true};break;case"l":var c=zk.parseInt(m.left),j=zk.parseInt(m.width);m.left=c-j+"px";b={x:j,y:0,sync:true};break;case"r":var c=zk.parseInt(m.left),j=zk.parseInt(m.width);m.left=c+j+"px";b={x:-j,y:0,sync:true};break}a=zk.$default(a,{duration:0.5});if(!a.beforeSetup){a.beforeSetup=function(h){var l=h._effects[0].node;zDom.show(l);zDom.makePositioned(l)}}if(!a.afterFinishInternal){a.afterFinishInternal=function(h){var l=h._effects[0].node;zDom.undoPositioned(l);zDom.setStyle(l,d)}}return new zk.eff.Parallel([new zk.eff.Move(f,b)],a)},slideDown:function(c,d){var b=d?d.anchor||"t":"t";c=zDom.$(c);zDom.cleanWhitespace(c);var g={t:zDom.getStyle(c,"top"),l:zDom.getStyle(c,"left")},a=b=="t"||b=="b",f=zDom.getDimension(c);d=zk.$default(d,{scaleContent:false,scaleX:!a,scaleY:a,scaleFrom:zk.opera?0:1,scaleMode:{originalHeight:f.height,originalWidth:f.width},restoreAfterFinish:true});if(!d.afterSetup){d.afterSetup=function(h){var i=h.node;zDom.makePositioned(i);switch(b){case"t":zDom.makeClipping(i);zDom.setStyle(i,{height:"0px"});zDom.show(i);break;case"b":g.ot=f.top+f.height;zDom.makeClipping(i);zDom.setStyle(i,{height:"0px",top:g.ot+"px"});zDom.show(i);break;case"l":zDom.makeClipping(i);zDom.setStyle(i,{width:"0px"});zDom.show(i);break;case"r":g.ol=f.left+f.width;zDom.makeClipping(i);zDom.setStyle(i,{width:"0px",left:g.ol+"px"});zDom.show(i);break}}}if(!d.afterUpdateInternal){d.afterUpdateInternal=function(h){var i=h.node;if(b=="b"){zDom.setStyle(i,{top:(g.ot-zk.parseInt(h.node.style.height))+"px"})}else{if(b=="r"){zDom.setStyle(i,{left:(g.ol-zk.parseInt(h.node.style.width))+"px"})}}}}if(!d.afterFinishInternal){d.afterFinishInternal=function(h){var i=h.node;zDom.undoClipping(i);zDom.undoPositioned(i);zDom.setStyle(i,{top:g.t,left:g.l})}}return new zk.eff.Scale(c,100,d)},slideUp:function(c,d){var b=d?d.anchor||"t":"t";c=zDom.$(c);zDom.cleanWhitespace(c);var f={t:zDom.getStyle(c,"top"),l:zDom.getStyle(c,"left")},a=b=="t"||b=="b";d=zk.$default(d,{scaleContent:false,scaleX:!a,scaleY:a,scaleMode:"box",scaleFrom:100,restoreAfterFinish:true});if(!d.beforeStartInternal){d.beforeStartInternal=function(g){var h=g.node;zDom.makePositioned(h);zDom.makeClipping(h);zDom.show(h);f.ot=h.offsetTop;f.oh=h.offsetHeight;f.ol=h.offsetLeft;f.ow=h.offsetWidth}}if(!d.afterUpdateInternal){d.afterUpdateInternal=function(g){var h=g.node;if(b=="b"){zDom.setStyle(h,{top:(f.ot+f.oh-zk.parseInt(g.node.style.height))+"px"})}else{if(b=="r"){zDom.setStyle(h,{left:(f.ol+f.ow-zk.parseInt(g.node.style.width))+"px"})}}}}if(!d.beforeFinishInternal){d.beforeFinishInternal=function(g){zDom.hide(g.node)}}if(!d.afterFinishInternal){d.afterFinishInternal=function(g){var h=g.node;zDom.undoClipping(h);zDom.undoPositioned(h);zDom.setStyle(h,{top:f.t,left:f.l})}}return new zk.eff.Scale(c,zk.opera?0:1,d)}};zk.eff={};zk.eff.Base_=zk.$extends(zk.Object,{position:null,start:function(a){this.opts=zk.$default(a,zEffect._defOpts);this.name=this.opts.name||"Base";this.currentFrame=0;this.state="idle";this.startOn=this.opts.delay*1000;this.finishOn=this.startOn+(this.opts.duration*1000);this.event("beforeStart");if(!this.opts.sync){zEffect._Queue.add(this)}},loop:function(c){if(c>=this.startOn){if(c>=this.finishOn){this.render(1);this.cancel();this.event("beforeFinish");if(this.finish){this.finish()}this.event("afterFinish");return}var b=(c-this.startOn)/(this.finishOn-this.startOn);var a=Math.round(b*this.opts.fps*this.opts.duration);if(a>this.currentFrame){this.render(b);this.currentFrame=a}}},render:function(a){if(this.state=="idle"){this.state="running";this.event("beforeSetup");if(this.setup){this.setup()}this.event("afterSetup")}if(this.state=="running"){if(this.opts.transition){a=this.opts.transition(a)}a*=(this.opts.to-this.opts.from);a+=this.opts.from;this.position=a;this.event("beforeUpdate");if(this.update){this.update(a)}this.event("afterUpdate")}},cancel:function(){if(!this.opts.sync){zEffect._Queue.remove(this)}this.state="finished"},event:function(a){if(this.opts[a+"Internal"]){this.opts[a+"Internal"](this)}if(this.opts[a]){this.opts[a](this)}}});zk.eff.Parallel=zk.$extends(zk.eff.Base_,{$init:function(b,a){this._effects=b||[];this.start(a)},update:function(b){for(var c=0,d=this._effects,a=d.length;c<a;){d[c++].render(b)}},finish:function(c){for(var d=0,f=this._effects,b=f.length;d<b;){var a=f[d++];a.render(1);a.cancel();a.event("beforeFinish");if(a.finish){a.finish(c)}a.event("afterFinish")}}});zk.eff.Opacity=zk.$extends(zk.eff.Base_,{$init:function(a,b){var c=this.node=zDom.$(a);if(zk.ie&&(!c.currentStyle.hasLayout)){zDom.setStyle(c,{zoom:1})}b=zk.$default(b,{to:1});if(!b.from){b.from=zDom.getOpacity(c)||0,this.start(b)}},update:function(a){zDom.setOpacity(this.node,a)}});zk.eff.Move=zk.$extends(zk.eff.Base_,{$init:function(a,b){this.node=zDom.$(a);b=zk.$default(b,{x:0,y:0,mode:"relative"});this.start(b)},setup:function(){var a=this.node;zDom.makePositioned(a);this.originalLeft=parseFloat(zDom.getStyle(a,"left")||"0");this.originalTop=parseFloat(zDom.getStyle(a,"top")||"0");if(this.opts.mode=="absolute"){this.opts.x-=this.originalLeft;this.opts.y-=this.originalTop}},update:function(a){zDom.setStyle(this.node,{left:Math.round(this.opts.x*a+this.originalLeft)+"px",top:Math.round(this.opts.y*a+this.originalTop)+"px"})}});zk.eff.Scale=zk.$extends(zk.eff.Base_,{$init:function(a,c,b){this.node=zDom.$(a);b=zk.$default(b,{scaleX:true,scaleY:true,scaleContent:true,scaleFromCenter:false,scaleMode:"box",scaleFrom:100,scaleTo:c});this.start(b)},setup:function(){var g=this.node;this.restoreAfterFinish=this.opts.restoreAfterFinish||false;this.nodePositioning=zDom.getStyle(g,"position");this.originalStyle={};for(var b=0,h=["top","left","width","height","fontSize"],a=h.length;b<a;){var f=h[b++];this.originalStyle[f]=g.style[f]}this.originalTop=g.offsetTop;this.originalLeft=g.offsetLeft;var i=zDom.getStyle(g,"font-size")||"100%";for(var b=0,d=["em","px","%","pt"],a=d.length;b<a;){var c=d[b++];if(i.indexOf(c)>0){this.fontSize=parseFloat(i);this.fontSizeType=c}}this.factor=(this.opts.scaleTo-this.opts.scaleFrom)/100;this.dims=null;if(this.opts.scaleMode=="box"){this.dims=[g.offsetHeight,g.offsetWidth]}if(/^content/.test(this.opts.scaleMode)){this.dims=[g.scrollHeight,g.scrollWidth]}if(!this.dims){this.dims=[this.opts.scaleMode.originalHeight,this.opts.scaleMode.originalWidth]}},update:function(a){var b=(this.opts.scaleFrom/100)+(this.factor*a);if(this.opts.scaleContent&&this.fontSize){zDom.setStyle(this.node,{fontSize:this.fontSize*b+this.fontSizeType})}this.setDimensions(this.dims[0]*b,this.dims[1]*b)},finish:function(a){if(this.restoreAfterFinish){zDom.setStyle(this.node,this.originalStyle)}},setDimensions:function(a,f){var g={};if(this.opts.scaleX){g.width=Math.round(f)+"px"}if(this.opts.scaleY){g.height=Math.round(a)+"px"}if(this.opts.scaleFromCenter){var c=(a-this.dims[0])/2;var b=(f-this.dims[1])/2;if(this.nodePositioning=="absolute"){if(this.opts.scaleY){g.top=this.originalTop-c+"px"}if(this.opts.scaleX){g.left=this.originalLeft-b+"px"}}else{if(this.opts.scaleY){g.top=-c+"px"}if(this.opts.scaleX){g.left=-b+"px"}}}zDom.setStyle(this.node,g)}});zk.eff.ScrollTo=zk.$extends(zk.eff.Base_,{$init:function(a,b){this.node=zDom.$(a);this.start(b||{})},setup:function(){var b=zDom.innerY(),c=zDom.cmOffset(this.node);if(this.opts.offset){c[1]+=this.opts.offset}var a=window.innerHeight?window.height-window.innerHeight:document.body.scrollHeight-(document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.clientHeight);this.scrollStart=b;this.delta=(c[1]>a?a:c[1])-this.scrollStart},update:function(a){window.scrollTo(zDom.innerX(),this.scrollStart+(a*this.delta))}});zEffect._Tranx={sinoidal:function(a){return(-Math.cos(a*Math.PI)/2)+0.5},flicker:function(a){return((-Math.cos(a*Math.PI)/4)+0.75)+Math.random()/4},pulse:function(b,a){a=a||5;return Math.round((b%(1/a))*a)==0?((b*a*2)-Math.floor(b*a*2)):1-((b*a*2)-Math.floor(b*a*2))},none:function(a){return 0},full:function(a){return 1}};zEffect._Queue={_effects:[],_interval:null,add:function(k){var g=zUtl.now(),d=typeof k.opts.queue=="string"?k.opts.queue:k.opts.queue.position,i=zEffect._Queue,a=i._effects;switch(d){case"front":for(var b=0,f=a.length;b<f;){var c=a[b++];if(c.state=="idle"){e.startOn+=k.finishOn;e.finishOn+=k.finishOn}}break;case"with-last":for(var b=0,f=a.length;b<f;){var h=a[b++].startOn;if(h>g){g=h}}break;case"end":for(var b=0,f=a.length;b<f;){var h=a[b++].finishOn;if(h>g){g=h}}break}k.startOn+=g;k.finishOn+=g;if(!k.opts.queue.limit||(a.length<k.opts.queue.limit)){a.push(k)}if(!i._interval){i._interval=setInterval(i.loop,15)}},remove:function(b){var c=zEffect._Queue,a=c._effects;a.$remove(b);if(!a.length){clearInterval(c._interval);c._interval=null}},loop:function(){var d=zUtl.now(),c=zEffect._Queue._effects;for(var b=0,a=c.length;b<a;b++){if(c[b]){c[b].loop(d)}}}};zEffect._defOpts={transition:zEffect._Tranx.sinoidal,duration:1,fps:60,sync:false,from:0,to:1,delay:0,queue:"parallel"};zk.eff.Shadow=zk.$extends(zk.Object,{$init:function(f,g){g=this.opts=zk.copy(this.opts,zk.$default(g,{diameter:4,mode:"shade"}));var b=f.id+"$sdw",c=zk.ie?'<div id="'+b+'" class="z-ie-shadow"></div>':'<div id="'+b+'" class="z-shadow"><div class="z-shadow-t"><div class="z-shadow-tl"></div><div class="z-shadow-tm"></div><div class="z-shadow-tr"></div></div><div class="z-shadow-c"><div class="z-shadow-cl"></div><div class="z-shadow-cm"></div><div class="z-shadow-cr"></div></div><div class="z-shadow-b"><div class="z-shadow-bl"></div><div class="z-shadow-bm"></div><div class="z-shadow-br"></div></div></div>',i=g.diameter,h={l:-i,t:i-1,h:0,w:0},a=Math.floor(g.diameter/2);switch(g.mode.toLowerCase()){case"shade":h.w=i*2;if(zk.ie){h.l-=a-1;h.t-=g.diameter+a;h.w-=g.diameter+(a+1);h.h-=1}break;case"drop":h.l=-h.l;if(zk.ie){h.l=h.t=h.w=h.h=-a}break;case"frame":h.w=h.h=(i*2);h.t=h.l;h.t+=1;h.h-=2;if(zk.ie){h.t=h.l=h.t-a;h.h=h.w=h.w-(g.diameter+a+1)}break}this.delta=h;this.node=f;zDom.insertHTMLBefore(f,c);this.shadow=zDom.$(b)},destroy:function(){zDom.remove(this.shadow);zDom.remove(this.stackup);this.node=this.shadow=this.stackup=null},hide:function(){this.shadow.style.display="none";if(this.stackup){this.stackup.style.display="none"}},sync:function(){var a=this.node;if(!a||!zDom.isVisible(a,true)){this.hide();return false}if(zDom.nextSibling(this.shadow,"DIV")!=a){a.parentNode.insertBefore(this.shadow,a)}this.shadow.style.zIndex=zk.parseInt(zDom.getStyle(a,"zIndex"));if(zk.ie){this.shadow.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity=50) progid:DXImageTransform.Microsoft.Blur(pixelradius="+(this.opts.diameter)+")"}this._recalc(a.offsetLeft,a.offsetTop,a.offsetWidth,a.offsetHeight);this.shadow.style.display="block";if(this.stackup){this.stackup.style.display="block"}return true},_recalc:function(i,s,p,j){var m=this.delta,a=this.shadow,u=a.style,b=(p+m.w),q=(j+m.h),g=b+"px",o=q+"px";u.left=(i+m.l)+"px";u.top=(s+m.t)+"px";if(u.width!=g||u.height!=o){u.width=g;u.height=o;if(!zk.ie){var n=a.childNodes;n[1].style.height=Math.max(0,(q-12))+"px";n[0].childNodes[1].style.width=n[1].childNodes[1].style.width=n[2].childNodes[1].style.width=Math.max(0,(b-12))+"px"}}var f=this.node;if(this.opts.stackup&&f){var k=this.stackup;if(!k){k=this.stackup=zDom.makeStackup(f,f.id+"$sdwstk",this.shadow)}u=k.style;u.left=i+"px";u.top=s+"px";u.width=p+"px";u.height=j+"px";u.zIndex=zk.parseInt(zDom.getStyle(f,"zIndex"))}},getDelta:function(){return this.delta},getBottomElement:function(){return this.stackup||this.shadow}});zk.eff.FullMask=zk.$extends(zk.Object,{$init:function(d){d=d||{};var b=this.mask=d.mask;if(this.mask){if(d.anchor){d.anchor.parentNode.insertBefore(b,d.anchor)}if(d.id){b.id=d.id}if(d.zIndex!=null){b.style.zIndex=d.zIndex}if(d.visible==false){b.style.display="none"}}else{var a=d.id||"z_mask",c='<div id="'+a+'" class="z-modal-mask"';if(d.zIndex!=null||d.visible==false){c+=' style="';if(d.zIndex!=null){c+="z-index:"+d.zIndex}if(d.visible==false){c+=";display:none"}c+='"'}c+="></div>";if(d.anchor){d.anchor.insertAdjacentHTML("beforeBegin",c)}else{document.body.insertAdjacentHTML("beforeEnd",c)}b=this.mask=zDom.$(a)}if(d.stackup){this.stackup=zDom.makeStackup(b,b.id+"$mkstk")}this._syncPos();zEvt.listen(b,"mousemove",zEvt.stop);zEvt.listen(b,"click",zEvt.stop);zEvt.listen(window,"resize",this.proxy(this._syncPos,"_pxSyncPos"));zEvt.listen(window,"scroll",this._pxSyncPos)},destroy:function(){var a=this.mask;zEvt.unlisten(a,"mousemove",zEvt.stop);zEvt.unlisten(a,"click",zEvt.stop);zEvt.unlisten(window,"resize",this._pxSyncPos);zEvt.unlisten(window,"scroll",this._pxSyncPos);zDom.remove(a);zDom.remove(this.stackup);this.mask=this.stackup=null},hide:function(){this.mask.style.display="none";if(this.stackup){this.stackup.style.display="none"}},sync:function(b){if(!zDom.isVisible(b,true)){this.hide();return}if(this.mask.nextSibling!=b){var c=b.parentNode;c.insertBefore(this.mask,b);if(this.stackup){c.insertBefore(this.stackup,this.mask)}}var a=this.mask.style;a.display="block";a.zIndex=b.style.zIndex;if(this.stackup){a=this.stackup.style;a.display="block";a.zIndex=b.style.zIndex}},_syncPos:function(){var c=this.mask;var b=zDom.toStyleOffset(c,zDom.innerX(),zDom.innerY()),a=c.style;a.left=b[0]+"px";a.top=b[1]+"px";a.width=zDom.innerWidth()+"px";a.height=zDom.innerHeight()+"px";a.display="block";c=this.stackup;if(c){c=c.style;c.left=a.left;c.top=a.top;c.width=a.width;c.height=a.height}}});zk.eff.Mask=zk.$extends(zk.Object,{$init:function(a){a=a||{};var f=(typeof a.anchor=="string")?zDom.$(a.anchor):a.anchor;if(!f||!zDom.isRealVisible(f,true)){return}var j=a.id||"z_applymask",k=zDom.$(j);if(k){return this}var c=a.msg||"Loading...",b=document.createElement("DIV");document.body.appendChild(b);var o=a.offset||zDom.revisedOffset(f),l=a.width||zDom.offsetWidth(f),i=a.height||zDom.offsetHeight(f),g='<div id="'+j+'" style="visibility:hidden"><div class="z-apply-mask" style="display:block;top:'+o[1]+"px;left:"+o[0]+"px;width:"+l+"px;height:"+i+'px;"></div><div id="'+j+'$z_loading" class="z-apply-loading"><div class="z-apply-loading-indicator"><span class="z-apply-loading-icon"></span> '+c+"</div></div></div>";zDom.setOuterHTML(b,g);var d=zDom.$(j+"$z_loading"),m=this.mask=zDom.$(j);if(d){if(d.offsetHeight>i){d.style.height=zDom.revisedHeight(d,i)+"px"}if(d.offsetWidth>l){d.style.width=zDom.revisedWidth(d,l)+"px"}d.style.top=(o[1]+((i-d.offsetHeight)/2))+"px";d.style.left=(o[0]+((l-d.offsetWidth)/2))+"px"}m.style.visibility=""},destroy:function(){var a=this.mask;zDom.remove(a);this.mask=null}});zk.eff.Tooltip=zk.$extends(zk.Object,{beforeBegin:function(b){var a=this._tip==b;if(a){this._clearClosing()}return !a},begin:function(b,a){if(this._tip!=b){this.close_();this._inf={tip:b,ref:a,timer:setTimeout(this.proxy(this.open_,"_pxopen"),zk.tipDelay)}}else{this._clearClosing()}},end:function(a){if(this._ref==a||this._tip==a){this._tmClosing=setTimeout(this.proxy(this.close_,"_pxclose"),100)}else{this._clearOpening()}},open_:function(){var a=this._inf;if(a){var c=this._tip=a.tip,b=this._ref=a.ref;this._inf=null;c.open(b,zk.currentPointer,null,{sendOnOpen:true})}},close_:function(){this._clearOpening();this._clearClosing();var a=this._tip;if(a){this._tip=this._ref=null;a.close({sendOnOpen:true})}},_clearOpening:function(){var a=this._inf;if(a){this._inf=null;clearTimeout(a.timer)}},_clearClosing:function(){var a=this._tmClosing;if(a){this._tmClosing=null;clearTimeout(a)}}});zTooltip=new zk.eff.Tooltip();
zAnima={count:0,isAnimating:function(a){return a&&a._$animating},appear:function(b,c,a){c=zDom.$(c);if(c){if(c._$animating){zAnima._addAniQue(c,function(){zAnima.appear(b,c,a)})}else{c._$animating="show";zEffect.appear(c,zAnima._mergeOpts(b,a,{duration:0.6}))}}},moveDown:function(b,c,a){zAnima.moveBy(b,c,zk.$defaut(a,{dir:"t"}))},moveRight:function(b,c,a){zAnima.moveBy(b,c,zk.$defaut(a,{dir:"l"}))},moveDiagonal:function(b,c,a){zAnima.moveBy(b,c,a)},moveBy:function(c,d,b){d=zDom.$(d);if(d){if(d._$animating){zAnima._addAniQue(d,function(){zAnima.moveBy(c,d,b)})}else{d._$animating="show";var a=b?b.dir:0;if(!a){a="lt"}new zk.eff.Move(d,0,0,zAnima._mergeOpts(c,b,{duration:0.6,afterSetup:function(e){if(a.indexOf("l")>=0){e.opts.x=e.originalLeft;e.originalLeft=0}if(a.indexOf("t")>=0){e.opts.y=e.originalTop;e.originalTop=0}zDom.show(e.node)}}))}}},slideIn:function(b,c,a){c=zDom.$(c);if(c){if(c._$animating){zAnima._addAniQue(c,function(){zAnima.slideIn(b,c,a)})}else{c._$animating="show";zEffect.slideIn(c,zAnima._mergeOpts(b,a,{duration:0.4}))}}},slideOut:function(b,c,a){c=zDom.$(c);if(c){if(c._$animating){zAnima._addAniQue(c,function(){zAnima.slideOut(b,c,a)})}else{c._$animating="hide";zEffect.slideOut(c,zAnima._mergeOpts(b,a,{duration:0.4}))}}},slideDown:function(b,c,a){c=zDom.$(c);if(c){if(c._$animating){zAnima._addAniQue(c,function(){zAnima.slideDown(b,c,a)})}else{c._$animating="show";zEffect.slideDown(c,zAnima._mergeOpts(b,a,{duration:0.4,y:0}))}}},slideUp:function(b,c,a){c=zDom.$(c);if(c){if(c._$animating){zAnima._addAniQue(c,function(){zAnima.slideUp(b,c,a)})}else{c._$animating="hide";zEffect.slideUp(c,zAnima._mergeOpts(b,a,{duration:0.4}))}}},fade:function(b,c,a){c=zDom.$(c);if(c){if(c._$animating){zAnima._addAniQue(c,function(){zAnima.fade(b,c,a)})}else{c._$animating="hide";zEffect.fade(c,zAnima._mergeOpts(b,a,{duration:0.55}))}}},puff:function(b,c,a){c=zDom.$(c);if(c){if(c._$animating){zAnima._addAniQue(c,function(){zAnima.puff(b,c,a)})}else{c._$animating="hide";zEffect.puff(c,zAnima._mergeOpts(b,a,{duration:0.6}))}}},dropOut:function(b,c,a){c=zDom.$(c);if(c){if(c._$animating){zAnima._addAniQue(c,function(){zAnima.dropOut(b,c,a)})}else{c._$animating="hide";zEffect.dropOut(c,zAnima._mergeOpts(b,a,{duration:0.6}))}}},_mergeOpts:function(c,b,a){b=zk.$default(b,{animaWidget:c});if(b.duration){b.duration/=1000}return zk.$default(zk.$default(b,a),zAnima._defOpts)},_defOpts:{beforeStart:function(a){var d=a.node||a._effects[0].node;if(d){++zAnima.count;var b=a.opts,c=b.animaWidget;if(b.beforeAnima){b.beforeAnima.call(c,d)}}},afterFinish:function(a){var d=a.node||a._effects[0].node;if(d){--zAnima.count;d._$animating=null;if(zk.ie&&zDom.isVisible(d)){zDom.rerender(d)}zAnima._doAniQue(d);var b=a.opts,c=b.animaWidget;if(b.afterAnima){b.afterAnima.call(c,d)}}}},_aniQue:{},_addAniQue:function(e,b){var d=zAnima._aniQue,c=e.id?e.id:e,a=d[c];if(!a){a=d[c]=[]}a.push(b)},_doAniQue:function(e){var d=zAnima._aniQue,c=e.id?e.id:e,a=d[c],b;if(a){while(!e._$animating&&(b=a.shift())){b()}if(!a.length){delete d[c]}}}};
zk.Widget=zk.$extends(zk.Object,{_visible:true,nChildren:0,bindLevel:-1,_mold:"default",className:"zk.Widget",$init:function(b){this._asaps={};this._lsns={};this._$lsns={};this._subnodes={};if(b){var a=b.mold;if(a!=null){if(a){this._mold=a}delete b.mold}this.set(b)}if(!this.uuid){this.uuid=zk.Widget.nextUuid()}},getMold:function(){return this._mold},setMold:function(a){if(a!=this._mold){this._mold=a;this.rerender()}},getSpaceOwner:function(){for(var a=this;a;a=a.parent){if(a._fellows){return a}}return null},getFellow:function(d,b){var a=this.getSpaceOwner();if(!a){return null}var c=a._fellows[d];return c||!b?c:zk.Widget._global[d]},getId:function(){return this.id},setId:function(c){var b=zk.Widget,a=this.id;if(a){delete zk.Widget._global[c];b._rmIdSpace(this)}this.id=c;if(c){zk.Widget._global[c]=this;b._addIdSpace(this)}},set:function(b,c,a){if(arguments.length==1){for(var d in b){this._set(d,b[d])}return}this._set(b,c,a)},_set:function(c,e,a){if(c.length>4&&c.startsWith("$$on")){var b=this.$class,d=b._importantEvts;(d||(b._importantEvts={}))[c.substring(2)]=true}else{if(c.length>3&&c.startsWith("$on")){this._asaps[c.substring(1)]=e}else{zk.set(this,c,e,a)}}},getChildAt:function(b){if(b>=0){for(var a=this.firstChild;a;a=a.nextSibling){if(--b<0){return a}}}return null},getChildIndex:function(){var a=this.parent,b=0;if(a){for(a=a.firstChild;a;a=a.nextSibling,++b){if(a==this){return b}}}return 0},setChildren:function(c){if(c){for(var b=0,a=c.length;b<a;){this.appendChild(c[b++])}}},appendChild:function(d){if(d==this.lastChild){return false}var a=d.parent;if(a!=this){d.beforeParentChanged_(this)}if(a){if(this._moveChild(d)){return true}a.removeChild(d)}d.parent=this;var c=this.lastChild;if(c){c.nextSibling=d;d.previousSibling=c;this.lastChild=d}else{this.firstChild=this.lastChild=d}++this.nChildren;zk.Widget._addIdSpaceDown(d);var b=this.desktop;if(b){this.insertChildHTML_(d,null,b)}this.onChildAdded_(d);return true},insertBefore:function(d,a){if(!a||a.parent!=this){return this.appendChild(d)}if(d==a||d.nextSibling==a){return false}if(d.parent!=this){d.beforeParentChanged_(this)}if(d.parent){if(this._moveChild(d,a)){return true}d.parent.removeChild(d)}d.parent=this;var c=a.previousSibling;if(c){d.previousSibling=c;c.nextSibling=d}else{this.firstChild=d}a.previousSibling=d;d.nextSibling=a;++this.nChildren;zk.Widget._addIdSpaceDown(d);var b=this.desktop;if(b){this.insertChildHTML_(d,a,b)}this.onChildAdded_(d);return true},removeChild:function(c){if(!c.parent){return false}if(this!=c.parent){return false}c.beforeParentChanged_(null);var a=c.previousSibling,b=c.nextSibling;if(a){a.nextSibling=b}else{this.firstChild=b}if(b){b.previousSibling=a}else{this.lastChild=a}c.nextSibling=c.previousSibling=c.parent=null;--this.nChildren;zk.Widget._rmIdSpaceDown(c);if(c.desktop){this.removeChildHTML_(c,a)}this.onChildRemoved_(c);return true},_replaceWgt:function(c){var b=this.getNode(),d=c.parent=this.parent,a=c.previousSibling=this.previousSibling;if(a){a.nextSibling=c}else{if(d){d.firstChild=c}}a=c.nextSibling=this.nextSibling;if(a){a.previousSibling=c}else{if(d){d.lastChild=c}}if(this.desktop){if(!c.desktop){c.desktop=this.desktop}if(b){c.replaceHTML(b,c.desktop)}zk.Widget._fixBindLevel(c,d?d.bindLevel+1:0);zWatch.fire("onBindLevelMove",null,c)}if(d){d.onChildRemoved_(this);d.onChildAdded_(c)}},beforeParentChanged_:function(){},domMovable_:function(){return true},_moveChild:function(f,e){if(f._floating||!f.domMovable_()||!this.domMovable_()||!this.desktop||!f.desktop){return false}var c=null;if(e&&!(c=e.getNode())){return false}var d=this.getNode(),b=f.getNode();dt=this.desktop,kiddt=f.desktop,oldpt=f.parent;f._node=this._node=f.desktop=this.desktop=null;try{oldpt.removeChild(f);this.insertBefore(f,e);zDom.remove(b);d.parentNode.insertBefore(b,c);var a=this.bindLevel+1;if(f.bindLevel!=a){zk.Widget._fixBindLevel(f,a);zWatch.fire("onBindLevelMove",null,f)}}finally{this.desktop=dt;f.desktop=kiddt;this._node=d;f._node=b}oldpt.onChildRemoved_(f);this.onChildAdded_(f);return true},isRealVisible:function(){for(var a=this;a;a=a.parent){if(!a.isVisible()){return false}var b=a.getNode();if(b&&!zDom.isVisible(b)){return false}}return true},isVisible:function(a){var b=this._visible;if(!a||!b){return b}var c=this.getNode();return !c||zDom.isVisible(c)},setVisible:function(c,a){if(this._visible!=c){this._visible=c;var b=this.parent;if(b&&c){b.onChildVisible_(this,true)}if(this.desktop){this._setVisible(c)}if(b&&!c){b.onChildVisible_(this,false)}}},_setVisible:function(b){var l=this.parent,g=!l||l.isRealVisible(),c=this.getNode(),f=this._floating;if(!g){if(!f){this.setDomVisible_(c,b)}return}if(b){var m;if(f){this._setZIndex(m=this._topZIndex(),true)}this.setDomVisible_(c,true);for(var e=zk.Widget._floating,d=0,k=e.length;d<k;++d){var i=e[d].widget;if(this!=i&&this._floatVisibleDependent(i)){m=m>=0?++m:i._topZIndex();var a=e[d].node;if(a!=i.getNode()){i.setFloatZIndex_(a,m)}else{i._setZIndex(m,true)}i.setDomVisible_(a,true,{visibility:1})}}zWatch.fireDown("onVisible",{visible:true},this)}else{zWatch.fireDown("onHide",{visible:true},this);for(var e=zk.Widget._floating,d=e.length,h=this.bindLevel;--d>=0;){var i=e[d].widget;if(h>=i.bindLevel){break}if(this._floatVisibleDependent(i)){i.setDomVisible_(e[d].node,false,{visibility:1})}}this.setDomVisible_(c,false)}},_floatVisibleDependent:function(a){for(;a;a=a.parent){if(a==this){return true}else{if(!a.isVisible()){break}}}return false},setDomVisible_:function(c,b,a){if(!a||a.display){c.style.display=b?"":"none"}if(a&&a.visibility){c.style.visibility=b?"visible":"hidden"}},onChildAdded_:function(a){},onChildRemoved_:function(a){},onChildVisible_:function(b,a){},setTopmost:function(){var f=this.getNode();if(f&&this._floating){var d=this._topZIndex();this._setZIndex(d,true);for(var a=zk.Widget._floating,c=0,e=a.length;c<e;++c){var b=a[c].widget;if(this!=b&&zUtl.isAncestor(this,b)&&b.isVisible()){var f=a[c].node;if(f!=b.getNode()){b.setFloatZIndex_(f,++d)}else{b._setZIndex(++d,true)}}}}},_topZIndex:function(){var d=0;for(var a=zk.Widget._floating,c=a.length;--c>=0;){var b=a[c].widget;if(b._zIndex>=d&&!zUtl.isAncestor(this,b)&&b.isVisible()){d=b._zIndex+1}}return d},isFloating_:function(){return this._floating},setFloating_:function(f,e){if(this._floating!=f){var a=zk.Widget._floating;if(f){var d={widget:this,node:e&&e.node?e.node:this.getNode()},b=this.bindLevel;for(var c=a.length;;){if(--c<0){a.unshift(d);break}if(b>=a[c].widget.bindLevel){a.$addAt(c+1,d);break}}this._floating=true}else{for(var c=a.length;--c>=0;){if(a[c].widget==this){a.$removeAt(c)}}this._floating=false}}},getWidth:function(){return this._width},setWidth:function(a){this._width=a;var b=this.getNode();if(b){b.style.width=a?a:""}},getHeight:function(){return this._height},setHeight:function(a){this._height=a;var b=this.getNode();if(b){b.style.height=a?a:""}},getZIndex:_zkf=function(){return this._zIndex},getZindex:_zkf,setZIndex:_zkf=function(a){this._setZIndex(a)},setZindex:_zkf,_setZIndex:function(c,a){if(this._zIndex!=c){this._zIndex=c;var b=this.getNode();if(b){b.style.zIndex=c>=0?c:"";if(a){this.fire("onZIndex",c,{ignorable:true})}}}},getLeft:function(){return this._left},setLeft:function(a){this._left=a;var b=this.getNode();if(b){b.style.left=a?a:""}},getTop:function(){return this._top},setTop:function(a){this._top=a;var b=this.getNode();if(b){b.style.top=a?a:""}},getTooltiptext:function(){return this._tooltiptext},setTooltiptext:function(a){this._tooltiptext=a;var b=this.getNode();if(b){b.title=a?a:""}},getStyle:function(){return this._style},setStyle:function(a){if(this._style!=a){this._style=a;this.updateDomStyle_()}},getSclass:function(){return this._sclass},setSclass:function(a){if(this._sclass!=a){this._sclass=a;this.updateDomClass_()}},getZclass:function(){return this._zclass},setZclass:function(a){if(this._zclass!=a){this._zclass=a;this.updateDomClass_()}},redraw:function(a){var c=this.prolog;if(c){a.push(c)}for(var e=this,b=this._mold;e;e=e.superclass){var d=e.$class.molds[b];if(d){return d.apply(this,arguments)}}throw"mold "+b+" not found in "+this.className},updateDomClass_:function(){if(this.desktop){var a=this.getNode();if(a){a.className=this.domClass_()}}},updateDomStyle_:function(){if(this.desktop){zDom.setStyle(this.getNode(),zDom.parseStyle(this.domStyle_()))}},domStyle_:function(c){var b="";if(!this.isVisible()&&(!c||!c.visible)){b="display:none;"}if(!c||!c.style){var a=this.getStyle();if(a){b+=a;if(a.charAt(a.length-1)!=";"){b+=";"}}}if(!c||!c.width){var a=this.getWidth();if(a){b+="width:"+a+";"}}if(!c||!c.height){var a=this.getHeight();if(a){b+="height:"+a+";"}}if(!c||!c.left){var a=this.getLeft();if(a){b+="left:"+a+";"}}if(!c||!c.top){var a=this.getTop();if(a){b+="top:"+a+";"}}if(!c||!c.zIndex){var a=this.getZIndex();if(a>=0){b+="z-index:"+a+";"}}return b},domClass_:function(c){var b="";if(!c||!c.sclass){var a=this.getSclass();if(a){b=a}}if(!c||!c.zclass){var a=this.getZclass();if(a){b+=(b?" ":"")+a}}return b},domAttrs_:function(c){var a=!c||!c.id?' id="'+this.uuid+'"':"";if(!c||!c.domStyle){var b=this.domStyle_();if(b){a+=' style="'+b+'"'}}if(!c||!c.domclass){var b=this.domClass_();if(b){a+=' class="'+b+'"'}}if(!c||!c.tooltiptext){var b=this._tooltiptext;if(b){a+=' title="'+b+'"'}}return a},replaceHTML:function(e,d,c){if(!d){d=this.desktop;if(!zk.Desktop._ndt){zkboot("z_auto")}}var a=zk.currentFocus;if(a&&zUtl.isAncestor(this,a,true)){zk.currentFocus=null}else{a=null}var b=this.parent;if(b){b.replaceChildHTML_(this,e,d,c)}else{if(e.z_wgt){e.z_wgt.unbind_(c)}zDom.setOuterHTML(e,this._redrawHTML(c));this.bind_(d,c)}if(a&&!zk.currentFocus){a.focus()}if(!c){zWatch.fireDown("beforeSize",null,this);zWatch.fireDown("onSize",null,this)}},insertHTML:function(c,a,b){c.insertAdjacentHTML(a,this._redrawHTML());this.bind_(b)},_redrawHTML:function(b){var a=[];this.redraw(a,b);return a.join("")},rerender:function(b){if(this.desktop){var c=this.getNode();if(c){if(b){var a=b.skip(this);if(a){this.replaceHTML(c,null,b);b.restore(this,a);zWatch.fireDown("beforeSize",null,this);zWatch.fireDown("onSize",null,this);return}}this.replaceHTML(c)}}},replaceChildHTML_:function(d,c,b,a){if(c.z_wgt){c.z_wgt.unbind_(a)}zDom.setOuterHTML(c,d._redrawHTML(a));d.bind_(b,a)},insertChildHTML_:function(g,d,f){var e,c;if(d){e=d._getBeforeNode();if(!e){d=null}}if(!d){for(var b=this;;){c=b.getSubnode("cave")||b.getNode();if(c){break}var a=b.nextSibling;if(a){e=a._getBeforeNode();if(e){break}}if(!(b=b.parent)){c=document.body;break}}}if(e){zDom.insertHTMLBefore(e,g._redrawHTML())}else{zDom.insertHTMLBeforeEnd(c,g._redrawHTML())}g.bind_(f)},_getBeforeNode:function(){for(var a=this;a;a=a.nextSibling){var b=a._getFirstNodeDown();if(b){return b}}},_getFirstNodeDown:function(){var b=this.getNode();if(b){return b}for(var a=this.firstChild;a;a=a.nextSibling){b=a._getFirstNodeDown();if(b){return b}}},removeChildHTML_:function(d,b){var c=d.getNode();if(!c){d._prepareRemove(c=[])}d.unbind_();if(c.$array){for(var a=c.length;--a>=0;){zDom.remove(c[a])}}else{zDom.remove(c)}},_prepareRemove:function(b){for(var a=this.firstChild;a;a=a.nextSibling){var c=a.getNode();if(c){b.push(c)}else{a._prepareRemove(b)}}},getSubnode:function(a){var b=this._subnodes[a];if(!b&&this.desktop){b=this._subnodes[a]=zDom.$(this.uuid,a)}return b},getNode:function(){var a=this._node;if(!a&&this.desktop&&!this._nodeSolved){a=zDom.$(this.uuid);if(a){a.z_wgt=this;this._node=a}this._nodeSolved=true}return a},bind_:function(d,b){zk.Widget._binds[this.uuid]=this;if(!d){d=zk.Desktop.$(this.uuid)}this.desktop=d;var a=this.parent;this.bindLevel=a?a.bindLevel+1:0;for(var c=this.firstChild;c;c=c.nextSibling){if(!b||!b.skipped(this,c)){c.bind_(d)}}},unbind_:function(b){delete zk.Widget._binds[this.uuid];var d=this._node;if(d){d.z_wgt=null;this._node=null}for(var a in this._subnodes){this._subnodes[a]=null}this.desktop=null;this._nodeSolved=false;this.bindLevel=-1;for(var c=this.firstChild;c;c=c.nextSibling){if(!b||!b.skipped(this,c)){c.unbind_()}}},focus:function(c){var b=this.getNode();if(b&&this.isVisible()&&this.canActivate({checkOnly:true})){if(zDom.focus(b,c)){zk.currentFocus=this;this.setTopmost();return true}for(var a=this.firstChild;a;a=a.nextSibling){if(a.isVisible()&&a.focus(c)){return true}}}return false},canActivate:function(b){var a=zk.currentModal;if(a&&!zUtl.isAncestor(a,this)){if(!b||!b.checkOnly){var c=zk.currentFocus;if(c&&zUtl.isAncestor(a,c)){c.focus(0)}else{a.focus(0)}}return false}return true},fireX:function(k,i){k.currentTarget=this;var h=k.name,f=this._lsns[h],g=f?f.length:0;if(g){for(var d=0;d<g;){var b=f[d++],c=b[1];(b[2]||c[h]).call(c,k);if(k.stopped){return k}}}if(this.inServer&&this.desktop){var a=this._asaps[h];if(a==null){var e=this.$class._importantEvts;if(e&&e[h]){a=false}}if(a!=null){zAu.send(k,a?i>=0?i:38:-1)}}return k},fire:function(d,c,a,b){return this.fireX(new zk.Event(this,d,c,a),b)},listen:function(g,f,e,c){if(!c){c=0}var d=[c,f,e],a=this._lsns[g];if(!a){a=this._lsns[g]=[d]}else{for(var b=a.length;--b>=0;){if(a[b][0]>=c){a.$addAt(b+1,d);break}}}},unlisten:function(e,d,c){var a=this._lsns[e];for(var b=a?a.length:0;--b>=0;){if(a[b][1]==d&&a[b][2]==c){a.$removeAt(b);return true}}return false},isListen:function(b){if(this._asaps[b]){return true}var a=this._lsns[b];return a&&a.length},setListeners:function(a){for(var b in a){this._setListener(b,a[b])}},setListener:function(a){this._setListener(a[0],a[1])},_setListener:function(d,c){var b=this._$lsns,a=b[d];if(a){delete b[d];this.unlisten(d,this,a)}if(c){if(typeof c!="function"){c=new Function(c)}this.listen(d,this,b[d]=c)}},setMethods:function(a){for(var b in a){this._setMethod(b,a[b])}},setMethod:function(a){this._setMethod(a[0],a[1])},_setMethod:function(mtdnm,fn){if(fn){if(typeof fn!="function"){fn=eval(fn)}var oldnm="$"+mtdnm;if(!this[oldnm]){this[oldnm]=this[mtdnm]}this[mtdnm]=fn}else{var oldnm="$"+mtdnm;this[mtdnm]=this[oldnm];delete this[oldnm]}},doClick_:function(a){if(!this.fireX(a).stopped){var b=this.parent;if(b){b.doClick_(a)}}},doDoubleClick_:function(a){if(!this.fireX(a).stopped){var b=this.parent;if(b){b.doDoubleClick_(a)}}},doRightClick_:function(a){if(!this.fireX(a).stopped){var b=this.parent;if(b){b.doRightClick_(a)}}},doMouseOver_:function(a){if(!this.fireX(a).stopped){var b=this.parent;if(b){b.doMouseOver_(a)}}},doMouseOut_:function(a){if(!this.fireX(a).stopped){var b=this.parent;if(b){b.doMouseOut_(a)}}},doMouseDown_:function(a){if(!this.fireX(a).stopped){var b=this.parent;if(b){b.doMouseDown_(a)}}},doMouseUp_:function(a){if(!this.fireX(a).stopped){var b=this.parent;if(b){b.doMouseUp_(a)}}},doMouseMove_:function(a){if(!this.fireX(a).stopped){var b=this.parent;if(b){b.doMouseMove_(a)}}},doKeyDown_:function(a){if(!this.fireX(a).stopped){var b=this.parent;if(b){b.doKeyDown_(a)}}},doKeyUp_:function(a){if(!this.fireX(a).stopped){var b=this.parent;if(b){b.doKeyUp_(a)}}},doKeyPress_:function(a){if(!this.fireX(a).stopped){var b=this.parent;if(b){b.doKeyPress_(a)}}},domFocus_:function(){if(!this.canActivate()){return false}zk.currentFocus=this;zWatch.fire("onFloatUp",null,this);if(this.isListen("onFocus")){this.fire("onFocus")}return true},domBlur_:function(){if(zk.currentFocus==this){zk.currentFocus=null}if(this.isListen("onBlur")){this.fire("onBlur")}}},{_floating:[],$:function(g,a){var d=zk.Widget._binds;if(typeof g=="string"){var b=g.indexOf("$");return d[b>=0?g.substring(0,b):g]}if(!g||zk.Widget.isInstance(g)){return g}else{g=g.z_target||g.target||g.srcElement||g}for(;g;g=zDom.parentNode(g)){var e=g.z_wgt;if(e){return e}var f=g.id;if(f){var b=f.indexOf("$");if(b>=0){f=f.substring(0,b);if(a){e=d[f];if(e){var c=e.getNode();if(c&&zDom.isAncestor(c,g)){return e}continue}}}e=d[f];if(e){return e}}}return null},_binds:{},domMouseDown:function(c){var a=zk.currentModal;if(a&&!c){var b=zk.currentFocus;if(b&&zUtl.isAncestor(a,b)){b.focus(0)}else{a.focus(0)}}else{if(!c||c.canActivate()){zk.currentFocus=c;if(c){zWatch.fire("onFloatUp",null,c)}}}},uuid:function(c){var b=typeof c=="object"?c.id||"":c,a=b.indexOf("$");return a>=0?b.substring(0,a):c},nextUuid:function(){return"_z_"+zk.Widget._nextUuid++},_nextUuid:0,isAutoId:function(a){return !a||a.startsWith("_z_")||a.startsWith("z_")},_fixBindLevel:function(c,a){var b=zk.Widget;c.bindLevel=a++;for(c=c.firstChild;c;c=c.nextSibling){b._fixBindLevel(c,a)}},_addIdSpace:function(b){if(b._fellows){b._fellows[b.id]=b}var a=b.parent;if(a){a=a.getSpaceOwner();if(a){a._fellows[b.id]=b}}},_rmIdSpace:function(b){if(b._fellows){delete b._fellows[b.id]}var a=b.parent;if(a){a=a.getSpaceOwner();if(a){delete a._fellows[b.id]}}},_addIdSpaceDown:function(c){var a=c.parent;a=a?a.getSpaceOwner():null;if(a){var b=zk.Widget._addIdSpaceDown0;b(c,a,b)}},_addIdSpaceDown0:function(c,a,b){if(c.id){a._fellows[c.id]=c}for(c=c.firstChild;c;c=c.nextSibling){b(c,a,b)}},_rmIdSpaceDown:function(c){var a=c.parent;a=a?a.getSpaceOwner():null;if(a){var b=zk.Widget._rmIdSpaceDown0;b(c,a,b)}},_rmIdSpaceDown0:function(c,a,b){if(c.id){delete a._fellows[c.id]}for(c=c.firstChild;c;c=c.nextSibling){b(c,a,b)}},_global:{}});zk.Page=zk.$extends(zk.Widget,{_style:"width:100%;height:100%",className:"zk.Page",$init:function(b,a){this._fellows={};this.$super("$init",b);if(a){zk.Page.contained.push(this)}},redraw:function(b,c){b.push('<div id="',this.uuid,'" style="',this.getStyle(),'">');for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b,c)}b.push("</div>")}},{contained:[]});zk.Desktop=zk.$extends(zk.Widget,{bindLevel:0,className:"zk.Desktop",$init:function(d,a){this.$super("$init",{uuid:d});this._aureqs=[];var c=zk.Desktop,b=c.all,e=b[d];if(!e){this.id=d;this.updateURI=a;b[d]=this;++c._ndt;if(!c._dt){c._dt=this}}else{if(a){e.updateURI=a}}c.sync()},_exists:function(){var a=this._pguid;return !a||zDom.$(a)},bind_:zk.$void,unbind_:zk.$void,setId:zk.$void},{$:function(d){var c=zk.Desktop,b=c.all,a;if(c._ndt>1){if(typeof d=="string"){a=b[d];if(a){return a}}a=zk.Widget.$(d);if(a){for(;a;a=a.parent){if(a.desktop){return a.desktop}if(a.$instanceof(c)){return a}}}}if(a=c._dt){return a}for(d in b){return b[d]}},all:{},_ndt:0,sync:function(){var b=zk.Desktop,a=b.all;if(b._dt&&!b._dt._exists()){b._dt=null}for(var c in a){var d=a[c];if(!d._exists()){delete a[c];--b._ndt}else{if(!b._dt){b._dt=d}}}}});zk.Skipper=zk.$extends(zk.Object,{skipped:function(a,b){return a.caption!=b},skip:function(c,b){var a=zDom.$(b||(c.uuid+"$cave"));if(a&&a.firstChild){zDom.remove(a);return a}return null},restore:function(d,b){if(b){var c=zDom.$(b.id);for(var a;a=b.firstChild;){b.removeChild(a);c.appendChild(a)}}}});zk.Skipper.nonCaptionSkipper=new zk.Skipper();zk.Native=zk.$extends(zk.Widget,{className:"zk.Native",redraw:function(b){var c=this.prolog;if(c){b.push(c)}for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}c=this.epilog;if(c){b.push(c)}}});zk.Macro=zk.$extends(zk.Widget,{className:"zk.Macro",redraw:function(b){b.push("<span",this.domAttrs_(),">");for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</span>")}});zk.RefWidget=zk.$extends(zk.Widget,{bind_:function(){var a=zk.Widget.$(this.uuid);if(!a||!a.desktop){throw"illegal: "+a}var d=a.parent,c;if(d){var b=a.desktop,e=a._node;a.desktop=a._node=null;d.removeChild(a);a.desktop=b;a._node=e}d=a.parent=this.parent,c=a.previousSibling=this.previousSibling;if(c){c.nextSibling=a}else{if(d){d.firstChild=a}}c=a.nextSibling=this.nextSibling;if(c){c.previousSibling=a}else{if(d){d.lastChild=a}}}});
zPkg={loading:0,end:function(a){if(!zPkg._lding.$remove(a)){zPkg._lded[a]=true}var e=zPkg._afld2[a];if(e){delete zPkg._afld2[a];for(var d,c=zPkg._aflds;d=e.pop();){c.unshift(d)}}if(!zPkg._updCnt()){try{zEvt.enableESC();zUtl.destroyProgressbox("zk_loadprog")}catch(b){}for(var d,c=zPkg._aflds;d=c.shift();){d()}}},isLoaded:function(a){return zPkg._lded[a]},load:function(b,f){var g=zPkg._lded;if(!b||g[b]){return !zPkg.loading}g[b]=true;var i=zPkg._deps[b];if(i){delete zPkg._deps[b];for(var a;a=i.unshift();){zPkg.load(a)}}zPkg._lding.unshift(b);if(zPkg._updCnt()==1){zEvt.disableESC();setTimeout(zPkg._pgbox,380)}var d=b.indexOf(".");if(d){d=zPkg.getVersion(b.substring(0,d))}if(!d){d=zk.build}var h=document.createElement("script"),c=b.replace(/\./g,"/")+"/zk.wpd";h.type="text/javascript";h.charset="UTF-8";if(c.charAt(0)!="/"){c="/"+c}if(d){c="/web/_zv"+d+"/js"+c}else{c="/web/js"+c}h.src=zAu.comURI(c,f);document.getElementsByTagName("HEAD")[0].appendChild(h)},_lded:{zk:true},_lding:[],_aflds:[],_afld2:{},_deps:{},_ldmsg:function(){var c="";for(var a=zPkg._lding,b=a.length;--b>=0;){if(c){c+=", "}c+=a[b]}return c},_updCnt:function(){zPkg.loading=zPkg._lding.length;try{var b=zDom.$("zk_loadcnt");if(b){b.innerHTML=zPkg._ldmsg()}}catch(a){}return zPkg.loading},_pgbox:function(){if(zPkg.loading||window.dbg_progressbox){var a=zDom.$("zk_loadprog");if(!a){zUtl.progressbox("zk_loadprog",'Loading <span id="zk_loadcnt">'+zPkg._ldmsg()+"</span>",true)}}},getVersion:function(a){return zPkg._pkgVers[a]},setVersion:function(b,a){zPkg._pkgVers[b]=a},depends:function(d,c){if(d&&c){if(zPkg._lded[d]){zPkg.load(c)}else{var e=zPkg._deps;if(e[d]){e[d].push(c)}else{e[d]=[c]}}}},_pkgVers:{}};zk.afterLoad=function(d,c){if(typeof d=="string"){if(!c){return}if(zPkg._lded[d]){d=c}else{var e=zPkg._afld2;if(e[d]){e[d].push(c)}else{e[d]=[c]}return}}if(zPkg.loading){zPkg._aflds.push(d);return true}d()};
var _zkmt=zUtl.now();function zkboot(c,a,e){if(!zk.sysInited){zkm.sysInit()}var b=zk.Desktop,d;if(!e){if(c){d=b.all[c];if(d){if(!d.updateURI){d.updateURI=a}return d}}else{d=b._dt}}return d||new b(c,a)}function zkblbg(b){zk.mounting=true;zkm.binding=b;var a=390-(zUtl.now()-_zkmt);zk.startProcessing(a>0?a:0)}function zkpgbg(c,f,e,b,a){var d={};if(f){d.style=f}if(e){zkdtbg(e,a)._pguid=c}zkm.push({type:"#p",uuid:c,contained:b,props:d})}function zkbg(d,c,a,b){zkm.push({type:d,uuid:c,mold:a,props:b})}function zkb2(c,b,a){zkm.push({type:b||"zhtml.Widget",uuid:c,props:a})}function zkdtbg(b,a){var c=zk.Desktop.$(b);if(c==null){c=new zk.Desktop(b,a)}else{if(a){c.updateURI=a}}zkm.curdt=c;return c}function zkver(){var c=arguments,a=c.length;zk.version=c[0];zk.build=c[1];for(var b=2;b<a;b+=2){zPkg.setVersion(c[b],c[b+1])}}function zkopt(b){for(var a in b){var c=b[a];switch(a){case"pd":zk.procDelay=c;break;case"td":zk.tipDelay=c;break;case"rd":zk.resendDelay=c;break;case"dj":zk.debugJS=c;break;case"kd":zk.keepDesktop=c;break;case"pf":zk.pfmeter=c;break;case"cd":zk.clickFilterDelay=c;break}}}function zkmld(b,e){if(!b.superclass){zk.afterLoad(function(){zkmld(b,e)});return}var c=b.molds={};for(var a in e){var d=e[a];c[a]=typeof d=="function"?d:d[0].molds[d[1]]}}function zkam(a){if(zk.mounting||!zk.sysInited){zkm._afMts.push(a);return true}a()}zk.afterMount=zkam;zkm={push:function(a){a.children=[];if(zkm._wgts.length>0){zkm._wgts[0].children.push(a)}zkm._wgts.unshift(a)},pop:function(){var a=zkm._wgts.shift();if(!zkm._wgts.length){var b=zkm._crInf0;b.push([zkm.curdt,a,zkm.binding]);b.stub=zAu.stub;zAu.stub=null;zkm.exec(zkm.mount)}},top:function(){return zkm._wgts[0]},end:function(){zkm._wgts=[];zkm._curdt=null;zkm.binding=false},sysInit:function(){zk.sysInited=true;zkm.sysInit=null;var a=zk.xbodyClass;if(a){zk.xbodyClass=null;var b=document.body;cn=b.className;if(cn.length){cn+=" "}b.className=cn+a}zEvt.listen(document,"keydown",zkm.docKeyDown);zEvt.listen(document,"keyup",zkm.docKeyUp);zEvt.listen(document,"keypress",zkm.docKeyPress);zEvt.listen(document,"mousedown",zkm.docMouseDown);zEvt.listen(document,"mouseup",zkm.docMouseUp);zEvt.listen(document,"mousemove",zkm.docMouseMove);zEvt.listen(document,"mouseover",zkm.docMouseOver);zEvt.listen(document,"mouseout",zkm.docMouseOut);zEvt.listen(document,"click",zkm.docClick);zEvt.listen(document,"dblclick",zkm.docDblClick);zEvt.listen(document,"contextmenu",zkm.docCtxMenu);zEvt.listen(window,"resize",zkm.docResize);zEvt.listen(window,"scroll",zkm.docScroll);zkm._oldUnload=window.onunload;window.onunload=zkm.wndUnload;zkm._oldBfUnload=window.onbeforeunload;window.onbeforeunload=zkm.wndBfUnload},mount:function(){var e=zkm._crInf0;for(var a=e.length;--a>=0;){var b=e[a];if(!b.jsLoad){b.jsLoad=true;zkm.pkgLoad(b[1]);zkm.exec(zkm.mount);return}}var d=e.stub;if(d){e.stub=null;zkm.mtAU(d)}else{zk.bootstrapping=true;if(zk.sysInited){zkm.mtBL()}else{if(document.readyState){var c=setInterval(function(){if(/loaded|complete/.test(document.readyState)){clearInterval(c);zkm.mtBL()}},50)}else{setTimeout(zkm.mtBL,120)}}}},mtBL:function(){if(!zk.sysInited){zkm.sysInit()}if(zPkg.loading){zk.afterLoad(zkm.mtBL);return}var b=zkm._crInf0,a=b.shift();if(a){zkm._crInf1.push([a[0],zkm.create(a[0],a[1]),a[2]]);if(b.length){return zkm.exec(zkm.mtBL)}}zkm.mtBL0()},mtBL0:function(){if(zkm._crInf0.length){return}if(zPkg.loading){zk.afterLoad(zkm.mtBL0);return}var b=zkm._crInf1,a=b.shift();if(a){var c=a[1];if(a[2]){c.bind_(a[0])}else{c.replaceHTML(c.uuid,a[0])}return zkm.exec(zkm.mtBL0)}setTimeout(zkm.mtBL1,0)},mtBL1:function(){if(zkm._crInf0.length||zkm._crInf1.length){return}for(var a;a=zkm._afMts.shift();){a();if(zPkg.loading){zk.afterLoad(zkm.mtBL1);return}}zk.mounting=zk.bootstrapping=false;zk.endProcessing()},mtAU:function(c){if(zPkg.loading){zk.afterLoad(function(){zkm.mtAU(c)});return}var b=zkm._crInf0,a=b.shift();if(a){c(zkm.create(null,a[1]));if(b.length){return zkm.exec(function(){zkm.mtAU(c)})}}zkm.mtAU0()},mtAU0:function(){if(zAu._moreCmds()){zk.mounting=false;zAu.doCmds();return}for(var a;a=zkm._afMts.shift();){a();if(zPkg.loading){zk.afterLoad(zkm.mtAU0);return}}zk.mounting=false;zAu.doCmds()},create:function(k,m){var o,i=m.props||{};if(m.type=="#p"){o=new zk.Page({uuid:m.uuid},m.contained);o.inServer=true;if(k){k.appendChild(o)}}else{var n=zk.$import(m.type),a=m.uuid,e={uuid:a},l=m.mold;if(l){e.mold=l}var o=new n(e);o.inServer=true;if(k){k.appendChild(o)}l=i.z_ea;if(l){delete i.z_ea;var g=zDom.$(a);if(g){var c=g.innerHTML;if(l.charAt(0)=="$"){l=l.substring(1);c=zUtl.decodeXML(c)}i[l]=c}}l=i.z_al;if(l){delete i.z_al;for(var b in l){i[b]=l[b]()}}}o.set(i);for(var d=0,h=m.children,f=h.length;d<f;++d){zkm.create(o,h[d])}return o},pkgLoad:function(c){var f=c.type;d=f.lastIndexOf(".");if(d>=0){zPkg.load(f.substring(0,d),zkm.curdt)}var g=c.z_pk;if(g){delete c.z_pk;g=g.split(",");for(var d=0,b=g.length;d<b;){zPkg.load(g[d++].trim())}}for(var e=c.children,a=e.length,d=0;d<a;++d){zkm.pkgLoad(e[d])}},exec:function(b){var a=zUtl.now(),c=a-_zkmt;if(c>300){_zkmt=a;c>>=4;setTimeout(b,c<35?c:35)}else{b()}},_wgts:[],_crInf0:[],_crInf1:[],_afMts:[],docMouseDown:function(a){a=a||window.event;var c=zEvt.target(a),e=zk.Widget,d=e.$(a,true);zk.lastPointer[0]=zEvt.x(a);zk.lastPointer[1]=zEvt.y(a);if(c!=document.body&&c!=document.body.parentNode){e.domMouseDown(d)}if(d){var b=new zk.Event(d,"onMouseDown",zkm._mouseData(a,d),null,a);d.doMouseDown_(b);if(b.stopped){zEvt.stop(a)}}},_mouseData:function(a,b){var c=zEvt.target(a);if(!c||!c.id||c.id.indexOf("$")>=0){c=b.getNode()}return zEvt.mouseData(a,c)},docMouseUp:function(a){a=a||window.event;var c=zk.mouseCapture;if(c){zk.mouseCapture=null}else{c=zk.Widget.$(a,true)}if(c){var b=new zk.Event(c,"onMouseUp",zkm._mouseData(a,c),null,a);c.doMouseUp_(b);if(b.stopped){zEvt.stop(a)}}},docMouseMove:function(a){a=a||window.event;zk.currentPointer[0]=zEvt.x(a);zk.currentPointer[1]=zEvt.y(a);var b=zk.mouseCapture;if(!b){b=zk.Widget.$(a,true)}if(b){b.doMouseMove_(new zk.Event(b,"onMouseMove",zkm._mouseData(a,b),null,a))}},docMouseOver:function(a){a=a||window.event;zk.currentPointer[0]=zEvt.x(a);zk.currentPointer[1]=zEvt.y(a);var b=zk.Widget.$(a,true);if(b){b.doMouseOver_(new zk.Event(b,"onMouseOver",zkm._mouseData(a,b),null,a))}},docMouseOut:function(a){a=a||window.event;var b=zk.Widget.$(a,true);if(b){b.doMouseOut_(new zk.Event(b,"onMouseOut",zkm._mouseData(a,b),null,a))}},docKeyDown:function(a){a=a||window.event;var c=zk.Widget.$(a,true);if(c){var b=new zk.Event(c,"onKeyDown",zEvt.keyData(a),null,a);c.doKeyDown_(b);if(b.stopped){zEvt.stop(a)}}},docKeyUp:function(a){a=a||window.event;var c=zk.keyCapture;if(c){zk.keyCapture=null}else{c=zk.Widget.$(a,true)}if(c){var b=new zk.Event(c,"onKeyUp",zEvt.keyData(a),null,a);c.doKeyUp_(b);if(b.stopped){zEvt.stop(a)}}},docKeyPress:function(a){a=a||window.event;var c=zk.keyCapture;if(!c){c=zk.Widget.$(a,true)}if(c){var b=new zk.Event(c,"onKeyPress",zEvt.keyData(a),null,a);c.doKeyPress_(b);if(b.stopped){zEvt.stop(a)}}},docClick:function(a){if(zk.processing){return}a=a||window.event;if(a.which==1||(a.button==0||a.button==1)){var c=zk.Widget.$(a,true);if(c){var b=new zk.Event(c,"onClick",zkm._mouseData(a,c),{ctl:true},a);c.doClick_(b);if(b.stopped){zEvt.stop(a)}}}},docDblClick:function(a){if(zk.processing){return}a=a||window.event;var c=zk.Widget.$(a,true);if(c){var b=new zk.Event(c,"onDoubleClick",zkm._mouseData(a,c),{ctl:true},a);c.doDoubleClick_(b);if(b.stopped){zEvt.stop(a);return false}}},docCtxMenu:function(a){if(zk.processing){return}a=a||window.event;zk.lastPointer[0]=zEvt.x(a);zk.lastPointer[1]=zEvt.y(a);var c=zk.Widget.$(a,true);if(c){var b=new zk.Event(c,"onRightClick",zkm._mouseData(a,c),{ctl:true},a);c.doRightClick_(b);if(b.stopped){zEvt.stop(a);return false}}return !zk.ie||a.returnValue},docScroll:function(){zWatch.fire("onScroll")},docResize:function(){if(!zk.sysInited||zk.mounting){return}var b=zUtl.now(),c=zkm._resz;if((c.lastTime&&b<c.lastTime)||c._inResize){return}var a=zk.ie?250:50;c.time=b+a-1;setTimeout(zkm.docDidResize,a)},docDidResize:function(){var b=zkm._resz;if(!b.time){return}var a=zUtl.now();if(zk.mounting||zPkg.loading||zAnima.count||a<b.time){setTimeout(zkm.docDidResize,10);return}b.time=null;b.lastTime=a+1000;zAu._onClientInfo();b._inResize=true;try{zWatch.fire("beforeSize");zWatch.fire("onSize");b.lastTime=zUtl.now()+8}finally{b._inResize=false}},_resz:{},wndUnload:function(){zk.unloading=true;var a=!zk.opera&&!zk.keepDesktop;if(a||zk.pfmeter){try{var b=zk.Desktop.all;for(var c in b){var h=zUtl.newAjax(),g="dtid="+c+"&cmd.0="+(a?"rmDesktop":"dummy"),f=b[c],d=zAu.comURI(null,f);h.open("POST",zk.ie?d+"?"+g:d,true);h.setRequestHeader("Content-Type","application/x-www-form-urlencoded");if(zk.pfmeter){zAu._pfsend(c,h,true)}if(zk.ie){h.send(null)}else{h.send(g)}}}catch(i){}}if(zkm._oldUnload){zkm._oldUnload.apply(window,arguments)}},wndBfUnload:function(){if(!zk.skipBfUnload){if(zk.confirmClose){return zk.confirmClose}for(var b=zkm._bfs,a=0;a<b.length;++a){var c=b[a]();if(c){return c}}}if(zkm._oldBfUnload){var c=zkm._oldBfUnload.apply(window,arguments);if(c){return c}}zk.unloading=true},_bfs:[]};zkble=zkm.end;zke=zkpge=zkm.pop;zk.beforeUnload=function(a,b){if(b&&b.remove){zkm._bfs.$remove(a)}else{zkm._bfs.push(a)}};
zHistory={bookmark:function(a){if(zHistory._curbk!=a){zHistory._curbk=a;var b=encodeURIComponent(a);location.hash=zk.safari||!b?b:"#"+b;zHistory._bkIframe(a);zHistory.onURLChange()}},checkBookmark:function(){var a=zHistory.getBookmark();if(a!=zHistory._curbk){zHistory._curbk=a;zAu.send(new zk.Event(null,"onBookmarkChange",a),50);zHistory.onURLChange()}},getBookmark:function(){var a=location.hash;var b=a.indexOf("#");return b>=0?decodeURIComponent(a.substring(b+1)):""},_bkIframe:zk.ie?function(a){var b=zAu.comURI("/web/js/zk/html/history.html",null,true),c=$e("zk_histy");if(!c){c=zk.newFrame("zk_histy",b,"display:none")}if(a){b+="?"+encodeURIComponent(a)}c.src=b}:zk.$void,onHistoryLoaded:zk.ie?function(c){var b=c.indexOf("?");var a=b>=0?c.substring(b+1):"";location.hash=a?"#"+a:"";zHistory.checkBookmark()}:zk.$void,onURLChange:function(){}};zHistory._curbk="";zk.afterMount(function(){zHistory.checkBookmark();setInterval("zHistory.checkBookmark()",250)});
zAu={comURI:function(c,b,h){var a=zk.Desktop.$(b).updateURI;if(!c){return a}if(c.charAt(0)!="/"){c="/"+c}var f=a.lastIndexOf(";"),e=a.lastIndexOf("?");if(f<0&&e<0){return a+c}if(e>=0&&(f<0||e<f)){f=e}var g=a.substring(0,f);if(h){return g+c}var i=a.substring(f);var d=c.indexOf("?");return d>=0?e>=0?g+c.substring(0,d)+i+"&"+c.substring(d+1):g+c.substring(0,d)+i+c.substring(d):g+c+i},_onClientInfo:function(){if(zAu._cInfoReg){setTimeout(zAu._fireClientInfo,20)}},_fireClientInfo:function(){zAu.cmd0.clientInfo()},confirmRetry:function(a,b){var c=mesg[a];return zDom.confirm((c?c:a)+"\n"+mesg.TRY_AGAIN+(b?"\n\n("+b+")":""))},showError:function(a,c,d,b){var e=mesg[a];zk.error((e?e:a)+"\n"+(c?c:"")+(d?d:"")+(b?"\n"+b.message:""))},getErrorURI:function(a){return zAu._eru["e"+a]},setErrorURI:function(c,b){if(len>2){for(var a=0;a<len;a+=2){zAu.setErrorURI(args[a],args[a+1])}return}zAu._eru["e"+c]=b},_eru:{},processing:function(){return zk.mounting||zAu._cmdsQue.length||zAu._areq||zAu._preqInf},_ckProcessng:function(){if(!zAu.processing()){zk.endProcessing();zAu.doneTime=zUtl.now()}},send:function(e,f){if(f<0){var d=e.opts;if(!d){d=e.opts={}}d.implicit=true}var b=e.target;if(b){zAu._send(b.type=="#d"?b:b.desktop,e,f)}else{var a=zk.Desktop.all;for(var c in a){zAu._send(a[c],e,f)}}},sendAhead:function(e,f){var b=e.target;if(b){var d=b.type=="#d"?b:b.desktop;d._aureqs.unshift(e);zAu._send2(d,f)}else{var a=zk.Desktop.all;for(var c in a){d._aureqs.unshift(e);zAu._send2(a[c],f)}return}},pushXmlResp:function(b,m){var i=m.responseXML;if(!i){if(zk.pfmeter){zAu.pfdone(b,zAu._pfGetIds(m))}return false}var a=[],f=i.getElementsByTagName("r"),n=i.getElementsByTagName("rid");if(zk.pfmeter){a.dt=b;a.pfIds=zAu._pfGetIds(m)}if(n&&n.length){n=zk.parseInt(zUtl.getElementValue(n[0]));if(!isNaN(n)){a.rid=n}}for(var g=0,l=f?f.length:0;g<l;++g){var d=f[g].getElementsByTagName("c")[0],h=f[g].getElementsByTagName("d");if(!d){zk.error(mesg.ILLEGAL_RESPONSE+"Command required");continue}a.push(d={cmd:zUtl.getElementValue(d)});d.data=[];for(var c=d.data,e=h?h.length:0;--e>=0;){c.unshift(zAu._decodeData(zUtl.getElementValue(h[e])))}}zAu._cmdsQue.push(a);return true},_decodeData:function(g){var e=g.substring(1);switch(g.charAt(0).toLowerCase()){case"c":case"s":return e;case"n":return null;case"1":case"3":return true;case"0":case"2":return false;case"i":case"l":case"b":case"h":return parseInt(e);case"d":case"f":return parseFloat(e);case"t":return new Date(parseInt(e));case"j":return new zk.BigInteger(e);case"k":return new zk.BigDecimal(e);case"[":g=e;e=[];var b;for(var a=g.length,f=0,c=0;;++f){if(f>=a){if(a){e.push(zAu._decodeData(b||g.substring(c,f)))}return e}var h=g.charAt(f);if(h=="\\"){if(!b){b=g.substring(c,f)}b+=g.charAt(++f)}else{if(h==","){e.push(zAu._decodeData(b||g.substring(c,f)));c=f+1;b=null}else{if(b){b+=h}}}}}return e},process:function(d,a){var c=[];for(var b=arguments.length;--b>0;){c.unshift(zAu._decodeData(arguments[b]))}zAu._process(d,c)},_process:function(c,b){var a=zAu.cmd0[c];if(a){a.apply(zAu,b);return}if(!b||!b.length){zAu.showError("ILLEGAL_RESPONSE","uuid is required for ",c);return}a=zAu.cmd1[c];if(a){b.splice(1,0,zk.Widget.$(b[0]));a.apply(zAu,b);return}zAu.showError("ILLEGAL_RESPONSE","Unknown command: ",c)},_cmdsQue:[],_seqId:1,_areqTmout:function(){var b=zAu._areq,a=zAu._areqInf;if(b&&b.readyState<3){zAu._areq=zAu._areqInf=null;try{if(typeof b.abort=="function"){b.abort()}}catch(c){}if(a.tmout<60000){a.tmout+=3000}zAu._areqResend(a)}},_areqResend:function(a,b){if(zAu._seqId==a.sid){zAu._preqInf=a;setTimeout(zAu._areqResend2,b?b:0)}},_areqResend2:function(){var a=zAu._preqInf;if(a){zAu._preqInf=null;if(zAu._seqId==a.sid){zAu._sendNow2(a)}}},_onRespReady:function(){try{var i=zAu._areq,j=zAu._areqInf;if(i&&i.readyState==4){zAu._areq=zAu._areqInf=null;if(j.tfn){clearTimeout(j.tfn)}if(zk.pfmeter){zAu.pfrecv(j.dt,zAu._pfGetIds(i))}if(zAu._revertpending){zAu._revertpending()}var a=i.getResponseHeader("ZK-SID");if(i.status==200){if(a&&a!=zAu._seqId){zAu._errcode="ZK-SID "+(a?"mismatch":"required");return}if(zAu.pushXmlResp(j.dt,i)){if(a&&++zAu._seqId>999){zAu._seqId=1}zAu._areqTry=0;zAu._preqInf=null}}else{if(!a||a==zAu._seqId){zAu._errcode=i.status;var c=zAu._eru["e"+i.status];if(typeof c=="string"){zUtl.go(c)}else{switch(i.status){default:if(!zAu._areqTry){break}case 12002:case 12030:case 12031:case 12152:case 12159:case 13030:case 503:if(!zAu._areqTry){zAu._areqTry=3}if(--zAu._areqTry){zAu._areqResend(j,200);return}}if(!zAu._ignorable&&!zk.unloading){var b=i.statusText;if(zAu.confirmRetry("FAILED_TO_RESPONSE",i.status+(b?": "+b:""))){zAu._areqTry=2;zAu._areqResend(j);return}}zAu._cleanupOnFatal(zAu._ignorable)}}}}}catch(g){if(!window.zAu){return}zAu._areq=zAu._areqInf=null;try{if(i&&typeof i.abort=="function"){i.abort()}}catch(h){}if(!zAu._ignorable&&!zk.unloading){var b=g.message;zAu._errcode="[Receive] "+b;if(zAu.confirmRetry("FAILED_TO_RESPONSE",(b&&b.indexOf("NOT_AVAILABLE")<0?b:""))){zAu._areqResend(j);return}}zAu._cleanupOnFatal(zAu._ignorable)}if(zAu._sendPending&&!zAu._areq&&!zAu._preqInf){zAu._sendPending=false;var f=zk.Desktop.all;for(var d in f){zAu._send2(f[d],0)}}zAu.doCmds()},_send:function(e,d,f){var c=d.opts,a=zk.clickFilterDelay;if(a>0&&c&&c.ctl){if(zAu._areqInf&&zAu._areqInf.ctli==d.uuid&&zAu._areqInf.ctlc==d.cmd){return}var b=zUtl.now();if(zAu._ctli==d.uuid&&zAu._ctlc==d.cmd&&b-zAu._ctlt<a){return}zAu._ctlt=b;zAu._ctli=d.uuid;zAu._ctlc=d.cmd}e._aureqs.push(d);zAu._send2(e,f)},_send2:function(a,b){if(!b){b=0}if(a&&b>=0){setTimeout(function(){zAu._sendNow(a)},b)}},_sendNow:function(l){var t=l._aureqs;if(t.length==0){return}if(zk.mounting){zk.afterMount(function(){zAu._sendNow(l)});return}if(zAu._areq||zAu._preqInf){zAu._sendPending=true;return}try{zWatch.fire("onSend",null,u)}catch(r){zk.error(r.message)}var u=true,h=true,f,i;for(var q=t.length;--q>=0;){var c=t[q],g=c.opts;if(u&&(!g||!g.ignorable)){h=false;if(!g||!g.implicit){u=false}}if(g&&g.ctl&&!f){f=c.target.uuid;i=c.name}}zAu._ignorable=h;var n="",m=zk.Event;for(var q=0,a=t.length;a;++q,--a){var c=t.shift(),b=c.name,v=c.target;n+="&cmd."+q+"="+b;if(v){n+="&uuid."+q+"="+v.uuid}var w=c.data;if(w&&w.marshal){w=w.marshal()}if(w!=null){if(!w.$array){w=[w]}for(var o=0,p=w.length;o<p;++o){var s=w[o];n+="&data."+q+"="+(s!=null?encodeURIComponent(s):"_z~nil")}}}if(n){zAu._sendNow2({sid:zAu._seqId,uri:zAu.comURI(null,l),dt:l,content:"dtid="+l.id+n,ctli:f,ctlc:i,implicit:u,ignorable:h,tmout:0})}},_sendNow2:function(a){var c=zUtl.newAjax(),b=zAu._useQS(a)?a.uri+"?"+a.content:null;zAu.sentTime=zUtl.now();try{c.onreadystatechange=zAu._onRespReady;c.open("POST",b?b:a.uri,true);c.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");c.setRequestHeader("ZK-SID",a.sid);if(zAu._errcode){c.setRequestHeader("ZK-Error-Report",zAu._errcode);delete zAu._errcode}if(zk.pfmeter){zAu._pfsend(a.dt,c)}zAu._areq=c;zAu._areqInf=a;if(zk.resendDelay>0){zAu._areqInf.tfn=setTimeout(zAu._areqTmout,zk.resendDelay+a.tmout)}if(b){c.send(null)}else{c.send(a.content)}if(!a.implicit){zk.startProcessing(zk.procDelay)}}catch(f){try{if(typeof c.abort=="function"){c.abort()}}catch(d){}if(!a.ignorable&&!zk.unloading){var g=f.message;zAu._errcode="[Send] "+g;if(zAu.confirmRetry("FAILED_TO_SEND",g)){zAu._areqResend(a);return}}zAu._cleanupOnFatal(a.ignorable)}},_useQS:zk.ie?function(a){var c=a.content,b=c.length,d,e;if(b+a.uri.length<2000){while(--b>=0){e=c.charAt(b);if(e=="%"&&d>="8"){return false}d=e}return true}return false}:zk.$void,doCmds:function(){_zkmt=zUtl.now();for(var g;g=zAu._dcfns.shift();){g()}var d,c=0,i=zAu._cmdsQue,f=zAu._resId;for(;c<i.length;++c){if(zk.mounting){return}var a=i[c];if(f==a.rid||!f||!a.rid||zAu._dtids.length>1){i.splice(c,1);var b=f;if(a.rid){if((f=a.rid+1)>=1000){f=1}zAu._resId=f}try{if(zAu._doCmds1(a)){c=-1;if(zk.pfmeter){var g=function(){zAu.pfdone(a.dt,a.pfIds)};if(zk.mounting){zAu._dcfns.push(g)}else{g()}}}else{zAu._resId=b;i.splice(c,0,a);return}}catch(h){if(!d){d=h}c=-1}}}if(i.length){setTimeout(function(){if(i.length&&f==zAu._resId){var k=i[0].rid;for(c=1;c<i.length;++c){var e=i[c].rid,j=e-k;if(j>500||(j<0&&j>-500)){k=e}}zAu._resId=k;zAu.doCmds()}},3600)}else{zAu._ckProcessng()}if(d){throw d}},_dcfns:[],_doCmds1:function(a){var d;try{while(a&&a.length){if(zk.mounting){return false}d=true;var b=a.shift();try{zAu._process(b.cmd,b.data)}catch(c){zAu.showError("FAILED_TO_PROCESS",null,b.cmd,c);throw c}}}finally{if(d&&(!a||!a.length)){zWatch.fire("onResponse",{timeout:0})}}return true},_moreCmds:function(){return zAu._cmdsQue.length},_cleanupOnFatal:function(c){for(var a in zAu._metas){var b=zAu._metas[a];if(b&&b.cleanupOnFatal){b.cleanupOnFatal(c)}}}};zAu.cmd0={bookmark:function(a){zHistory.bookmark(a)},obsolete:function(b,a){zAu._cleanupOnFatal();zk.error(a)},alert:function(a){zDom.alert(a)},redirect:function(a,c){try{zUtl.go(a,false,c)}catch(b){if(!zk.confirmClose){throw b}}},title:function(a){document.title=a},script:function(dt0){eval(dt0)},echo:function(a){zAu.send(new zk.Event(zk.Desktop.$(a),"dummy",null,{ignorable:true}))},clientInfo:function(a){zAu._cInfoReg=true;zAu.send(new zk.Event(zk.Desktop.$(a),"onClientInfo",[new Date().getTimezoneOffset(),screen.width,screen.height,screen.colorDepth,zDom.innerWidth(),zDom.innerHeight(),zDom.innerX(),zDom.innerY()]))},download:function(a){if(a){var c=zDom.$("zk_download");if(c){c.src=a}else{var b='<iframe src="'+a+'" id="zk_download" name="zk_download" style="visibility:hidden;width:0;height:0;border:0" frameborder="0"></iframe>';zk.insertHTMLBeforeEnd(document.body,b)}}},print:function(){window.print()},scrollBy:function(a,b){window.scrollBy(a,b)},scrollTo:function(a,b){window.scrollTo(a,b)},resizeBy:function(a,b){window.resizeBy(a,b)},resizeTo:function(a,b){window.resizeTo(a,b)},moveBy:function(a,b){window.moveBy(a,b)},moveTo:function(a,b){window.moveTo(a,b)},cfmClose:function(a){zk.confirmClose=a},showBusy:function(b,a){var c=zDom.$("zk_showBusy");if(c){c.parentNode.removeChild(c);zk.restoreDisabled()}if(a=="true"){c=zDom.$("zk_loadprog");if(c){c.parentNode.removeChild(c)}c=zDom.$("zk_prog");if(c){c.parentNode.removeChild(c)}c=zDom.$("zk_showBusy");if(!c){b=b==""?mesg.PLEASE_WAIT:b;zUtl.progressbox("zk_showBusy",b,true);zk.disableAll()}}}};zAu.cmd1={wrongValue:function(f,g,b){for(var e=f.split(","),d=0,c=e.length;d<c;d++){g=zDom.$(e[d]);if(g){g=$real(g);var a=g.value;g.defaultValue=a+"_err";if(a!=g.value){g.value=a}if(zAu.valid){zAu.valid.errbox(g.id,arguments[d+2],true)}else{zDom.alert(arguments[d+2])}}else{if(!e[d]){zDom.alert(arguments[d+2])}}}},setAttr:function(b,d,a,c){d.set(a,c,true)},outer:function(uuid,wgt,code){zAu.stub=function(newwgt){wgt._replaceWgt(newwgt)};zk.mounting=true;eval(code)},addAft:function(uuid,wgt,code){if(!wgt){var j=uuid.indexOf(":");if(j>=0){wgt=zk.Widget.$(uuid.substring(0,j));if(!wgt){uuid=uuid.substring(j+1);wgt=zk.Widget.$(uuid);if(wgt){zAu.cmd1.addChd(uuid,wgt,code)}else{zAu.stub=zAu.cmd1._asBodyChild;zk.mounting=true;eval(code)}return}}}zAu.stub=function(child){var p=wgt.parent;p.insertBefore(child,wgt.nextSibling);if(p.$instanceof(zk.Desktop)){zAu.cmd1._asBodyChild(child)}};zk.mounting=true;eval(code)},addBfr:function(uuid,wgt,code){zAu.stub=function(child){wgt.parent.insertBefore(child,wgt)};zk.mounting=true;eval(code)},addChd:function(uuid,wgt,code){zAu.stub=function(child){wgt.appendChild(child)};zk.mounting=true;eval(code)},_asBodyChild:function(a){a.insertHTML(document.body,"beforeEnd")},rm:function(a,c){if(c){var b=c.parent;if(b){b.removeChild(c)}else{b=c.getNode();c.unbind_();zDom.remove(b)}}},focus:function(a,b){b.focus()},closeErrbox:function(c,d){if(zAu.valid){var b=c.trim().split(",");for(var a=b.length;--a>=0;){zAu.valid.closeErrbox(b[a],false,true)}}},submit:function(a,b){setTimeout(function(){if(b&&b.submit){b.submit()}},50)},invoke:function(d,f,e,c){var b=[];for(var a=arguments.length;--a>2;){b.unshift(arguments[a])}f[e].apply(f,b)},echo2:function(a,d,c,b){zAu.send(new zk.Event(d,"echo",b!=null?[c,b]:[c],{ignorable:true}))}};
zNumFormat={format:function(a,b){if(!b){return""}return""+b},unformat:function(b,a){if(!a){return{raw:a,divscale:0}}var h=0,d,k,c,i;for(var f=0,g=a.length;f<g;++f){c=a.charAt(f);i=true;if(c==zk.PERCENT){h+=2}else{if(c==zk.PER_MILL){h+=3}else{if(c=="("){d=true}else{if(c!="+"){i=false}}}}if(!i){i=(c<"0"||c>"9")&&c!=zk.DECIMAL&&c!=zk.MINUS&&c!="+"&&(zk.isWhitespace(c)||c==zk.GROUPING||c==")"||(b&&b.indexOf(c)>=0))}if(i){if(!k){k=a.substring(0,f)}}else{var e=c==zk.MINUS?"-":c==zk.DECIMAL?".":c;if(c!=e&&!k){k=a.substring(0,f)}if(k){k+=e}}}if(d){if(!k){k=a}if(k.length){if(k.charAt(0)=="-"){k=k.substring(1)}else{k="-"+k}}}return{raw:k||a,divscale:h}}};
zMsgFormat={format:function(e){var d=0,g="";for(var c=0,a=e.length,f,b;c<a;++c){f=e.charAt(c);if(f=="\\"){if(++c>=a){break}g+=e.substring(d,c);f=e.charAt(c);switch(f){case"n":f="\n";break;case"t":f="\t";break;case"r":f="\r";break}g+=f;d=c+1}else{if(f=="{"){b=e.indexOf("}",c+1);if(b<0){break}g+=e.substring(d,c)+arguments[zk.parseInt(e.substring(c+1,b))+1];d=c=b+1}}}if(g){g+=e.substring(d)}return g||e}};
_z='zul';if(!zk.$import(_z)){try{_zkpk=zk.$package(_z);
zul.Widget=zk.$extends(zk.Widget,{getContext:function(){return this._context},setContext:function(a){if(zk.Widget.isInstance(a)){a="uuid("+a.uuid+")"}this._context=a},getPopup:function(){return this._popup},setPopup:function(a){if(zk.Widget.isInstance(a)){a="uuid("+a.uuid+")"}this._popup=a},getTooltip:function(){return this._tooltip},setTooltip:function(a){if(zk.Widget.isInstance(a)){a="uuid("+a.uuid+")"}this._tooltip=a},getCtrlKeys:function(){return this._ctrlKeys},setCtrlKeys:function(i){if(this._ctrlKeys!=i){if(!i){this._ctrlKeys=this._parsedCtlKeys=null;return}var g=["","","","",""],c=0;for(var e=0,f=i.length;e<f;++e){var a=i.charAt(e);switch(a){case"^":case"$":case"@":if(c){throw"Combination of Shift, Alt and Ctrl not supported: "+i}c=a=="^"?1:a=="@"?2:3;break;case"#":var b=e+1;for(;b<f;++b){var d=i.charAt(b);if((d>"Z"||d<"A")&&(d>"z"||d<"a")&&(d>"9"||d<"0")){break}}if(b==e+1){throw"Unexpected character "+a+" in "+i}var l=i.substring(e+1,b).toLowerCase();if("pgup"==l){a="A"}else{if("pgdn"==l){a="B"}else{if("end"==l){a="C"}else{if("home"==l){a="D"}else{if("left"==l){a="E"}else{if("up"==l){a="F"}else{if("right"==l){a="G"}else{if("down"==l){a="H"}else{if("ins"==l){a="I"}else{if("del"==l){a="J"}else{if(l.length>1&&l.charAt(0)=="f"){var h=zk.parseInt(l.substring(1));if(h==0||h>12){throw"Unsupported function key: #f"+h}a="O".$inc(h)}else{throw"Unknown #"+l+" in "+i}}}}}}}}}}}g[c]+=a;c=0;e=b-1;break;default:if(!c||((a>"Z"||a<"A")&&(a>"z"||a<"a")&&(a>"9"||a<"0"))){throw"Unexpected character "+a+" in "+i}if(c==3){throw"$a - $z not supported (found in "+i+"). Allowed: $#f1, $#home and so on."}if(a<="Z"&&a>="A"){a=a.$inc("a".$sub("A"))}g[c]+=a;c=0;break}}this._parsedCtlKeys=g;this._ctrlKeys=i}},doClick_:function(b){if(!b._popuped){var a=this._smartFellow(this._popup);if(a){b._popuped=true;a.open(this,[b.data.pageX,b.data.pageY],null,{sendOnOpen:true});b.stop()}}this.$supers("doClick_",arguments)},doRightClick_:function(b){if(!b._ctxed){var a=this._smartFellow(this._context);if(a){b._ctxed=true;a.open(this,[b.data.pageX,b.data.pageY],null,{sendOnOpen:true});b.stop()}}this.$supers("doRightClick_",arguments)},doMouseOver_:function(a){if(!a._tiped&&zTooltip.beforeBegin(this)){var b=this._smartFellow(this._tooltip);if(b){a._tiped=true;zTooltip.begin(b,this)}}this.$supers("doMouseOver_",arguments)},doMouseOut_:function(a){zTooltip.end(this);this.$supers("doMouseOut_",arguments)},_smartFellow:function(a){return a?a.startsWith("uuid(")&&a.endsWith(")")?zk.Widget.$(a.substring(5,a.length-1)):this.getFellow(a,true):null}});
(_zkwg=_zkpk.Widget).prototype.className='zul.Widget';zul.LabelImageWidget=zk.$extends(zul.Widget,{getLabel:function(){var a=this._label;return a?a:""},setLabel:function(a){if(a==null){a=""}if(this._label!=a){this._label=a;this.updateDomContent_()}},getImage:function(){return this._image},setImage:function(a){if(this._image!=a){this._image=a;this.updateDomContent_()}},getHoverImage:function(){return this._himg},setHoverImage:function(a){this._himg=a},updateDomContent_:function(){this.rerender()},domContent_:function(){var b=zUtl.encodeXML(this.getLabel()),a=this._image;if(!a){return b}a='<img src="'+a+'" align="absmiddle" />';return b?a+" "+b:a},doMouseOver_:function(){var b=this._himg;if(b){var a=this.getImageNode_();if(a){a.src=b}}this.$supers("doMouseOver_",arguments)},doMouseOut_:function(){if(this._himg){var a=this.getImageNode_();if(a){a.src=this._image}}this.$supers("doMouseOut_",arguments)},getImageNode_:function(){if(!this._eimg&&this._image){this._eimg=zDom.firstChild(this.getNode(),"IMG",true)}return this._eimg},unbind_:function(){this._eimg=null;this.$supers("unbind_",arguments)}});
(_zkwg=_zkpk.LabelImageWidget).prototype.className='zul.LabelImageWidget';
}finally{zPkg.end(_z);}}