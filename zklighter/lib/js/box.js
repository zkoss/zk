_z='zul.box';if(!zk.$import(_z)){try{_zkpk=zk.$package(_z);
zul.box.Box=zk.$extends(zul.Widget,{_mold:"vertical",_align:"start",_pack:"start",isVertical:function(){return"vertical"==this._mold},getOrient:function(){return this._mold},getAlign:function(){return this._align},setAlign:function(a){if(this._align!=a){this._align=a}},getPack:function(){return this._pack},setPack:function(a){if(this._pack!=a){this._pack=a}},getZclass:function(){var a=this._zclass;return a!=null?a:this.isVertical()?"z-vbox":"z-hbox"},onChildVisible_:function(b,a){this.$supers("onChildVisible_",arguments);if(this.desktop){this._fixChildDomVisible(b,a)}},replaceChildHTML_:function(a){this.$supers("replaceChildHTML_",arguments);this._fixChildDomVisible(a,a._visible)},_fixChildDomVisible:function(c,a){var b=c.getSubnode("chdex");if(b){b.style.display=a?"":"none"}b=c.getSubnode("chdex2");if(b){b.style.display=a?"":"none"}if(this.lastChild==c){b=c.previousSibling;if(b){b=b.getSubnode("chdex2");if(b){b.style.display=a?"":"none"}}}},insertChildHTML_:function(d,a,c){if(a){zDom.insertHTMLBefore(a.getSubnode("chdex"),this.encloseChildHTML_(d))}else{var b=this.getNode();if(this.isVertical()){b=b.tBodies[0]}else{b=b.tBodies[0].rows[0]}zDom.insertHTMLBeforeEnd(b,this.encloseChildHTML_(d,true))}d.bind_(c)},removeChildHTML_:function(b,a){this.$supers("removeChildHTML_",arguments);zDom.remove(b.uuid+"$chdex");zDom.remove(b.uuid+"$chdex2");if(a&&this.lastChild==a){zDom.remove(a.uuid+"$chdex2")}},encloseChildHTML_:function(g,c,e){var b=[];if(this.isVertical()){b.push('<tr id="',g.uuid,'$chdex"',this._childOuterAttrs(g),"><td",this._childInnerAttrs(g),">");g.redraw(b);b.push("</td></tr>");if(g.nextSibling){b.push(this._spacingHTML(g))}else{if(c){var f=g.previousSibling;if(f){b.unshift(this._spacingHTML(f))}}}}else{b.push('<td id="',g.uuid,'$chdex"',this._childOuterAttrs(g),this._childInnerAttrs(g),">");g.redraw(b);b.push("</td>");if(g.nextSibling){b.push(this._spacingHTML(g))}else{if(c){var f=g.previousSibling;if(f){b.unshift(this._spacingHTML(f))}}}}if(!e){return b.join("")}for(var d=0,a=b.length;d<a;++d){e.push(b[d])}},_spacingHTML:function(g){var a=[],f=this.spacing,e=f&&f.startsWith("0")&&(f.length==1||zk.isDigit(f.charAt(1))),c=this.isVertical(),b=f?(c?"height:":"width:")+f:"";a.push("<t",c?"r":"d",' id="',g.uuid,'$chdex2" class="',this.getZclass(),'-sep"');var d=b;if(e||!g.isVisible()){d="display:none"+d}if(d){a.push(' style="',d,'"')}a.push(">",c?"<td>":"",zUtl.img0,c?"</td></tr>":"</td>");return a.join("")},_childOuterAttrs:function(c){var b="";if(c.$instanceof(zul.box.Splitter)){b=' class="'+c.getZclass()+'-outer"'}else{if(this.isVertical()){var a=this.getPack();if(a){b=' valign="'+zul.box.Box._toValign(a)+'"'}}else{return""}}if(!c.isVisible()){b+=' style="display:none"'}return b},_childInnerAttrs:function(b){var g="",h=this.isVertical(),d=zul.box.Splitter;if(b.$instanceof(d)){return h?' class="'+b.getZclass()+'-outer-td"':""}var l=h?this.getAlign():this.getPack();if(l){g+=' align="'+zul.box.Box._toHalign(l)+'"'}var a="",f=this._sizes;if(f){for(var e=0,i=f.length,k=this.firstChild;k&&e<i;k=k.nextSibling){if(b==k){a=(h?"height:":"width:")+f[e];break}if(!k.$instanceof(d)){++e}}}if(!h&&!b.isVisible()){a+=";display:none"}return a?g+' style="'+a+'"':g},_bindWatch:function(){if(!this._watchBound){this._watchBound=true;zWatch.listen("onSize",this);zWatch.listen("onVisible",this);zWatch.listen("onHide",this)}},unbind_:function(){if(this._watchBound){this._watchBound=false;zWatch.unlisten("onSize",this);zWatch.unlisten("onVisible",this);zWatch.unlisten("onHide",this)}this.$supers("unbind_",arguments)},onSize:_zkf=function(){if(!this.isRealVisible()){return}var b=zul.box.Splitter;for(var k=this.firstChild;;k=k.nextSibling){if(!k){return}if(k.$instanceof(b)){break}}var h=this.isVertical(),e=this.getNode();if(zk.ie){var a=e.parentNode;if(zDom.tag(a)=="TD"){var o=h?"height":"width",l=h?a.clientHeight:a.clientWidth;if((e.style[o]=="100%"||this._box100)&&l){e.style[o]=l+"px";this._box100=true}}}var f=h?e.rows:e.rows[0].cells,m=h?zDom.revisedHeight(e,e.offsetHeight):zDom.revisedWidth(e,e.offsetWidth);for(var g=f.length;--g>=0;){var j=f[g];if(zDom.isVisible(j)){if(h){var n=j.offsetHeight;if(j.id&&!j.id.endsWith("$chdex2")){if(j.cells.length){var k=j.cells[0];k.style.height=zDom.revisedHeight(k,g?n:m)+"px"}j.style.height=""}m-=n}else{var n=j.offsetWidth;if(j.id&&!j.id.endsWith("$chdex2")){j.style.width=zDom.revisedWidth(j,g?n:m)+"px"}m-=n}}}},onVisible:_zkf,onHide:_zkf},{_toValign:function(a){return a?"start"==a?"top":"center"==a?"middle":"end"==a?"bottom":a:null},_toHalign:function(a){return a?"start"==a?"left":"end"==a?"right":a:null}});
(_zkwg=_zkpk.Box).prototype.className='zul.box.Box';_zkmd={};
_zkmd['vertical']=function(b){b.push("<table",this.domAttrs_(),zUtl.cellps0,">");for(var a=this.firstChild;a;a=a.nextSibling){this.encloseChildHTML_(a,false,b)}b.push("</table>")};
_zkmd['horizontal']=function(c){c.push("<table",this.domAttrs_(),zUtl.cellps0,"><tr");var b=this.getAlign();if(b){c.push(' valign="',zul.box.Box._toValign(b),'"')}c.push(">");for(var a=this.firstChild;a;a=a.nextSibling){this.encloseChildHTML_(a,false,c)}c.push("</tr></table>")};
zkmld(_zkwg,_zkmd);zul.box.Splitter=zk.$extends(zul.Widget,{_collapse:"none",_open:true,isVertical:function(){var a=this.parent;return !a||a.isVertical()},getOrient:function(){var a=this.parent;return a?a.getOrient():"vertical"},isOpen:function(){return this._open},setOpen:function(g,k){if(this._open!=g){this._open=g;var e=this.getNode();if(!e){return}var n=this.getCollapse();if(!n||"none"==n){return}var f=this.getSubnode("chdex"),m=zDom.tag(f),h=this.isVertical(),d=this.$class,j=n=="before",c=j?d._prev(f,m):d._next(f,m),i=zk.Widget.$(c),b=h?"height":"width",l;if(c){i.setDomVisible_(c,g);i.parent._fixChildDomVisible(i,g);l=zk.parseInt(c.style[b]);if(!j&&i&&!i.nextSibling){var a=this.getSubnode("chdex2");if(a){a.style.display=g?"":"none";l+=zk.parseInt(a.style[b])}}}c=j?d._next(f,m):d._prev(f,m);if(c){l=zk.parseInt(c.style[b])+(g?-l:l);if(l<0){l=0}c.style[b]=l+"px";if(g){zWatch.fireDown("onSize",null,i)}}e.style.cursor=!g?"default":h?"s-resize":"e-resize";this._fixNSDomClass();this._fixbtn();this._fixszAll();if(!k){this.fire("onOpen",g)}}},getCollapse:function(){return this._collapse},setCollapse:function(a){if(this._collapse!=a){this._collapse=a;if(this.desktop){this._fixbtn();this._fixsz()}}},getZclass:function(){var a=this._zclass;return a?a:"z-splitter"+(this.isVertical()?"-ver":"-hor")},setZclass:function(){this.$supers("setZclass",arguments);if(this.desktop){this._fixDomClass(true)}},bind_:function(){this.$supers("bind_",arguments);var g=this.parent;if(g){g._bindWatch()}zWatch.listen("onSize",this);zWatch.listen("beforeSize",this);zWatch.listen("onVisible",this);this._fixDomClass();var f=this.getNode(),e=this.$class;vert=this.isVertical();btn=this.button=this.getSubnode("btn");f.style.cursor=this.isOpen()?vert?"s-resize":"e-resize":"default";btn.style.cursor="pointer";if(zk.ie){zEvt.listen(btn,"mouseover",e.onover);zEvt.listen(btn,"mouseout",e.onout)}zEvt.listen(btn,"click",e.onclick);this._fixbtn();this._drag=new zk.Draggable(this,f,{constraint:this.getOrient(),ignoredrag:e._ignoresizing,ghosting:e._ghostsizing,overlay:true,snap:e._snap,endeffect:e._endDrag});if(!this.isOpen()){var h=this.getSubnode("chdex"),a=zDom.tag(h),d=this.getCollapse();if(!d||"none"==d){return}var c=d=="before"?e._prev(h,a):e._next(h,a);zDom.hide(c);var b=zk.Widget.$(c);b.parent._fixChildDomVisible(b,false);this._fixNSDomClass()}},unbind_:function(){zWatch.unlisten("onSize",this);zWatch.unlisten("beforeSize",this);zWatch.unlisten("onVisible",this);var b=this.$class,a=this.button;if(a){if(zk.ie){zEvt.unlisten(a,"mouseover",b.onover);zEvt.unlisten(a,"mouseout",b.onout)}zEvt.unlisten(a,"click",b.onclick)}this._drag.destroy();this._drag=null;this.$supers("unbind_",arguments)},_fixDomClass:function(b){var c=this.getNode(),d=c.parentNode;if(d){var a=this.isVertical(),e=this.getZclass();if(a){d=d.parentNode}if(d&&d.id.endsWith("$chdex")){d.className=e+"-outer";if(a){c.parentNode.className=e+"-outer-td"}}}if(b){this._fixbtn()}},_fixNSDomClass:function(){var b=this.getNode(),c=this.getZclass(),a=this.isOpen();if(a&&zDom.hasClass(b,c+"-ns")){zDom.rmClass(b,c+"-ns")}else{if(!a&&!zDom.hasClass(b,c+"-ns")){zDom.addClass(b,c+"-ns")}}},_fixbtn:function(){var b=this.button,a=this.getCollapse();if(!a||"none"==a){b.style.display="none"}else{var d=this.getZclass(),c=a=="before";if(!this.isOpen()){c=!c}if(this.isVertical()){zDom.rmClass(b,d+"-btn-"+(c?"b":"t"));zDom.addClass(b,d+"-btn-"+(c?"t":"b"))}else{zDom.rmClass(b,d+"-btn-"+(c?"r":"l"));zDom.addClass(b,d+"-btn-"+(c?"l":"r"))}b.style.display=""}},_fixsz:_zkf=function(){if(!this.isRealVisible()){return}var d=this.getNode(),b=d.parentNode;if(b){var c=this.button,a="before"==this.getCollapse();if(this.isVertical()){if(a){b.vAlign="top";b.style.backgroundPosition="top left"}else{b.vAlign="bottom";b.style.backgroundPosition="bottom left"}d.style.width="";d.style.width=b.clientWidth+"px";c.style.marginLeft=((d.offsetWidth-c.offsetWidth)/2)+"px"}else{if(a){b.align="left";b.style.backgroundPosition="top left"}else{b.align="right";b.style.backgroundPosition="top right"}d.style.height="";d.style.height=(zk.safari?b.parentNode.clientHeight:b.clientHeight)+"px";c.style.marginTop=((d.offsetHeight-c.offsetHeight)/2)+"px"}}},onVisible:_zkf,onSize:_zkf,beforeSize:function(){this.getNode().style[this.isVertical()?"width":"height"]=""},_fixszAll:function(){var a=this.parent;if(a){this.$class._fixKidSplts(a.getNode())}else{this._fixsz()}}},{onclick:function(a){var b=zk.Widget.$(a);zDom.rmClass(b.button,b.getZclass()+"-btn-visi");b.setOpen(!b.isOpen())},_ignoresizing:function(i,a,f){var h=i.control;if(!h.isOpen()){return true}var d=i.run={},c=h.getNode();d.org=zDom.cmOffset(c);var e=h.getSubnode("chdex"),g=zDom.tag(e),b=zul.box.Splitter;d.prev=b._prev(e,g);d.next=b._next(e,g);d.prevwgt=h.previousSibling;d.nextwgt=h.nextSibling;d.z_offset=zDom.cmOffset(c);return false},_ghostsizing:function(a,e,b){var d=a.node;var c='<div id="zk_ddghost" style="font-size:0;line-height:0;background:#AAA;position:absolute;top:'+e[1]+"px;left:"+e[0]+"px;width:"+zDom.offsetWidth(d)+"px;height:"+zDom.offsetHeight(d)+'px;"></div>';document.body.insertAdjacentHTML("afterBegin",c);return zDom.$("zk_ddghost")},_endDrag:function(i){var h=i.control,c=h.getNode(),b=zul.box.Splitter,e=b._fixLayout(h),d=i.run,f,a;if(h.isVertical()){f=d.z_point[1];a="height";if(d.next&&d.next.cells.length){d.next=d.next.cells[0]}if(d.prev&&d.prev.cells.length){d.prev=d.prev.cells[0]}}else{f=d.z_point[0];a="width"}if(!f){return}if(d.nextwgt){zWatch.fireDown("beforeSize",null,d.nextwgt)}if(d.prevwgt){zWatch.fireDown("beforeSize",null,d.prevwgt)}if(d.next){var g=zk.parseInt(d.next.style[a]);g-=f;if(g<0){g=0}d.next.style[a]=g+"px"}if(d.prev){var g=zk.parseInt(d.prev.style[a]);g+=f;if(g<0){g=0}d.prev.style[a]=g+"px"}if(d.nextwgt){zWatch.fireDown("onSize",null,d.nextwgt)}if(d.prevwgt){zWatch.fireDown("onSize",null,d.prevwgt)}b._unfixLayout(e);h._fixszAll();i.run=null},_snap:function(c,g){var d=c.run,e=c.control,b=g[0],f=g[1];if(e.isVertical()){if(f<=d.z_offset[1]-d.prev.offsetHeight){f=d.z_offset[1]-d.prev.offsetHeight}else{var a=d.z_offset[1]+d.next.offsetHeight-e.getNode().offsetHeight;if(f>a){f=a}}}else{if(b<=d.z_offset[0]-d.prev.offsetWidth){b=d.z_offset[0]-d.prev.offsetWidth}else{var a=d.z_offset[0]+d.next.offsetWidth-e.getNode().offsetWidth;if(b>a){b=a}}}d.z_point=[b-d.z_offset[0],f-d.z_offset[1]];return[b,f]},_next:function(b,a){return zDom.nextSibling(zDom.nextSibling(b,a),a)},_prev:function(b,a){return zDom.previousSibling(zDom.previousSibling(b,a),a)},_fixKidSplts:function(c){if(zDom.isVisible(c)){var b=c.z_wgt,a=zul.box.Splitter;if(b&&b.$instanceof(a)){b._fixsz()}for(c=c.firstChild;c;c=c.nextSibling){a._fixKidSplts(c)}}}});if(zk.ie){zul.box.Splitter.onover=function(a){var b=zk.Widget.$(a);zDom.addClass(b.button,b.getZclass()+"-btn-visi")};zul.box.Splitter.onout=function(a){var b=zk.Widget.$(a);zDom.rmClass(b.button,b.getZclass()+"-btn-visi")}}if(zk.opera){zul.box.Splitter._fixLayout=function(c){var a=c.parent.getNode();if(a.style.tableLayout!="fixed"){var b=[a,a.style.tableLayout];a.style.tableLayout="fixed";return b}};zul.box.Splitter._unfixLayout=function(a){if(a){a[0].style.tableLayout=a[1]}}}else{zul.box.Splitter._fixLayout=zul.box.Splitter._unfixLayout=zk.$void};
(_zkwg=_zkpk.Splitter).prototype.className='zul.box.Splitter';_zkmd={};
_zkmd['default']=function(a){a.push("<div",this.domAttrs_(),'><span id="',this.uuid,'$btn" style="display:none"></span></div>')};
zkmld(_zkwg,_zkmd);
}finally{zPkg.end(_z);}}