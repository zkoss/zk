_z='zul.grid';if(!zk.$import(_z)){try{_zkpk=zk.$package(_z);
zul.grid.HeaderWidget=zk.$extends(zul.LabelImageWidget,{getAlign:function(){return this._align},setAlign:function(a){if(this._align!=a){this._align=a;this.invalidateWhole_()}},getValign:function(){return this._valign},setValign:function(a){if(this._valign!=a){this._valign=a;this.invalidateWhole_()}},invalidateWhole_:function(){var a=this.getOwner();if(wqt){a.rerender()}},getOwner:function(){return this.parent?this.parent.parent:null},isSortable_:function(){return false},getColAttrs:function(){return(this._align?' align="'+this._align+'"':"")+(this._valign?' valign="'+this._valign+'"':"")},setVisible:function(a){if(this.isVisible()!=a){this.$supers("setVisible",arguments);this.invalidateWhole()}},domAttrs_:function(b){var a=this.$supers("domAttrs_",arguments);return a+this.getColAttrs()},bind_:function(){this.$supers("bind_",arguments);if(this.parent.isSizable()){this._initsz()}this._fixedFaker()},unbind_:function(){if(this._drag){this._drag.destroy();this._drag=null}this.$supers("unbind_",arguments)},_initsz:function(){var b=this.getNode();if(b&&!this._drag){var a=this.$class;this._drag=new zk.Draggable(this,null,{revert:true,constraint:"horizontal",ghosting:a._ghostsizing,endghosting:a._endghostsizing,snap:a._snapsizing,ignoredrag:a._ignoresizing,endeffect:a._aftersizing})}},_fixedFaker:function(){var f=this.getNode(),d=zDom.cellIndex(f),b=this.getOwner();for(var c,a=this.$class._faker,e=a.length;--e>=0;){c=b["e"+a[e]];if(c&&!this.getSubnode(a[e])){c[c.cells.length>d?"insertBefore":"appendChild"](this._createFaker(f,a[e]),c.cells[d])}}},_createFaker:function(e,c){var a=document.createElement("TH"),b=document.createElement("DIV");a.id=e.id+"$"+c;a.className=e.className;a.style.cssText=e.style.cssText;b.style.overflow="hidden";a.appendChild(b);return a},doClick_:function(a){if(!zk.dragging&&zk.Widget.$(a.nativeTarget)==this&&this.isSortable_()&&zDom.tag(a.nativeTarget)!="INPUT"){this.fire("onSort");a.stop()}},doMouseMove_:function(a){if(zk.dragging||!this.parent.isSizable()){return}var c=this.getNode(),b=zDom.revisedOffset(c);if(this._insizer(a.data.pageX-b[0])){zDom.addClass(c,this.getZclass()+"-sizing")}else{zDom.rmClass(c,this.getZclass()+"-sizing")}},doMouseOut_:function(a){if(this.parent.isSizable()){var b=this.getNode();zDom.rmClass(b,this.getZclass()+"-sizing")}},_insizer:function(a){return a>=this.getNode().offsetWidth-10}},{_faker:["hdfaker","bdfaker","ftfaker"],_onSizingMarshal:function(){return[this.index,this.uuid,this.width,this.keys?this.keys.marshal():""]},_ghostsizing:function(d,c,a){var e=d.control,b=e.getOwner().eheadtbl;of=zDom.revisedOffset(b),n=e.getNode();c[1]=of[1];c[0]+=zDom.offsetWidth(n);document.body.insertAdjacentHTML("afterBegin",'<div id="zk_hdghost" style="position:absolute;top:'+c[1]+"px;left:"+c[0]+"px;width:3px;height:"+zDom.offsetHeight(b.parentNode.parentNode)+'px;background:darkgray"></div>');return zDom.$("zk_hdghost")},_endghostsizing:function(b,a){b._zszofs=zDom.revisedOffset(b.node)[0]-zDom.revisedOffset(a)[0]},_snapsizing:function(b,c){var d=b.control.getNode(),a=zDom.revisedOffset(d);c[0]+=zDom.offsetWidth(d);if(a[0]+b._zmin>=c[0]){c[0]=a[0]+b._zmin}return c},_ignoresizing:function(c,e,a){var d=c.control,f=d.getNode(),b=zDom.revisedOffset(f);if(d._insizer(e[0]-b[0])){c._zmin=10+zDom.padBorderWidth(f);return false}return true},_aftersizing:function(h,l){var q=h.control,c=q.getNode(),b=q.getOwner(),d=h._zszofs,o=b.eheadtbl,i=o.tBodies[0].rows[0],a=zDom.revisedWidth(c,d),m=i.cells,p=zDom.cellIndex(c),g=0;for(var f=m.length;--f>=0;){if(f!==p){g+=m[f].offsetWidth}}if(b.efoottbl){b.eftfaker.cells[p].style.width=d+"px"}var e;if(b.ebodytbl){if(zk.opera&&!b.ebodytbl.style.tableLayout){e="auto";b.ebodytbl.style.tableLayout="fixed"}b.ebdfaker.cells[p].style.width=d+"px"}i.cells[p].style.width=d+"px";c.style.width=a+"px";var j=c.firstChild;j.style.width=zDom.revisedWidth(j,a)+"px";o.style.width=g+d+"px";if(b.efoottbl){b.efoottbl.style.width=o.style.width}if(b.ebodytbl){b.ebodytbl.style.width=o.style.width}if(zk.opera&&e){b.ebodytbl.style.tableLayout=e}q.parent.fire("onColSize",{index:p,uuid:q.uuid,width:d+"px",keys:zEvt.keyMetaData(l),marshal:q.$class._onSizingMarshal},null,0)}});
(_zkwg=_zkpk.HeaderWidget).prototype.className='zul.grid.HeaderWidget';zul.grid.HeadersWidget=zk.$extends(zul.Widget,{$init:function(){this.$supers("$init",arguments);this.listen("onColSize",this,null,-1000)},onColSize:function(b){var a=this.parent;if(!a.isFixedLayout()){a.$class.adjustHeadWidth(a)}a.fire("onInnerWidth",a.eheadtbl.style.width);a.fireScrollRender(zk.gecko?200:60)},isSizable:function(){return this._sizable},setSizable:function(a){if(this._sizable!=a){this._sizable=a;this.rerender()}},unbind_:function(){if(this.hdfaker){zDom.remove(this.hdfaker)}if(this.bdfaker){zDom.remove(this.bdfaker)}if(this.ftfaker){zDom.remove(this.ftfaker)}this.$supers("unbind_",arguments)}});
(_zkwg=_zkpk.HeadersWidget).prototype.className='zul.grid.HeadersWidget';zul.grid.Column=zk.$extends(zul.grid.HeaderWidget,{_sortDir:"natural",_sortAsc:"none",_sortDsc:"none",$init:function(){this.$supers("$init",arguments);this.listen("onSort",this,null,-1000)},getGrid:function(){return this.getOwner()},setSort:function(a){if(a&&a.startsWith("client")){this.setSortAscending(a);this.setSortDescending(a)}else{this.setSortAscending("none");this.setSortDescending("none")}},getSortDirection:function(){return this._sortDir},setSortDirection:function(a){if(this._sortDir!=a){this._sortDir=a;var c=this.getNode();if(c){var b=this.getZclass();zDom.rmClass(c,b+"-sort-dsc");zDom.rmClass(c,b+"-sort-asc");switch(a){case"ascending":zDom.addClass(c,b+"-sort-asc");break;case"descending":zDom.addClass(c,b+"-sort-dsc");break;default:zDom.addClass(c,b+"-sort");break}}}},isSortable_:function(){return this._sortAsc!="none"||this._sortDsc!="none"},getSortAscending:function(){return this._sortAsc},setSortAscending:function(c){if(!c){c="none"}if(this._sortAsc!=c){this._sortAsc=c;var b=this.getNode(),a=this.getZclass();if(b){if(c=="none"){zDom.rmClass(b,a+"-sort-asc");if(this._sortDsc=="none"){zDom.rmClass(b,a+"-sort")}}else{zDom.addClass(b,a+"-sort")}}}},getSortDescending:function(){return this._sortDsc},setSortDescending:function(c){if(!c){c="none"}if(this._sortDsc!=c){this._sortDsc=c;var b=this.getNode(),a=this.getZclass();if(b){if(c=="none"){zDom.rmClass(b,a+"-sort-dsc");if(this._sortAsc=="none"){zDom.rmClass(b,a+"-sort")}}else{zDom.addClass(b,a+"-sort")}}}},sort:function(e,o){var c=this.getSortDirection();if(e){if("ascending"==c){return false}}else{if("descending"==c){return false}}var r=e?this._sortAsc:this._sortDsc;if(r=="fromServer"){return false}else{if(r=="none"){o.stop();return false}}var a=this.getGrid();if(!a||a.isModel()){return false}var s=a.rows;if(!s){return false}s.parent.removeChild(s);o.stop();var j=[],b=this.getChildIndex();for(var h=0,l=0,q=s.firstChild;q;q=q.nextSibling,l++){for(var f=0,n=q.firstChild;n;n=n.nextSibling,f++){if(f==b){j[h++]={wgt:n,index:l}}}}var g=c=="ascending"?1:-1,m=this.sorting,p=r=="client(number)";j.sort(function(i,d){var k=m(i.wgt,d.wgt,p)*g;if(k==0){k=(i.index<d.index?-1:1)}return k});for(var h=0,f=j.length;h<f;h++){s.appendChild(j[h].wgt.parent)}this._fixDirection(e);a.appendChild(s);return true},sorting:function(d,c,e){var g=d.getValue(),f=c.getValue();if(e){return g-f}return g>f?1:(g<f?-1:0)},_fixDirection:function(b){for(var a=this.parent.firstChild;a;a=a.nextSibling){a.setSortDirection(a!=this?"natural":b?"ascending":"descending")}},setLabel:function(a){this.$supers("setLabel",arguments)},setVisible:function(a){if(this.isVisible()!=a){this.$supers("setVisible",arguments)}},onSort:function(a){var b=this.getSortDirection();if("ascending"==b){this.sort(false,a)}else{if("descending"==b){this.sort(true,a)}else{if(!this.sort(true,a)){this.sort(false,a)}}}},getZclass:function(){return this._zclass==null?"z-column":this._zclass},domClass_:function(c){var b=this.$supers("domClass_",arguments);if(!c||!c.zclass){var a=this._sortAsc!="none"||this._sortDsc!="none"?this.getZclass()+"-sort":"";return b!=null?b+" "+a:a}return b}});
(_zkwg=_zkpk.Column).prototype.className='zul.grid.Column';_zkmd={};
_zkmd['default']=function(b){var c=this.getZclass();b.push("<th",this.domAttrs_(),'><div id="',this.uuid,'$cave" class="',c,'-cnt">',this.domContent_());if(this.parent.menupopup&&this.parent.menupopup!="none"){b.push('<a id="',this.uuid,'$btn"  href="javascript:;" class="',c,'-btn"></a>')}for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</div></th>")};
zkmld(_zkwg,_zkmd);zul.grid.Columns=zk.$extends(zul.grid.HeadersWidget,{_mpop:"none",_columnshide:true,_columnsgroup:true,getGrid:function(){return this.parent},setColumnshide:function(a){if(this._columnshide!=a){this._columnshide=a}},isColumnshide:function(){return this._columnshide},setColumnsgroup:function(a){if(this._columnsgroup!=a){this._columnsgroup=a}},isColumnsgroup:function(){return this._columnsgroup},getMenupopup:function(){return this._mpop},setMenupopup:function(a){},rerender:function(){if(this.desktop){if(this.parent){this.parent.rerender()}else{this.$superts("rerender",arguments)}}},setPopup:function(a){if(zk.Widget.isInstance(a)){this._mpop=a}},_getMpopId:function(){},getZclass:function(){return this._zclass==null?"z-columns":this._zclass}});
(_zkwg=_zkpk.Columns).prototype.className='zul.grid.Columns';_zkmd={};
_zkmd['default']=function(b){b.push("<tr",this.domAttrs_(),' align="left">');for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</tr>")};
zkmld(_zkwg,_zkmd);zul.grid.Grid=zk.$extends(zul.Widget,{_pagingPosition:"bottom",_preloadsz:7,_innerWidth:"100%",_innerTop:"height:0px;display:none",_innerBottom:"height:0px;display:none",isVflex:function(){return this._vflex},setVflex:function(b){if(this._vflex!=b){this._vflex=b;var c=this.getNode();if(c){if(b){var a=c.style.height;if(!a||a=="auto"){c.style.height="99%"}}this.onSize()}}},setFixedLayout:function(a){if(this._fixedLayout!=a){this._fixedLayout=a;this.rerender()}},isFixedLayout:function(){return this._fixedLayout},getHeads:function(){var b=[];for(var a=this.firstChild;a;a=a.nextSibling){if(a.$instanceof(zul.grid.Auxhead)||a.$instanceof(zul.grid.Columns)){b.push(a)}}return b},getCell:function(b,a){if(!this.rows){return null}if(rows.nChildren<=b){return null}var b=rows.getChildAt(b);return b.nChildren<=a?null:b.getChildAt(a)},getAlign:function(){return this._align},setAlign:function(b){if(this._align!=b){this._align=b;var a=this.getNode();if(a){a.align=b}}},setPagingPosition:function(a){if(this._pagingPosition!=a){this._pagingPosition=a;this.rerender()}},getPagingPosition:function(){return this._pagingPosition},getPageSize:function(){return this.paging.getPageSize()},setPageSize:function(a){this.paging.setPageSize(a)},getPageCount:function(){return this.paging.getPageCount()},getActivePage:function(){return this.paging.getActivePage()},setActivePage:function(a){this.paging.setActivePage(a)},_inPagingMold:function(){return"paging"==this.getMold()},setInnerHeight:function(a){if(a==null){a="100%"}if(this._innerHeight!=a){this._innerHeight=a}},getInnerHeight:function(){return this._innerHeight},setInnerTop:function(a){if(a==null){a="height:0px;display:none"}if(this._innerTop!=a){this._innerTop=a}},getInnerTop:function(){return this._innerTop},setInnerBottom:function(a){if(a==null){a="height:0px;display:none"}if(this._innerBottom!=a){this._innerBottom=a}},getInnerBottom:function(){return this._innerBottom},isModel:function(){return this._model},setModel:function(a){if(this._model!=a){this._model=a}},getPreloadSize:function(){return this._preloadsz},setPreloadSize:function(a){if(a>=0){this._preloadsz=a}},setInnerWidth:function(a){if(a==null){a="100%"}if(this._innerWidth!=a){this._innerWidth=a;if(this.eheadtbl){this.eheadtbl.style.width=a}if(this.ebodytbl){this.ebodytbl.style.width=a}if(this.efoottbl){this.efoottbl.style.width=a}}},getInnerWidth:function(){return this._innerWidth},setHeight:function(a){this.$supers("setHeight",arguments);var b=this.getNode();if(b){if(zk.ie6Only&&this.ebody){this.ebody.style.height=a}this._setHgh(a);this.onSize()}},setWidth:function(a){this.$supers("setWidth",arguments);if(this.eheadtbl){this.eheadtbl.style.width=""}if(this.efoottbl){this.efoottbl.style.width=""}},setStyle:function(a){if(this._style!=a){this.$supers("setStyle",arguments);this.onSize()}},getOddRowSclass:function(){return this._scOddRow==null?this.getZclass()+"-odd":this._scOddRow},setOddRowSclass:function(a){if(!a){a=null}if(this._scOddRow!=a){this._scOddRow=a;var b=this.getNode();if(b&&this.rows){this.rows.stripe()}}},getZclass:function(){return this._zclass==null?"z-grid":this._zclass},onChildAdded_:function(a){this.$supers("onChildAdded_",arguments);if(a.$instanceof(zul.grid.Rows)){this.rows=a}else{if(a.$instanceof(zul.grid.Columns)){this.columns=a}else{if(a.$instanceof(zul.grid.Foot)){this.foot=a}else{if(a.$instanceof(zul.grid.Paging)){this.paging=a}}}}},onChildRemoved_:function(a){this.$supers("onChildRemoved_",arguments);if(a==this.rows){this.rows=null}else{if(a==this.columns){this.columns=null}else{if(a==this.foot){this.foot=null}else{if(a==this.paging){this.paging=null}}}}},insertChildHTML_:function(c,a,b){if(c.$instanceof(zul.grid.Rows)){this.rows=c;if(this.ebodytbl){zDom.insertHTMLBeforeEnd(this.ebodytbl,c._redrawHTML());c.bind_(b);return}}this.rerender()},bind_:function(){this.$supers("bind_",arguments);if(this.isVflex()){var a=this.getNode().style.height;if(!a||a=="auto"){this.getNode().style.height="99%"}}this._bindDomNode();this._fixHeaders();if(this.ebody){zEvt.listen(this.ebody,"scroll",this.proxy(this.doScroll_,"_pxDoScroll"));this.ebody.style.overflow=""}zWatch.listen("onSize",this);zWatch.listen("onVisible",this);zWatch.listen("beforeSize",this)},unbind_:function(){if(this.ebody){zEvt.unlisten(this.ebody,"scroll",this._pxDoScroll)}this.ebody=this.ehead=this.efoot=this.ebodytbl=this.eheadtbl=this.efoottbl=null;zWatch.unlisten("onSize",this);zWatch.unlisten("onVisible",this);zWatch.unlisten("beforeSize",this);this.$supers("unbind_",arguments)},_fixHeaders:function(){if(this.columns&&this.ehead){var b=true;for(var a=this.columns.firstChild;a;a=a.nextSibling){if(a.getLabel()||a.getImage()){b=false;break}}this.ehead.style.display=b?"none":""}},_bindDomNode:function(){for(var a=this.getNode().firstChild;a;a=a.nextSibling){switch(a.id){case this.uuid+"$head":this.ehead=a;this.eheadtbl=zDom.firstChild(a,"TABLE");break;case this.uuid+"$body":this.ebody=a;this.ebodytbl=zDom.firstChild(a,"TABLE");break;case this.uuid+"$foot":this.efoot=a;this.efoottbl=zDom.firstChild(a,"TABLE");break}}if(this.ehead){this.ehdfaker=this.eheadtbl.tBodies[0].rows[0];this.ebdfaker=this.ebodytbl.tBodies[0].rows[0];if(this.efoottbl){this.eftfaker=this.efoottbl.tBodies[0].rows[0]}}},fireScrollRender:function(a){setTimeout(this.proxy(this.onScrollRender),a?a:100)},doScroll_:function(){if(this.ehead){this.ehead.scrollLeft=this.ebody.scrollLeft}if(this.efoot){this.efoot.scrollLeft=this.ebody.scrollLeft}if(!this.paging){this.fireScrollRender(zk.gecko?200:60)}},onScrollRender:function(){if(!this.isModel()||!this.rows||!this.rows.nChildren){return}var f="";var c=this.ebody.scrollTop,a=c+this.ebody.offsetHeight;for(var e=this.rows.getNode().rows,b=0,h=e.length;b<h;++b){var d=e[b];if(zDom.isVisible(d)){var g=zDom.offsetTop(d);if(g+zDom.offsetHeight(d)<c){continue}if(g>a){break}if(!zk.Widget.$(d)._loaded){f+=","+d.id}}}if(f){f=f.substring(1);this.fire("onRender",f)}},beforeSize:function(){var a=zk.ie6Only?this.getWidth():this.getNode().style.width;if(!a||a=="auto"||a.indexOf("%")>=0){if(this.ebody){this.ebody.style.width=""}if(this.ehead){this.ehead.style.width=""}if(this.efoot){this.efoot.style.width=""}}},onSize:_zkf=function(){if(this.isRealVisible()){var a=this.getNode();if(a._lastsz&&a._lastsz.height==a.offsetHeight&&a._lastsz.width==a.offsetWidth){return}this._calcSize();this.fireScrollRender(155);if(zk.ie7){zDom.redoCSS(this.getNode())}}},onVisible:_zkf,onRender:function(a){var b=a.data.marshal();this._curpos=b[0];this._visicnt=b[1];if(this.columns){this.setInnerWidth(b[2])}this.setInnerHeight(b[3]);this._onRender();a.stop()},_vflexSize:function(a){var b=this.getNode();if(zk.ie6Only){b.style.height="";b.style.height=a}return b.offsetHeight-2-(this.ehead?this.ehead.offsetHeight:0)-(this.efoot?this.efoot.offsetHeight:0)},_setHgh:function(a){if(this.isVflex()||(a&&a!="auto"&&a.indexOf("%")<0)){var b=this._vflexSize(a);if(this.paging){}if(b<0){b=0}this.ebody.style.height=b+"px";if(zk.ie&&this.ebody.offsetHeight){}}else{this.ebody.style.height="";this.getNode().style.height=a}},_calcSize:function(){var c=this.getNode();this._setHgh(c.style.height);var a=c.style.width;if(!a||a=="auto"||a.indexOf("%")>=0){a=zDom.revisedWidth(c,c.offsetWidth);if(a<0){a=0}if(a){a+="px"}}if(a){this.ebody.style.width=a;if(this.ehead){this.ehead.style.width=a}if(this.efoot){this.efoot.style.width=a}}var b=this.ebody.clientWidth;if(zk.ie){if(this.eheadtbl&&this.eheadtbl.offsetWidth!=this.ebodytbl.offsetWidth){this.ebodytbl.style.width=""}}if(b&&this.ebody.offsetWidth==this.ebodytbl.offsetWidth&&this.ebody.offsetWidth-b>11){if(--b<0){b=0}this.ebodytbl.style.width=b+"px"}if(this.ehead){if(b){this.ehead.style.width=b+"px"}if(!this.isFixedLayout()&&this.rows){this.$class.adjustHeadWidth(this)}}else{if(this.efoot){if(b){this.efoot.style.width=b+"px"}if(this.efoottbl.rows.length&&this.rows){this.$class.cpCellWidth(this)}}}c._lastsz={height:c.offsetHeight,width:c.offsetWidth}},domFaker_:function(c,a,d){c.push('<tbody style="visibility:hidden;height:0px"><tr id="',this.columns.uuid,a,'" class="',d,'-faker">');for(var b=this.columns.firstChild;b;b=b.nextSibling){c.push('<th id="',b.uuid,a,'"',b.domAttrs_(),'><div style="overflow:hidden"></div></th>')}c.push("</tr></tbody>")}},{adjustHeadWidth:function(q){var c=q.ehdfaker,l=q.ebdfaker,p=q.eftfaker,r=q.rows.getNode().rows;if(!c||!l||!c.cells.length||!l.cells.length||!zDom.isRealVisible(c)||!r.length){return}var b=q.ehead.firstChild,m=q.columns.getNode();if(!m){return}if(zk.opera){if(!b.style.width){var e=true,h=q.ehead.offsetWidth;for(var f=c.cells.length;--f>=0;){if(!c.cells[f].style.width||c.cells[f].style.width.indexOf("%")>=0){e=false;break}h-=zk.parseInt(c.cells[f].style.width)}if(!e||h>=0){b.style.tableLayout="auto"}}}var j=q.ebody.firstChild,k=Math.max(b.offsetWidth,j.offsetWidth),a=Math.min(j.parentNode.clientWidth,j.offsetWidth);if(k==q.ebody.offsetWidth&&q.ebody.offsetWidth>a&&q.ebody.offsetWidth-a<20){k=a}var g=k;b.style.width=k+"px";if(j){j.style.width=b.style.width}if(q.efoot){q.efoot.firstChild.style.width=b.style.width}for(var f=l.cells.length;--f>=0;){if(!zDom.isVisible(c.cells[f])){continue}var d=f!=0?l.cells[f].offsetWidth:g;l.cells[f].style.width=zDom.revisedWidth(l.cells[f],d)+"px";c.cells[f].style.width=l.cells[f].style.width;if(p){p.cells[f].style.width=l.cells[f].style.width}var n=zDom.revisedWidth(m.cells[f],zk.parseInt(c.cells[f].style.width));m.cells[f].style.width=n+"px";var o=m.cells[f].firstChild;o.style.width=zDom.revisedWidth(o,n)+"px";g-=d}if(k!=b.offsetWidth){k=b.offsetWidth;a=Math.min(q.ebody.clientWidth,j.offsetWidth);if(k==q.ebody.offsetWidth&&q.ebody.offsetWidth>a&&q.ebody.offsetWidth-a<20){k=a}b.style.width=k+"px";if(j){j.style.width=b.style.width}if(q.efoot){q.efoot.firstChild.style.width=b.style.width}}},cpCellWidth:function(i){var u=i.efoot.firstChild.rows[0],a=i.rows.getNode().rows;if(!u||!a.length||!u.cells.length){return}var h=u.cells.length,f,k=0,p=i._lastLoadIdx;for(var o=0,q=p||a.length;o<q;++o){var e=a[o];if(!zDom.isVisible(e)||!zk.Widget.$(e)._loaded){continue}var c=e.cells,g=zDom.ncols(c),n=c.length==g&&zDom.isVisible(e);if(n&&g>=h){k=h;f=e;break}if(g>k){f=n?e:null;k=g}else{if(g==k&&!f&&n){f=e}}}if(!k){return}var t=!f;if(t){f=document.createElement("TR");f.style.height="0px";for(var o=0;o<k;++o){f.appendChild(document.createElement("TD"))}a[0].parentNode.appendChild(f)}for(var o=k;--o>=0;){u.cells[o].style.width=""}var b=0;for(var o=k;--o>=0;){var r=u.cells[o],m=f.cells[o];if(zk.opera){b+=m.offsetWidth;r.style.width=zDom.revisedWidth(m,m.offsetWidth)}else{r.style.width=m.offsetWidth+"px";if(k>1){var l=m.offsetWidth-r.offsetWidth;if(l!=0){l+=m.offsetWidth;if(l<0){l=0}r.style.width=l+"px"}}}}if(zk.opera&&!i.isFixedLayout()){u.parentNode.parentNode.style.width=b+"px"}if(t){f.parentNode.removeChild(f)}}});
(_zkwg=_zkpk.Grid).prototype.className='zul.grid.Grid';_zkmd={};
_zkmd['paging']=function(g){var b=this.uuid,c=this.getZclass(),h=this.getInnerWidth(),d=h=="100%"?' width="100%"':"",e=h!="100%"?"width:"+h:"",a=this._inPagingMold();g.push("<div",this.domAttrs_(),(this.getAlign()?' align="'+this.getAlign()+'"':""),">");if(a&&this.paging&&(this.getPagingPosition()=="top"||this.getPagingPosition()=="both")){g.push('<div id="',b,'$pgit" class="',c,'-pgi-t">');this.paging.redraw(g);g.push("</div>")}if(this.columns){g.push('<div id="',b,'$head" class="',c,'-header">',"<table",d,zUtl.cellps0,' style="table-layout:fixed;',e,'">');this.domFaker_(g,"$hdfaker",c);for(var j=this.getHeads(),i=j.shift();i;i=j.shift()){i.redraw(g)}g.push("</table></div>")}g.push('<div id="',b,'$body" class="',c,'-body"');var f=this.getHeight();if(f){g.push(' style="height:',f,'"')}g.push("><table",d,zUtl.cellps0);if(this.isFixedLayout()){g.push(' style="table-layout:fixed;',e,'"')}g.push(">");if(this.columns){this.domFaker_(g,"$bdfaker",c)}if(this.rows){this.rows.redraw(g)}g.push("</table></div>");if(this.foot){g.push('<div id="',b,'$foot" class="',c,'-footer">',"<table",d,zUtl.cellps0,' style="table-layout:fixed;',e,'">');if(this.columns){this.domFaker_(g,"$ftfaker",c)}this.foot.redraw(g);g.push("</table></div>")}if(a&&this.paging&&(this.getPagingPosition()=="bottom"||this.getPagingPosition()=="both")){g.push('<div id="',b,'$pgib" class="',c,'-pgi-b">');this.paging.redraw(g);g.push("</div>")}g.push("</div>")};
_zkmd['default']=[_zkpk.Grid,'paging'];zkmld(_zkwg,_zkmd);zul.grid.Row=zk.$extends(zul.Widget,{getGrid:function(){return this.parent?this.parent.parent:null},getAlign:function(){return this._align},setAlign:function(b){if(this._align!=b){this._align=b;var a=this.getNode();if(a){a.align=b}}},isNowrap:function(){return this._nowrap},setNowrap:function(a){if(this._nowrap!=a){this._nowrap=a;var b=this.getNode();if(b){b.noWrap=a}}},getValign:function(){return this._valign},setValign:function(a){if(this._valign!=a){this._valign=a;var b=this.getNode();if(b){b.vAlign=a}}},setVisible:function(a){if(this.isVisible()!=a){this.$supers("setVisible",arguments);if(this.isStripeable_()&&this.parent){this.parent.stripe()}}},getSpans:function(){return zUtl.intsToString(this._spans)},setSpans:function(a){if(this.getSpans()!=a){this._spans=zUtl.stringToInts(a,1);this.rerender()}},_getIndex:function(){return this.parent?this.getChildIndex():-1},getZclass:function(){return this._zclass!=null?this._zclass:"z-row"},getGroup:function(){},setStyle:function(a){if(this._style!=a){if(!zk._rowTime){zk._rowTime=zUtl.now()}this._style=a;this.rerender()}},getSclass:function(){var b=this.$supers("getSclass",arguments);if(b!=null){return b}var a=this.getGrid();return a?a.getSclass():b},insertChildHTML_:function(d,b,c){var a=this.getGrid().isFixedLayout()?"z-overflow-hidden":"";if(b){zDom.insertHTMLBefore(b.getSubnode("chdextr"),this.encloseChildHTML_({child:d,index:d.getChildIndex(),zclass:this.getZclass(),cls:a}))}else{zDom.insertHTMLBeforeEnd(this.getNode(),this.encloseChildHTML_({child:d,index:d.getChildIndex(),zclass:this.getZclass(),cls:a}))}d.bind_(c)},removeChildHTML_:function(b,a){this.$supers("removeChildHTML_",arguments);zDom.remove(b.uuid+"$chdextr")},encloseChildHTML_:function(b){var a=b.out||[],c=b.child;a.push('<td id="',c.uuid,'$chdextr"',this._childAttrs(c,b.index),">",'<div id="',c.uuid,'$cell" class="',b.zclass,"-cnt ",b.cls,'">');c.redraw(a);a.push("</div></td>");if(!b.out){return a.join("")}},_childAttrs:function(d,o){var i=o,r=1;if(this._spans){for(var n=0,l=this._spans.length;n<l;++n){if(n==o){r=this._spans[n];break}i+=this._spans[n]-1}}var m,h,g,a=this.getGrid();if(a){var q=a.columns;if(q){if(i<q.nChildren){var e=q.getChildAt(i);m=e.getColAttrs();h=e.isVisible()?"":"display:none";g=e.getHeight()}}}var b=this.domStyle_({visible:1,width:1,height:1}),c=d.$instanceof(zul.grid.Detail);if(c){var f=d.getWidth();if(f){b+="width:"+f+";"}}if(h||g){b+=h;if(g){b+="height:"+g+";"}}var p=c?d.getZclass()+"-outer":this.getZclass()+"-inner";if(!m&&!b&&r===1){return' class="'+p+'"'}var s=m?m:"";if(r!==1){s+=' colspan="'+r+'"'}return s+' style="'+b+'" class="'+p+'"'},isStripeable_:function(){return true},onChildAdded_:function(a){this.$supers("onChildAdded_",arguments);if(a.$instanceof(zul.grid.Detail)){this.detail=a}},onChildRemoved_:function(a){this.$supers("onChildRemoved_",arguments);if(a==this.detail){this.detail=null}}});
(_zkwg=_zkpk.Row).prototype.className='zul.grid.Row';_zkmd={};
_zkmd['default']=function(c){c.push("<tr",this.domAttrs_(),">");var d=this.getZclass(),e=this.getGrid().isFixedLayout()?"z-overflow-hidden":"";for(var b=0,a=this.firstChild;a;a=a.nextSibling,b++){this.encloseChildHTML_({child:a,index:b,zclass:d,cls:e,out:c})}c.push("</tr>")};
zkmld(_zkwg,_zkmd);zul.grid.Rows=zk.$extends(zul.Widget,{_visibleItemCount:0,$init:function(){this.$supers("$init",arguments);this._groupsInfo=[];this._groups=[]},getGrid:function(){return this.parent},getGroupCount:function(){return this._groupsInfo.length},getGroups:function(){return this._groups},hasGroup:function(){return this._groupsInfo.length!=0},getZclass:function(){return this._zclass==null?"z-rows":this._zclass},bind_:function(){this.$supers("bind_",arguments);zWatch.listen("onResponse",this);zk.afterMount(this.proxy(this.onResponse))},unbind_:function(){zWatch.unlisten("onResponse",this);this.$supers("unbind_",arguments)},onResponse:function(){if(this._shallStripe){this.stripe();this.getGrid().onSize()}},_syncStripe:function(){this._shallStripe=true;if(!this.inServer&&this.desktop){this.onResponse()}},stripe:function(){var a=this.getGrid().getOddRowSclass();if(!a){return}var e=this.getNode();for(var c=0,b=this.firstChild,d=true;b;b=b.nextSibling,++c){if(b.isVisible()&&b.isStripeable_()){zDom[d?"rmClass":"addClass"](e.rows[c],a);b.fire("onStripe");d=!d}}this._shallStripe=false},onChildAdded_:function(a){this.$supers("onChildAdded_",arguments);this._syncStripe()},onChildRemoved_:function(a){this.$supers("onChildRemoved_",arguments);this._syncStripe()},getVisibleItemCount:function(){return this._visibleItemCount},_addVisibleItemCount:function(b){if(b){this._visibleItemCount+=b;if(this.parent!=null&&this.parent.inPagingMold()){var a=this.parent.getPaginal();a.setTotalSize(this._visibleItemCount)}}},_fixGroupIndex:function(a,c,b){},getGroup:function(a){if(!this._groupsInfo.length){return null}var b=this._getGroupsInfoAt(a);if(b!=null){return}return null},_getLastGroupsInfoAt:function(a){},_getGroupsInfoAt:function(a,b){}});
(_zkwg=_zkpk.Rows).prototype.className='zul.grid.Rows';_zkmd={};
_zkmd['default']=function(b){b.push("<tbody",this.domAttrs_(),">");for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</tbody>")};
zkmld(_zkwg,_zkmd);zul.grid.Foot=zk.$extends(zul.Widget,{getGrid:function(){return this.parent},getZclass:function(){return this._zclass==null?"z-foot":_zclass}});
(_zkwg=_zkpk.Foot).prototype.className='zul.grid.Foot';_zkmd={};
_zkmd['default']=function(b){b.push("<tr",this.domAttrs_(),">");for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</tr>")};
zkmld(_zkwg,_zkmd);zul.grid.Footer=zk.$extends(zul.LabelImageWidget,{_span:1,getGrid:function(){return this.parent?this.parent.parent:null},getColumn:function(){var a=this.getGrid();if(a){var b=a.columns;if(b){return b.getChildAt(this.getChildIndex())}}return null},getSpan:function(){return this._span},setSpan:function(a){if(this._span!=a){this._span=a;var b=this.getNode();if(b){b.colspan=a}}},getZclass:function(){return this._zclass==null?"z-footer":this._zclass}});
(_zkwg=_zkpk.Footer).prototype.className='zul.grid.Footer';_zkmd={};
_zkmd['default']=function(b){b.push("<td",this.domAttrs_(),'><div id="',this.uuid,'$cave" class="',this.getZclass(),'">',this.domContent_());for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</div></td>")};
zkmld(_zkwg,_zkmd);zul.grid.Paging=zk.$extends(zul.Widget,{_pgsz:20,_ttsz:0,_npg:1,_actpg:0,_pginc:10,_autohide:10,replaceHTML:function(){if(this.isBothPaging()){this.parent.rerender()}else{this.$supers("replaceHTML",arguments)}},isBothPaging:function(){return this.parent&&this.parent.getPagingPosition&&"both"==this.parent.getPagingPosition()},getPageSize:function(){return this._pgsz},setPageSize:function(a){if(this._pgsz!=a){this._pgsz=a;this._updatePageNum()}},getTotalSize:function(){return this._ttsz},setTotalSize:function(a){if(this._ttsz!=a){this._ttsz=a;this._updatePageNum();if(this._detailed){rerender()}}},_updatePageNum:function(){var a=Math.floor((this._ttsz-1)/this._pgsz+1);if(a==0){a=1}if(a!=this._npg){this._npg=a;if(this._actpg>=this._npg){this._actpg=this._npg-1}}},getPageCount:function(){return this._npg},setPageCount:function(a){this._npg=a},getActivePage:function(){return this._actpg},setActivePage:function(a){if(this._actpg!=a){this._actpg=a}},getPageIncrement:function(){return this._pginc},setPageIncrement:function(a){if(_pginc!=a){_pginc=a;this.rerender()}},isDetailed:function(){return this._detailed},setDetailed:function(a){if(this._detailed!=a){this._detailed=a;this.rerender()}},isAutohide:function(){return this._autohide},setAutohide:function(a){if(this._autohide!=a){this._autohide=a;if(this._npg==1){this.rerender()}}},_infoTags:function(){if(this._ttsz==0){return""}var b=(this._actpg+1)*this._pgsz,a=[];a.push('<div class="',this.getZclass(),'-info">[ ',b+1," - ",b>this._ttsz?this._ttsz:b," / ",this._ttsz," ]</div>");return a.join("")},_innerTags:function(){var c=[];var f=this._pginc/2,d,b=this._actpg+f-1;if(b>=this._npg){b=this._npg-1;d=b-this._pginc+1;if(d<0){d=0}}else{d=this._actpg-f;if(d<0){d=0}b=d+this._pginc-1;if(b>=this._npg){b=this._npg-1}}var a=this.getZclass();if(this._actpg>0){if(d>0){this.appendAnchor(a,c,msgzul.FIRST,0)}this.appendAnchor(a,c,msgzul.PREV,this._actpg-1)}var e=this._actpg<this._npg-1;for(;d<=b;++d){if(d==this._actpg){this.appendAnchor(a,c,d+1,d,true)}else{this.appendAnchor(a,c,d+1,d)}}if(e){this.appendAnchor(a,c,msgzul.NEXT,this._actpg+1);if(b<this._npg-1){this.appendAnchor(a,c,msgzul.LAST,this._npg-1)}}if(this._detailed){c.push("<span>[",this._actpg*this._pgsz+1,"/",this._ttsz,"]</span>")}return c.join("")},appendAnchor:function(d,b,a,e,c){d+="-cnt"+(c?" "+d+"-seld":"");b.push('<a class="',d,'" href="javascript:;" onclick="zul.grid.Paging.go(this,',e,')">',a,"</a>&nbsp;")},getZclass:function(){var a="os"==this.getMold()?"-os":"";return this._zclass==null?"z-paging"+a:this._zclass},isVisible:function(){var a=this.$supers("isVisible",arguments);return a&&(this._npg>1||!this._autohide)},bind_:function(){this.$supers("bind_",arguments);if(this.getMold()=="os"){return}var a=this.uuid,g=zDom.$$(a,"real"),b=this.getZclass(),h=this.$class;for(var f=g.length;--f>=0;){zEvt.listen(g[f],"keydown",h._doKeyDown);zEvt.listen(g[f],"blur",h._doBlur)}for(var l=["first","prev","last","next"],d=l.length;--d>=0;){var c=zDom.$$(a,l[d]);for(var e=c.length;--e>=0;){zEvt.listen(c[e],"mouseover",h._doMouseOver);zEvt.listen(c[e],"mouseout",h._doMouseOut);zEvt.listen(c[e],"mousedown",h._doMouseDown);zEvt.listen(c[e],"click",h["_do"+l[d]+"Click"]);if(this._npg==1){zDom.addClass(c[e],b+"-btn-disd")}else{if(l[d]=="first"||l[d]=="prev"){if(this._actpg==0){zDom.addClass(c[e],b+"-btn-disd")}}else{if(this._actpg==this._npg-1){zDom.addClass(c[e],b+"-btn-disd")}}}}}},unbind_:function(){if(this.getMold()!="os"){var g=this.uuid,a=zDom.$$(g,"real"),c=this.$class;for(var f=a.length;--f>=0;){zEvt.unlisten(a[f],"keydown",c._doKeyDown);zEvt.unlisten(a[f],"blur",c._doBlur)}for(var h=["first","prev","last","next"],b=h.length;--b>=0;){var e=zDom.$$(g,h[b]);for(var d=e.length;--d>=0;){zEvt.unlisten(e[d],"mouseover",c._doMouseOver);zEvt.unlisten(e[d],"mouseout",c._doMouseOut);zEvt.unlisten(e[d],"mousedown",c._doMouseDown);zEvt.unlisten(e[d],"click",c["_do"+h[b]+"Click"])}}}this.$supers("unbind_",arguments)}},{go:function(a,c){var b=zk.Widget.isInstance(a)?a:zk.Widget.$(a);if(b&&b.getActivePage()!=c){b.fire("onPaging",c)}},_doKeyDown:function(a){if(!a){a=window.event}var c=zEvt.target(a),d=zk.Widget.$(c);if(c.disabled||c.readOnly){return}var b=zEvt.keyCode(a);switch(b){case 48:case 96:case 49:case 97:case 50:case 98:case 51:case 99:case 52:case 100:case 53:case 101:case 54:case 102:case 55:case 103:case 56:case 104:case 57:case 105:break;case 37:break;case 38:case 33:d.$class._increase(c,d,1);zEvt.stop(a);break;case 39:break;case 40:case 34:d.$class._increase(c,d,-1);zEvt.stop(a);break;case 36:d.$class.go(d,0);zEvt.stop(a);break;case 35:d.$class.go(d,d._npg-1);zEvt.stop(a);break;case 9:case 8:case 46:break;case 13:d.$class._increase(c,d,0);d.$class.go(d,c.value-1);zEvt.stop(a);break;default:if(!(b>=112&&b<=123)&&!a.ctrlKey&&!a.altKey){zEvt.stop(a)}}},_doBlur:function(a){if(!a){a=window.event}var b=zEvt.target(a),c=zk.Widget.$(b);if(b.disabled||b.readOnly){return}c.$class._increase(b,c,0);c.$class.go(c,b.value-1);zEvt.stop(a)},_increase:function(a,d,c){var b=zk.parseInt(a.value);b+=c;if(b<1){b=1}else{if(b>d._npg){b=d._npg}}a.value=b},_dofirstClick:function(a){if(!a){a=window.event}var g=zk.Widget.$(a),f=g.getZclass();if(g.getActivePage()!=0){g.$class.go(g,0);var e=g.uuid;for(var h=["first","prev"],b=h.length;--b>=0;){for(var d=zDom.$$(e,h[b]),c=d.length;--c>=0;){zDom.addClass(d[c],f+"-btn-disd")}}}},_doprevClick:function(g){if(!g){g=window.event}var j=zk.Widget.$(g),e=j.getActivePage(),b=j.getZclass();if(e>0){j.$class.go(j,e-1);if(e-1==0){var a=j.uuid;for(var h=["first","prev"],d=h.length;--d>=0;){for(var c=zDom.$$(a,h[d]),f=c.length;--f>=0;){zDom.addClass(c[f],b+"-btn-disd")}}}}},_donextClick:function(h){if(!h){h=window.event}var l=zk.Widget.$(h),e=l.getActivePage(),g=l.getPageCount(),b=l.getZclass();if(e<g-1){l.$class.go(l,e+1);if(e+1==g-1){var a=l.uuid;for(var j=["last","next"],d=j.length;--d>=0;){for(var c=zDom.$$(a,j[d]),f=c.length;--f>=0;){zDom.addClass(c[f],b+"-btn-disd")}}}}},_dolastClick:function(g){if(!g){g=window.event}var j=zk.Widget.$(g),f=j.getPageCount(),b=j.getZclass();if(j.getActivePage()<f-1){j.$class.go(j,f-1);var a=j.uuid;for(var h=["last","next"],d=h.length;--d>=0;){for(var c=zDom.$$(a,h[d]),e=c.length;--e>=0;){zDom.addClass(c[e],b+"-btn-disd")}}}},_doMouseOver:function(a){if(!a){a=window.event}var c=zEvt.target(a),b=zDom.parentByTag(c,"TABLE"),d=zk.Widget.$(c).getZclass();if(!zDom.hasClass(b,d+"-btn-disd")){zDom.addClass(b,d+"-btn-over")}},_doMouseOut:function(a){if(!a){a=window.event}var c=zEvt.target(a),b=zDom.parentByTag(c,"TABLE"),d=zk.Widget.$(c);zDom.rmClass(b,d.getZclass()+"-btn-over")},_doMouseDown:function(a){if(!a){a=window.event}var c=zEvt.target(a),b=zDom.parentByTag(c,"TABLE"),e=zk.Widget.$(c),d=e.getZclass();if(zDom.hasClass(b,d+"-btn-disd")){return}zDom.addClass(b,d+"-btn-clk");e.$class._downbtn=b;zEvt.listen(document.body,"mouseup",e.$class._doMouseUp)},_doMouseUp:function(a){if(!a){a=window.event}if(zul.grid.Paging._downbtn){var b=zk.Widget.$(zul.grid.Paging._downbtn).getZclass();zDom.rmClass(zul.grid.Paging._downbtn,b+"-btn-clk")}zul.grid.Paging._downbtn=null;zEvt.unlisten(document.body,"mouseup",zul.grid.Paging._doMouseUp)}});
(_zkwg=_zkpk.Paging).prototype.className='zul.grid.Paging';_zkmd={};
_zkmd['os']=function(a){if(this.getMold()=="os"){a.push("<div",this.domAttrs_(),">",this._innerTags(),"</div>");return}var b=this.uuid,c=this.getZclass();a.push('<div name="',b,'"',this.domAttrs_(),">","<table",zUtl.cellps0,'><tbody><tr><td><table id="',b,'$first" name="',b,'$first"',zUtl.cellps0,' class="',c,'-btn"><tbody><tr>','<td class="',c,'-btn-l"><i>&#160;</i></td>','<td class="',c,'-btn-m"><em unselectable="on">','<button type="button" class="',c,'-first"> </button></em></td>','<td class="',c,'-btn-r"><i>&#160;</i></td></tr></tbody></table></td>','<td><table id="',b,'$prev" name="',b,'$prev"',zUtl.cellps0,' class="',c,'-btn"><tbody><tr><td class="',c,'-btn-l"><i>&#160;</i></td>','<td class="',c,'-btn-m"><em unselectable="on"><button type="button" class="',c,'-prev"> </button></em></td><td class="',c,'-btn-r"><i>&#160;</i></td>','</tr></tbody></table></td><td><span class="',c,'-sep"/></td>','<td><span class="',c,'-text"></span></td><td><input id="',b,'$real" name="',b,'$real" type="text" class="',c,'-inp" value="',this.getActivePage()+1,'" size="3"/></td>','<td><span class="',c,'-text">/ ',this.getPageCount(),"</span></td>",'<td><span class="',c,'-sep"/></td><td><table id="',b,'$next" name="',b,'$next"',zUtl.cellps0,' class="',c,'-btn">','<tbody><tr><td class="',c,'-btn-l"><i>&#160;</i></td><td class="',c,'-btn-m"><em unselectable="on"><button type="button" class="',c,'-next"> </button></em></td><td class="',c,'-btn-r"><i>&#160;</i></td>','</tr></tbody></table></td><td><table id="',b,'$last" name="',b,'$last"',zUtl.cellps0,' class="',c,'-btn"><tbody><tr>','<td class="',c,'-btn-l"><i>&#160;</i></td><td class="',c,'-btn-m"><em unselectable="on"><button type="button" class="',c,'-last"> </button></em></td><td class="',c,'-btn-r"><i>&#160;</i></td>',"</tr></tbody></table></td></tr></tbody></table>");if(this.isDetailed()){a.push(this._infoTags())}a.push("</div>")};
_zkmd['default']=[_zkpk.Paging,'os'];zkmld(_zkwg,_zkmd);
}finally{zPkg.end(_z);}}