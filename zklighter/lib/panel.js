_z='zul.panel';if(!zk.$import(_z)){try{_zkpk=zk.$package(_z);
zPkg.load("zul.wgt");zul.panel.Panel=zk.$extends(zul.Widget,{_border:"none",_title:"",_open:true,$init:function(){this.$supers("$init",arguments);this.listen("onClose",this,null,-1000);this.listen("onMove",this,null,-1000)},setVisible:function(b,a){if(this._visible!=b){this.$supers("setVisible",arguments)}},setHeight:function(){this.$supers("setHeight",arguments);if(this.desktop){zWatch.fireDown("beforeSize",null,this);zWatch.fireDown("onSize",null,this)}},setWidth:function(){this.$supers("setWidth",arguments);if(this.desktop){zWatch.fireDown("beforeSize",null,this);zWatch.fireDown("onSize",null,this)}},setTop:function(){this._hideShadow();this.$supers("setTop",arguments);this._syncShadow()},setLeft:function(){this._hideShadow();this.$supers("setLeft",arguments);this._syncShadow()},updateDomStyle_:function(){this.$supers("updateDomStyle_",arguments);if(this.desktop){zWatch.fireDown("beforeSize",null,this);zWatch.fireDown("onSize",null,this)}},isOpen:function(){return this._open},setOpen:function(c,b){if(this._open!=c){this._open=c;var d=this.getNode();if(d){var e=this.getZclass(),a=this.getSubnode("body");if(a){if(c){zDom.rmClass(d,e+"-collapsed");zAnima.slideDown(this,a,{afterAnima:this._afterSlideDown})}else{zDom.addClass(d,e+"-collapsed");this._hideShadow();if(zk.ie6Only&&!d.style.width){d.runtimeStyle.width="100%"}zAnima.slideUp(this,a,{beforeAnima:this._beforeSlideUp})}}if(b){this.fire("onOpen",c)}}}},isFramable:function(){return this._framable},setFramable:function(a){if(this._framable!=a){this._framable=a;this.rerender()}},setMovable:function(a){if(this._movable!=a){this._movable=a;this.rerender()}},isMovable:function(){return this._movable},isFloatable:function(){return this._floatable},setFloatable:function(a){if(this._floatable!=a){this._floatable=a;this.rerender()}},isMaximized:function(){return this._maximized},setMaximized:function(a){if(this._maximized!=a){this._maximized=a}},isMaximizable:function(){return this._maximizable},setMaximizable:function(a){if(this._maximizable!=a){this._maximizable=a;this.rerender()}},isMinimized:function(){return this._minimized},setMinimized:function(c,e){if(this._minimized!=c){this._minimized=c;var a=this.getNode();if(a){var j=a.style,b=j.left,g=j.top,f=j.width,d=j.height;if(c){zWatch.fireDown("onHide",{visible:true},this);zDom.hide(a)}else{zDom.show(a);zWatch.fireDown("onVisible",{visible:true},this)}if(!e){var i=this;this.fire("onMinimize",{left:j.left,top:j.top,width:j.width,height:j.height,minimized:c,marshal:i.$class._onMinimizeMarshal})}}}},isMinimizable:function(){return this._minimizable},setMinimizable:function(a){if(this._minimizable!=a){this._minimizable=a;this.rerender()}},isCollapsible:function(){return this._collapsible},setCollapsible:function(a){if(this._collapsible!=a){this._collapsible=a;this.rerender()}},isClosable:function(){return this._closable},setClosable:function(a){if(this._closable!=a){this._closable=a;this.rerender()}},getBorder:function(){return this._border},setBorder:function(a){if(!a||"0"==a){a="none"}if(this._border!=a){this._border=a;this.rerender()}},getTitle:function(){return this._title},setTitle:function(a){if(!a){a=""}if(this._title!=a){this._title=a;this.rerender()}},addToolbar:function(a,b){switch(a){case"tbar":this.tbar=b;break;case"bbar":this.bbar=b;break;case"fbar":this.fbar=b;break;default:return false}return this.appendChild(b)},onClose:function(){if(!this.inServer){this.parent.removeChild(this)}},onMove:function(a){this._left=a.data[0];this._top=a.data[1]},onSize:_zkf=function(){this._hideShadow();if(this.isMaximized()){}this._fixHgh();this._fixWdh();this._syncShadow()},onVisible:_zkf,onHide:function(){this._hideShadow()},_fixWdh:zk.ie7?function(){if(!this.isFramable()||!this.panelchildren){return}var c=this.getNode(),a=this.panelchildren.getNode().parentNode;wdh=c.style.width,tl=zDom.firstChild(c,"DIV"),bl=zDom.lastChild(zDom.lastChild(c,"DIV"),"DIV");if(!wdh||wdh=="auto"){var b=zDom.frameWidth(a.parentNode)+zDom.frameWidth(a.parentNode.parentNode);if(tl){tl.firstChild.firstChild.style.width=Math.max(0,a.offsetWidth-(zDom.frameWidth(tl)+zDom.frameWidth(tl.firstChild)-b))+"px"}if(bl){bl.firstChild.firstChild.style.width=Math.max(0,a.offsetWidth-(zDom.frameWidth(bl)+zDom.frameWidth(bl.firstChild)-b))+"px"}}else{if(tl){tl.firstChild.firstChild.style.width=""}if(bl){bl.firstChild.firstChild.style.width=""}}}:zk.$void,_fixHgh:function(){if(!this.panelchildren||!this.isRealVisible()){return}var c=this.getNode(),a=this.panelchildren.getNode(),b=c.style.height;if(zk.ie6Only&&((b&&b!="auto")||a.style.height)){a.style.height="0px"}if(b&&b!="auto"){a.style.height=zDom.revisedHeight(a,c.offsetHeight-this._frameHeight(c)-1,true)+"px"}},_frameHeight:function(i){var b=zDom.frameHeight(i)+this._titleHeight(i),g=this.getSubnode("tbar"),e=this.getSubnode("bbar");if(this.isFramable()){var a=this.getSubnode("body"),f=zDom.lastChild(a,"DIV"),d=this.getSubnode("cap");b+=f.offsetHeight;if(this.panelchildren){b+=zDom.frameHeight(this.panelchildren.getNode().parentNode)}if(d){b+=zDom.frameHeight(d.parentNode)}}else{var c=this.getSubnode("fbar");if(c){b+=c.offsetHeight}}if(g){b+=g.offsetHeight}if(e){b+=e.offsetHeight}return b},_titleHeight:function(b){var a=this.getSubnode("cap");return a?a.offsetHeight:this.isFramable()?zDom.firstChild(b,"DIV").firstChild.firstChild.offsetHeight:0},_syncMaximized:function(a){},onFloatUp:function(a){if(!this.isVisible()||!this.isFloatable()){return}for(;a;a=a.parent){if(a==this){this.setTopmost();return}if(a.isFloating_()){return}}},getZclass:function(){return this._zclass==null?"z-panel":this._zclass},_afterSlideDown:function(a){zWatch.fireDown("onVisible",{visible:true},this)},_beforeSlideUp:function(a){zWatch.fireDown("onHide",{visible:true},this)},_initFloat:function(){var b=this.getNode();if(!b.style.top&&!b.style.left){var a=zDom.revisedOffset(b);b.style.left=a[0]+"px";b.style.top=a[1]+"px"}b.style.position="absolute";if(this.isMovable()){this._initMove()}this._syncShadow();if(this.isRealVisible()){zDom.cleanVisibility(b);this.setTopmost()}},_initMove:function(b){var c=this.getSubnode("cap");if(c&&!this._drag){c.style.cursor="move";var a=this.$class;this._drag=new zk.Draggable(this,null,{handle:c,overlay:true,stackup:true,starteffect:a._startmove,ignoredrag:a._ignoremove,endeffect:a._aftermove})}},_syncShadow:function(){if(!this.isFloatable()){if(this._shadow){this._shadow.destroy();this._shadow=null}}else{if(!this._shadow){this._shadow=new zk.eff.Shadow(this.getNode(),{stackup:true})}this._shadow.sync()}},_hideShadow:function(){var a=this._shadow;if(a){a.hide()}},bind_:function(){this.$supers("bind_",arguments);zWatch.listen("onSize",this);zWatch.listen("onVisible",this);zWatch.listen("onHide",this);var b=this.uuid,a=this.$class;if(this.isFloatable()){zWatch.listen("onFloatUp",this);this.setFloating_(true);this._initFloat()}},unbind_:function(){zWatch.unlisten("onSize",this);zWatch.unlisten("onVisible",this);zWatch.unlisten("onFloatUp",this);zWatch.unlisten("onHide",this);this.setFloating_(false);if(this._shadow){this._shadow.destroy();this._shadow=null}if(this._drag){this._drag.destroy();this._drag=null}this.$supers("unbind_",arguments)},doClick_:function(a){switch(a.nativeTarget){case this.getSubnode("close"):this.fire("onClose");a.stop();break;case this.getSubnode("max"):break;case this.getSubnode("min"):if(this.isMinimizable()){this.setMinimized(!this.isMinimized())}break;case this.getSubnode("toggle"):if(this.isCollapsible()){this.setOpen(!this.isOpen())}break}this.$supers("doClick_",arguments)},doMouseOver_:function(a){switch(a.nativeTarget){case this.getSubnode("close"):zDom.addClass(this.getSubnode("close"),this.getZclass()+"-close-over");break;case this.getSubnode("max"):var c=this.getZclass(),b=this.isMaximized()?" "+c+"-maximized-over":"";zDom.addClass(this.getSubnode("max"),c+"-maximize-over"+b);break;case this.getSubnode("min"):zDom.addClass(this.getSubnode("min"),this.getZclass()+"-minimize-over");break;case this.getSubnode("toggle"):zDom.addClass(this.getSubnode("toggle"),this.getZclass()+"-toggle-over");break}this.$supers("doMouseOver_",arguments)},doMouseOut_:function(b){switch(b.nativeTarget){case this.getSubnode("close"):zDom.rmClass(this.getSubnode("close"),this.getZclass()+"-close-over");break;case this.getSubnode("max"):var c=this.getZclass(),a=this.getSubnode("max");if(this.isMaximized()){zDom.rmClass(a,c+"-maximized-over")}zDom.rmClass(a,c+"-maximize-over");break;case this.getSubnode("min"):zDom.rmClass(this.getSubnode("min"),this.getZclass()+"-minimize-over");break;case this.getSubnode("toggle"):zDom.rmClass(this.getSubnode("toggle"),this.getZclass()+"-toggle-over");break}this.$supers("doMouseOut_",arguments)},domClass_:function(d){var b=this.$supers("domClass_",arguments);if(!d||!d.zclass){var c=this.getZclass();var a="normal"==this.getBorder()?"":c+"-noborder";if(a){b+=(b?" ":"")+a}addded=this.isOpen()?"":c+"-collapsed";if(a){b+=(b?" ":"")+a}}return b},onChildAdded_:function(a){this.$supers("onChildAdded_",arguments);if(a.$instanceof(zul.wgt.Caption)){this.caption=a}else{if(a.$instanceof(zul.panel.Panelchildren)){this.panelchildren=a}else{if(a.$instanceof(zul.wgt.Toolbar)){if(this.firstChild==a){this.tbar=a}else{if(this.lastChild==a&&a.previousSibling.$instanceof(zul.wgt.Toolbar)){this.fbar=a}else{if(a.previousSibling.$instanceof(zul.panel.Panelchildren)){this.bbar=a}}}}}}this.rerender()},onChildRemoved_:function(a){this.$supers("onChildRemoved_",arguments);if(a==this.caption){this.caption=null}else{if(a==this.panelchildren){this.panelchildren=null}else{if(a==this.tbar){this.tbar=null}else{if(a==this.bbar){this.bbar=null}else{if(a==this.fbar){this.fbar=null}}}}}this.rerender()}},{_startmove:function(b){b.control._hideShadow();var a=b.node;if(a.style.top&&a.style.top.indexOf("%")>=0){a.style.top=a.offsetTop+"px"}if(a.style.left&&a.style.left.indexOf("%")>=0){a.style.left=a.offsetLeft+"px"}},_ignoremove:function(b,d,a){var c=b.control;switch(zEvt.target(a)){case c.getSubnode("close"):case c.getSubnode("max"):case c.getSubnode("min"):case c.getSubnode("toggle"):return true}return false},_aftermove:function(e,b){var f=e.control;f._syncShadow();var d=zEvt.keyMetaData(b),c=f.getNode(),a=zk.parseInt(c.style.left),g=zk.parseInt(c.style.top);f.fire("onMove",{x:a+"px",y:g+"px",keys:d,marshal:f.$class._onMoveMarshal},{ignorable:true})},_onMoveMarshal:function(){return[this.x,this.y,this.keys?this.keys.marshal():""]},_onMinimizeMarshal:function(){return[this.left,this.top,this.width,this.height,this.minimized]}});
(_zkwg=_zkpk.Panel).prototype.className='zul.panel.Panel';_zkmd={};
_zkmd['default']=function(c,g){var f=this.getZclass(),d=this.uuid,e=this.getTitle(),b=this.caption,h=this.isFramable(),a=this.getBorder()!="normal";c.push("<div",this.domAttrs_(),">");if(h){c.push('<div class="',f,"-tl");if(!b&&!e){c.push(" ",f,"-noheader")}c.push('"><div class="',f,'-tr"><div class="',f,'-tm">')}if(b||e){c.push('<div id="',d,'$cap" class="',f,"-header");if(!h&&a){c.push(" ",f,"-header-noborder")}c.push('">');if(!b){if(this.isClosable()){c.push('<div id="',d,'$close" class="',f,"-tool ",f,'-close"></div>')}if(this.isMaximizable()){c.push('<div id="',d,'$max" class="',f,"-tool ",f,"-maximize");if(this.isMaximized()){c.push(" ",f,"-maximized")}c.push('"></div>')}if(this.isMinimizable()){c.push('<div id="',d,'$min" class="',f,"-tool ",f,'-minimize"></div>')}if(this.isCollapsible()){c.push('<div id="',d,'$toggle" class="',f,"-tool ",f,'-toggle"></div>')}c.push(zUtl.encodeXML(e))}else{b.redraw(c)}c.push("</div>")}if(h){c.push("</div></div></div>")}c.push('<div id="',d,'$body" class="',f,'-body"');if(!this.isOpen()){c.push(' style="display:none;"')}c.push(">");if(h){c.push('<div class="',f,'-cl"><div class="',f,'-cr"><div class="',f,'-cm">')}if(this.tbar){c.push('<div id="',d,'$tbar" class="',f,"-tbar");if(a){c.push(" ",f,"-tbar-noborder")}if(h&&!b&&!e){c.push(" ",f,"-noheader")}c.push('">');this.tbar.redraw(c);c.push("</div>")}if(this.panelchildren){this.panelchildren.redraw(c)}if(this.bbar){c.push('<div id="',d,'$bbar" class="',f,"-bbar");if(a){c.push(" ",f,"-bbar-noborder")}if(h&&!b&&!e){c.push(" ",f,"-noheader")}c.push('">');this.bbar.redraw(c);c.push("</div>")}if(h){c.push('</div></div></div><div class="',f,"-bl");if(!this.fbar){c.push(" ",f,"-nofbar")}c.push('"><div class="',f,'-br"><div class="',f,'-bm">')}if(this.fbar){c.push('<div id="',d,'$fbar" class="',f,'-fbar">');this.fbar.redraw(c);c.push("</div>")}if(h){c.push("</div></div></div>")}c.push("</div></div>")};
zkmld(_zkwg,_zkmd);zul.panel.Panelchildren=zk.$extends(zul.Widget,{setHeight:zk.$void,setWidth:zk.$void,getZclass:function(){return this._zclass==null?"z-panel-children":this._zclass},domClass_:function(d){var b=this.$supers("domClass_",arguments);if(!d||!d.zclass){var c=this.getZclass();var a=!this.parent.getTitle()&&!this.parent.caption?c+"-noheader":"";if(a){b+=(b?" ":"")+a}a=this.parent.getBorder()=="normal"?"":c+"-noborder";if(a){b+=(b?" ":"")+a}}return b},updateDomStyle_:function(){this.$supers("updateDomStyle_",arguments);if(this.desktop){zWatch.fireDown("beforeSize",null,this.parent);zWatch.fireDown("onSize",null,this.parent)}}});
(_zkwg=_zkpk.Panelchildren).prototype.className='zul.panel.Panelchildren';_zkmd={};
_zkmd['default']=function(b){b.push("<div",this.domAttrs_(),">");for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</div>")};
zkmld(_zkwg,_zkmd);
}finally{zPkg.end(_z);}}